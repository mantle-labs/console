"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[3328],{63328:function(e,n,t){t.r(n),t.d(n,{default:function(){return q}});var i=t(29439),s=t(1413),r=t(72791),o=t(60364),l=t(16871),a=t(11135),c=t(25787),u=t(61889),d=t(64554),f=t(26181),x=t.n(f),p=t(23814),h=t(81207),m=t(56087),Z=t(38442),v=t(75578),j=t(45902),g=t(80184),b=function(e){var n=e.icon,t=void 0===n?null:n,i=e.label,s=void 0===i?null:i;return(0,g.jsxs)(d.Z,{sx:{display:"flex"},children:[(0,g.jsx)("div",{style:{height:16,width:16,display:"flex",alignItems:"center",marginTop:5},children:t}),(0,g.jsx)("div",{style:{marginLeft:t?5:"none"},children:s})]})},y=t(49324),E=t(45987),T=t(36151),C=t(72401),S=["isLoading","onClick","label"],k=function(e){var n=e.isLoading,t=e.onClick,i=e.label,r=(0,E.Z)(e,S);return(0,g.jsx)(T.Z,(0,s.Z)((0,s.Z)({color:"primary",onClick:t,variant:"text",sx:{padding:0,margin:0,alignItems:"flex-start",justifyContent:"flex-start",display:"inline-flex",height:"auto",textDecoration:"underline",color:"#2781B0","&:hover":{background:"#ffffff",textDecoration:"underline"}},disableRipple:!0,disableFocusRipple:!0},r),{},{children:n?(0,g.jsx)(C.Z,{style:{width:16,height:16}}):i}))},_=t(13400),N=t(33548),I=["disabled","onClick"],P=(0,c.Z)((function(e){return(0,a.Z)({root:{"&:hover":{backgroundColor:"#E2E2E2"}}})}))((function(e){var n=e.disabled,t=e.onClick,i=(0,E.Z)(e,I);return(0,g.jsx)(_.Z,(0,s.Z)((0,s.Z)({size:"small",disabled:n,onClick:t},i),{},{children:(0,g.jsx)(N.Z,{})}))})),F=function(e){var n=e.resourceName,t=e.iamScopes,i=e.secureCmpProps,r=void 0===i?{}:i,o=e.children;return(0,g.jsx)(Z.s,(0,s.Z)((0,s.Z)({scopes:t,resource:n,errorProps:{disabled:!0}},r),{},{children:o}))},O=function(e){var n=e.isLoading,t=void 0===n||n,i=e.resourceName,s=void 0===i?"":i,r=e.iamScopes,o=e.secureCmpProps,l=void 0===o?{}:o,a=e.property,c=void 0===a?null:a,u=e.value,f=void 0===u?null:u,x=e.onEdit;return(0,g.jsxs)(d.Z,{sx:{display:"flex",alignItems:"baseline",justifyContent:"flex-start"},children:[(0,g.jsx)(j.Z,{label:c,value:(0,g.jsx)(F,{resourceName:s,iamScopes:r,secureCmpProps:l,children:(0,g.jsx)(k,{isLoading:t,onClick:x,label:f})})}),(0,g.jsx)(F,{resourceName:s,iamScopes:r,secureCmpProps:l,children:(0,g.jsx)(P,{onClick:x,sx:{background:"#f8f8f8",marginLeft:"3px",top:3,"& .min-icon":{width:"16px",height:"16px"}}})})]})},w=t(45248),L=function(e){var n=e.bucketSize;return(0,g.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center","& .min-icon":{height:37,width:37}},children:[(0,g.jsx)(y.Mhr,{}),(0,g.jsxs)(d.Z,{sx:{display:"flex",alignItems:"flex-start",justifyContent:"center",flexFlow:"column",marginLeft:"20px",fontSize:"19px"},children:[(0,g.jsx)("label",{style:{fontWeight:600},children:"Reported Usage:"}),(0,g.jsx)("label",{children:(0,w.ae)(n)})]})]})},R=function(e){var n=e.quota;return(0,g.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center","& .min-icon":{height:37,width:37}},children:[(0,g.jsx)(y.sjJ,{}),(0,g.jsxs)(d.Z,{sx:{display:"flex",alignItems:"flex-start",justifyContent:"center",flexFlow:"column",marginLeft:"20px",fontSize:"19px"},children:[(0,g.jsxs)("label",{style:{fontWeight:600,textTransform:"capitalize"},children:[null===n||void 0===n?void 0:n.type," Quota"]}),(0,g.jsxs)("label",{children:[" ",(0,w.ae)("".concat(null===n||void 0===n?void 0:n.quota),!0)]})]})]})},U=t(50896),B=t(87995),A=t(9859),G=t(25469),z=(0,v.Z)(r.lazy((function(){return Promise.all([t.e(5958),t.e(1913)]).then(t.bind(t,33690))}))),M=(0,v.Z)(r.lazy((function(){return t.e(1604).then(t.bind(t,1604))}))),K=(0,v.Z)(r.lazy((function(){return t.e(402).then(t.bind(t,70402))}))),D=(0,v.Z)(r.lazy((function(){return Promise.all([t.e(1918),t.e(1705)]).then(t.bind(t,71705))}))),V=(0,v.Z)(r.lazy((function(){return t.e(1581).then(t.bind(t,1581))}))),Q={display:"grid",gridTemplateColumns:{xs:"1fr",sm:"2fr 1fr"},gridAutoFlow:{xs:"dense",sm:"row"},gap:2},q=(0,c.Z)((function(e){return(0,a.Z)((0,s.Z)((0,s.Z)({},p.bK),p.VI))}))((function(e){var n=e.classes,t=(0,G.TL)(),a=(0,l.UO)(),c=(0,o.v9)(A.HQ),f=(0,o.v9)(A.G6),p=(0,o.v9)(B.N5),v=(0,r.useState)("0"),E=(0,i.Z)(v,2),T=E[0],C=E[1],S=(0,r.useState)(!1),k=(0,i.Z)(S,2),_=k[0],N=k[1],I=(0,r.useState)(!1),P=(0,i.Z)(I,2),F=P[0],w=P[1],q=(0,r.useState)(!0),J=(0,i.Z)(q,2),W=J[0],Y=J[1],$=(0,r.useState)(!0),H=(0,i.Z)($,2),X=H[0],ee=H[1],ne=(0,r.useState)(!0),te=(0,i.Z)(ne,2),ie=te[0],se=te[1],re=(0,r.useState)(!0),oe=(0,i.Z)(re,2),le=oe[0],ae=oe[1],ce=(0,r.useState)(!0),ue=(0,i.Z)(ce,2),de=ue[0],fe=ue[1],xe=(0,r.useState)(!0),pe=(0,i.Z)(xe,2),he=pe[0],me=pe[1],Ze=(0,r.useState)(!1),ve=(0,i.Z)(Ze,2),je=ve[0],ge=ve[1],be=(0,r.useState)(!1),ye=(0,i.Z)(be,2),Ee=ye[0],Te=ye[1],Ce=(0,r.useState)(null),Se=(0,i.Z)(Ce,2),ke=Se[0],_e=Se[1],Ne=(0,r.useState)(!1),Ie=(0,i.Z)(Ne,2),Pe=Ie[0],Fe=Ie[1],Oe=(0,r.useState)(null),we=(0,i.Z)(Oe,2),Le=we[0],Re=we[1],Ue=(0,r.useState)(!1),Be=(0,i.Z)(Ue,2),Ae=Be[0],Ge=Be[1],ze=(0,r.useState)(!1),Me=(0,i.Z)(ze,2),Ke=Me[0],De=Me[1],Ve=(0,r.useState)(!1),Qe=(0,i.Z)(Ve,2),qe=Qe[0],Je=Qe[1],We=a.bucketName||"",Ye="n/a",$e="";null!==f&&(Ye=f.access,$e=f.definition);var He=(0,Z.F)(We,[m.Ft.S3_GET_BUCKET_OBJECT_LOCK_CONFIGURATION]),Xe=(0,Z.F)(We,[m.Ft.ADMIN_GET_BUCKET_QUOTA]);(0,r.useEffect)((function(){se(!!c)}),[c,se]),(0,r.useEffect)((function(){le&&p&&h.Z.invoke("GET","/api/v1/buckets/".concat(We,"/versioning")).then((function(e){ge(e.is_versioned),ae(!1)})).catch((function(e){t((0,B.Ih)(e)),ae(!1)}))}),[le,t,We,p]),(0,r.useEffect)((function(){de&&p&&(Xe?h.Z.invoke("GET","/api/v1/buckets/".concat(We,"/quota")).then((function(e){_e(e),e.quota?Te(!0):Te(!1),fe(!1)})).catch((function(e){t((0,B.Ih)(e)),Te(!1),fe(!1)})):(Te(!1),fe(!1)))}),[de,ae,t,We,p,Xe]),(0,r.useEffect)((function(){le&&p&&(He?h.Z.invoke("GET","/api/v1/buckets/".concat(We,"/object-locking")).then((function(e){N(e.object_locking_enabled),Y(!1)})).catch((function(e){t((0,B.Ih)(e)),Y(!1)})):Y(!1))}),[W,t,We,le,p,He]),(0,r.useEffect)((function(){X&&h.Z.invoke("GET","/api/v1/buckets").then((function(e){var n=x()(e,"buckets",[]).find((function(e){return e.name===We})),t=x()(n,"size","0");ee(!1),C(t)})).catch((function(e){ee(!1),t((0,B.Ih)(e))}))}),[X,t,We]),(0,r.useEffect)((function(){he&&_&&h.Z.invoke("GET","/api/v1/buckets/".concat(We,"/retention")).then((function(e){me(!1),Fe(!0),Re(e)})).catch((function(e){Fe(!1),me(!1),Re(null)}))}),[he,_,We]);var en=function(){t((0,A.d5)(!0)),se(!0),ee(!0),ae(!0),me(!0)};return(0,g.jsxs)(r.Fragment,{children:[Ke&&(0,g.jsx)(V,{open:Ke,selectedBucket:We,enabled:Ee,cfg:ke,closeModalAndRefresh:function(){De(!1),fe(!0)}}),F&&(0,g.jsx)(z,{bucketName:We,open:F,actualPolicy:Ye,actualDefinition:$e,closeModalAndRefresh:function(){w(!1),en()}}),Ae&&(0,g.jsx)(M,{bucketName:We,open:Ae,closeModalAndRefresh:function(){Ge(!1),en()}}),qe&&(0,g.jsx)(K,{closeVersioningModalAndRefresh:function(e){Je(!1),e&&en()},modalOpen:qe,selectedBucket:We,versioningCurrentState:je}),(0,g.jsx)(U.Z,{children:"Summary"}),(0,g.jsxs)(u.ZP,{container:!0,spacing:1,children:[(0,g.jsx)(Z.s,{scopes:[m.Ft.S3_GET_BUCKET_POLICY],resource:We,children:(0,g.jsx)(u.ZP,{item:!0,xs:12,children:(0,g.jsxs)(d.Z,{sx:(0,s.Z)({},Q),children:[(0,g.jsxs)(d.Z,{sx:(0,s.Z)({},Q),children:[(0,g.jsx)(Z.s,{scopes:[m.Ft.S3_GET_BUCKET_POLICY],resource:We,children:(0,g.jsx)(O,{iamScopes:[m.Ft.S3_PUT_BUCKET_POLICY],resourceName:We,property:"Access Policy:",value:Ye.toLowerCase(),onEdit:function(){w(!0)},isLoading:ie})}),(0,g.jsx)(Z.s,{scopes:[m.Ft.S3_GET_BUCKET_OBJECT_LOCK_CONFIGURATION],resource:We,children:(0,g.jsx)(j.Z,{label:"Object Locking:",value:(0,g.jsx)(b,{icon:_?(0,g.jsx)(y.E31,{}):(0,g.jsx)(y.dRf,{}),label:(0,g.jsx)("label",{className:n.textMuted,children:_?"Enabled":"Disabled"})})})}),(0,g.jsx)(d.Z,{className:n.spacerTop,children:(0,g.jsx)(j.Z,{label:"Tags:",value:(0,g.jsx)(D,{bucketName:We})})}),(0,g.jsx)(O,{iamScopes:[m.Ft.ADMIN_SET_BUCKET_QUOTA],resourceName:We,property:"Quota:",value:Ee?"Enabled":"Disabled",onEdit:function(){De(!0)},isLoading:de})]}),(0,g.jsxs)(d.Z,{sx:{display:"grid",gridTemplateColumns:"1fr",alignItems:"flex-start"},children:[(0,g.jsx)(L,{bucketSize:T}),Ee&&ke?(0,g.jsx)(R,{quota:ke}):null]})]})})}),p&&(0,g.jsx)(Z.s,{scopes:[m.Ft.S3_GET_BUCKET_VERSIONING],resource:We,children:(0,g.jsxs)(u.ZP,{item:!0,xs:12,children:[(0,g.jsx)(U.Z,{children:"Versioning"}),(0,g.jsx)(d.Z,{sx:(0,s.Z)({},Q),children:(0,g.jsx)(d.Z,{sx:(0,s.Z)({},Q),children:(0,g.jsx)(O,{iamScopes:[m.Ft.S3_PUT_BUCKET_VERSIONING],resourceName:We,property:"Current Status:",value:je?"Versioned":"Unversioned (Default)",onEdit:function(){Je(!0)},isLoading:le})})})]})}),_&&(0,g.jsx)(Z.s,{scopes:[m.Ft.S3_GET_OBJECT_RETENTION],resource:We,children:(0,g.jsxs)(u.ZP,{item:!0,xs:12,children:[(0,g.jsx)(U.Z,{children:"Retention"}),(0,g.jsxs)(d.Z,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"2fr 1fr"},gridAutoFlow:{xs:"dense",sm:"row"},gap:2},children:[(0,g.jsxs)(d.Z,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"2fr 1fr"},gridAutoFlow:{xs:"dense",sm:"row"},gap:2},children:[(0,g.jsx)(O,{iamScopes:[m.Ft.ADMIN_SET_BUCKET_QUOTA],resourceName:We,property:"Retention:",value:Pe?"Enabled":"Disabled",onEdit:function(){Ge(!0)},isLoading:he}),(0,g.jsx)(j.Z,{label:"Mode:",value:(0,g.jsx)("label",{className:n.textMuted,style:{textTransform:"capitalize"},children:Le&&Le.mode?Le.mode:"-"})}),(0,g.jsx)(j.Z,{label:"Validity:",value:(0,g.jsxs)("label",{className:n.textMuted,style:{textTransform:"capitalize"},children:[Le&&Le.validity," ",Le&&(1===Le.validity?Le.unit.slice(0,-1):Le.unit)]})})]}),(0,g.jsx)(d.Z,{sx:{display:"grid",gridTemplateColumns:"1fr",alignItems:"flex-start"}})]})]})})]})]})}))},45902:function(e,n,t){var i=t(1413),s=(t(72791),t(53767)),r=t(80184);n.Z=function(e){var n=e.label,t=void 0===n?null:n,o=e.value,l=void 0===o?"-":o,a=e.orientation,c=void 0===a?"column":a,u=e.stkProps,d=void 0===u?{}:u,f=e.lblProps,x=void 0===f?{}:f,p=e.valProps,h=void 0===p?{}:p;return(0,r.jsxs)(s.Z,(0,i.Z)((0,i.Z)({direction:{xs:"column",sm:c}},d),{},{children:[(0,r.jsx)("label",(0,i.Z)((0,i.Z)({style:{marginRight:5,fontWeight:600}},x),{},{children:t})),(0,r.jsx)("label",(0,i.Z)((0,i.Z)({style:{marginRight:5,fontWeight:500}},h),{},{children:l}))]}))}},53767:function(e,n,t){var i=t(4942),s=t(63366),r=t(87462),o=t(72791),l=t(51184),a=t(45682),c=t(78519),u=t(82466),d=t(66934),f=t(31402),x=t(80184),p=["component","direction","spacing","divider","children"];function h(e,n){var t=o.Children.toArray(e).filter(Boolean);return t.reduce((function(e,i,s){return e.push(i),s<t.length-1&&e.push(o.cloneElement(n,{key:"separator-".concat(s)})),e}),[])}var m=(0,d.ZP)("div",{name:"MuiStack",slot:"Root",overridesResolver:function(e,n){return[n.root]}})((function(e){var n=e.ownerState,t=e.theme,s=(0,r.Z)({display:"flex"},(0,l.k9)({theme:t},(0,l.P$)({values:n.direction,breakpoints:t.breakpoints.values}),(function(e){return{flexDirection:e}})));if(n.spacing){var o=(0,a.hB)(t),c=Object.keys(t.breakpoints.values).reduce((function(e,t){return null==n.spacing[t]&&null==n.direction[t]||(e[t]=!0),e}),{}),d=(0,l.P$)({values:n.direction,base:c}),f=(0,l.P$)({values:n.spacing,base:c});s=(0,u.Z)(s,(0,l.k9)({theme:t},f,(function(e,t){return{"& > :not(style) + :not(style)":(0,i.Z)({margin:0},"margin".concat((s=t?d[t]:n.direction,{row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"}[s])),(0,a.NA)(o,e))};var s})))}return s})),Z=o.forwardRef((function(e,n){var t=(0,f.Z)({props:e,name:"MuiStack"}),i=(0,c.Z)(t),o=i.component,l=void 0===o?"div":o,a=i.direction,u=void 0===a?"column":a,d=i.spacing,Z=void 0===d?0:d,v=i.divider,j=i.children,g=(0,s.Z)(i,p),b={direction:u,spacing:Z};return(0,x.jsx)(m,(0,r.Z)({as:l,ownerState:b,ref:n},g,{children:v?h(j,v):j}))}));n.Z=Z}}]);
//# sourceMappingURL=3328.74f03e29.chunk.js.map