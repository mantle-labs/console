"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[343],{24065:function(e,n,t){t.r(n),t.d(n,{default:function(){return V}});var s=t(29439),o=t(1413),c=t(72791),r=t(60364),a=t(16871),l=t(11135),i=t(61889),u=t(81207),d=t(64554),x=t(75900),Z=t(92983),f=t(21639),h=t(32291),p=t(23814),m=t(25787),j=t(56028),v=t(21435),_=t(36151),g=t(40986),w=t(3579),y=t(20165),S=t(87995),C=t(25469),b=t(33168),A=t(80184),P=(0,m.Z)((function(e){return(0,l.Z)((0,o.Z)((0,o.Z)((0,o.Z)((0,o.Z)({},p.ID),p.DF),p.bK),(0,p.Bz)(e.spacing(4))))}))((function(e){var n=e.classes,t=e.open,o=e.closeModal,r=(0,C.TL)(),a=(0,b.$)().t,l=(0,c.useState)(""),d=(0,s.Z)(l,2),Z=d[0],f=d[1],h=(0,c.useState)(""),p=(0,s.Z)(h,2),m=p[0],P=p[1],k=(0,c.useState)(""),F=(0,s.Z)(k,2),I=F[0],N=F[1],R=(0,c.useState)(!1),T=(0,s.Z)(R,2),D=T[0],E=T[1],M=(0,c.useState)(!1),z=(0,s.Z)(M,2),L=z[0],O=z[1],B=localStorage.getItem("userLoggedIn")||"";return t?(0,A.jsxs)(j.Z,{title:"Change Password for ".concat(B),modalOpen:t,onClose:function(){P(""),N(""),f(""),o()},titleIcon:(0,A.jsx)(x.IaT,{}),children:[(0,A.jsx)("div",{children:a("new_password_write_down")}),(0,A.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){!function(e){if(e.preventDefault(),m===I){if(m.length<8)r((0,S.zb)({errorMessage:a("password_not_long_enough"),detailedError:""}));else if(!D){E(!0);var n={current_secret_key:Z,new_secret_key:m};u.Z.invoke("POST","/api/v1/account/change-password",n).then((function(){E(!1),P(""),N(""),f(""),o()})).catch((function(e){E(!1),P(""),N(""),f(""),r((0,S.zb)(e))}))}}else r((0,S.zb)({errorMessage:a("new_password_dont_match"),detailedError:""}))}(e)},children:(0,A.jsxs)(i.ZP,{container:!0,children:[(0,A.jsxs)(i.ZP,{item:!0,xs:12,className:n.modalFormScrollable,children:[(0,A.jsx)(i.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,A.jsx)(v.Z,{id:"current-password",name:"current-password",onChange:function(e){f(e.target.value)},label:a("current_password"),type:L?"text":"password",value:Z,overlayAction:function(){return O(!L)},overlayIcon:L?(0,A.jsx)(y.Z,{}):(0,A.jsx)(w.Z,{})})}),(0,A.jsx)(i.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,A.jsx)(v.Z,{id:"new-password",name:"new-password",onChange:function(e){P(e.target.value)},label:a("new_password"),type:L?"text":"password",value:m,overlayAction:function(){return O(!L)},overlayIcon:L?(0,A.jsx)(y.Z,{}):(0,A.jsx)(w.Z,{})})}),(0,A.jsx)(i.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,A.jsx)(v.Z,{id:"re-new-password",name:"re-new-password",onChange:function(e){N(e.target.value)},label:a("type_new_password_again"),type:L?"text":"password",value:I,overlayAction:function(){return O(!L)},overlayIcon:L?(0,A.jsx)(y.Z,{}):(0,A.jsx)(w.Z,{})})})]}),(0,A.jsx)(i.ZP,{item:!0,xs:12,className:n.modalButtonBar,children:(0,A.jsx)(_.Z,{type:"submit",variant:"contained",color:"primary",disabled:D||!(Z.length>0&&m.length>0&&I.length>0),children:"Save"})}),D&&(0,A.jsx)(i.ZP,{item:!0,xs:12,children:(0,A.jsx)(g.Z,{})})]})})]}):null})),k=t(23804),F=t(74794),I=t(59114),N=t(75578),R=t(56087),T=t(38442),D=t(40603),E=t(58493),M=t(18303),z=t(14048),L=t(72455),O=t(46078),B=(0,N.Z)(c.lazy((function(){return t.e(3956).then(t.bind(t,23956))}))),K=(0,L.Z)((function(e){return(0,l.Z)((0,o.Z)((0,o.Z)((0,o.Z)((0,o.Z)({},p.OR),p.qg),{},{searchField:(0,o.Z)((0,o.Z)({},p.qg.searchField),{},{marginRight:"auto",maxWidth:380})},p.VX),(0,p.Bz)(e.spacing(4))))})),V=function(){var e=(0,C.TL)(),n=(0,a.s0)(),t=(0,b.$)().t,o=K(),l=(0,r.v9)(O.$4),p=(0,c.useState)([]),m=(0,s.Z)(p,2),j=m[0],v=m[1],_=(0,c.useState)(!1),g=(0,s.Z)(_,2),w=g[0],y=g[1],N=(0,c.useState)(""),L=(0,s.Z)(N,2),V=L[0],$=L[1],q=(0,c.useState)(!1),U=(0,s.Z)(q,2),G=U[0],J=U[1],W=(0,c.useState)(null),X=(0,s.Z)(W,2),H=X[0],Q=X[1],Y=(0,c.useState)(!1),ee=(0,s.Z)(Y,2),ne=ee[0],te=ee[1],se=(0,c.useState)([]),oe=(0,s.Z)(se,2),ce=oe[0],re=oe[1],ae=(0,c.useState)(!1),le=(0,s.Z)(ae,2),ie=le[0],ue=le[1],de=(0,c.useState)(!1),xe=(0,s.Z)(de,2),Ze=xe[0],fe=xe[1],he=l&&l.includes("external-idp")||!1;(0,c.useEffect)((function(){pe()}),[]),(0,c.useEffect)((function(){w&&u.Z.invoke("GET","/api/v1/service-accounts").then((function(e){var n=e.sort(f.V2);y(!1),v(n)})).catch((function(n){e((0,S.Ih)(n)),y(!1)}))}),[w,y,v,e]);var pe=function(){y(!0)},me=[{type:"view",onClick:function(e){Q(e),fe(!0)}},{type:"delete",onClick:function(e){Q(e),J(!0)}}],je=j.filter((function(e){return e.toLowerCase().includes(V.toLowerCase())}));return(0,A.jsxs)(c.Fragment,{children:[G&&(0,A.jsx)(B,{deleteOpen:G,selectedServiceAccount:H,closeDeleteModalAndRefresh:function(e){!function(e){J(!1),e&&pe()}(e)}}),ie&&(0,A.jsx)(M.Z,{deleteOpen:ie,selectedSAs:ce,closeDeleteModalAndRefresh:function(n){ue(!1),n&&(e((0,S.y1)(t("delete_service_account_successful"))),re([]),y(!0))}}),Ze&&(0,A.jsx)(z.Z,{open:Ze,selectedAccessKey:H,closeModalAndRefresh:function(){fe(!1),y(!0)}}),(0,A.jsx)(P,{open:ne,closeModal:function(){return te(!1)}}),(0,A.jsx)(h.Z,{label:t("service_accounts")}),(0,A.jsxs)(F.Z,{children:[(0,A.jsxs)(i.ZP,{item:!0,xs:12,className:o.actionsTray,children:[(0,A.jsx)(I.Z,{placeholder:t("search_service_accounts"),onChange:$,overrideClass:o.searchField,value:V}),(0,A.jsxs)(d.Z,{sx:{display:"flex"},children:[" ",(0,A.jsx)(D.Z,{tooltip:t("delete_selected"),onClick:function(){ue(!0)},text:t("delete_selected"),icon:(0,A.jsx)(x.pJl,{}),color:"secondary",disabled:0===ce.length,variant:"outlined"}),(0,A.jsx)(T.s,{scopes:[R.Ft.ADMIN_CREATE_USER],resource:R.C3,matchAll:!0,errorProps:{disabled:!0},children:(0,A.jsx)(D.Z,{onClick:function(){return te(!0)},text:t("change_password"),icon:(0,A.jsx)(x.tvm,{}),color:"primary",variant:"outlined",disabled:he})}),(0,A.jsx)(D.Z,{onClick:function(e){n("".concat(R.gA.ACCOUNT_ADD))},text:t("create_service_account"),icon:(0,A.jsx)(x.dtP,{}),color:"primary",variant:"contained"})]})]}),(0,A.jsx)(i.ZP,{item:!0,xs:12,className:o.tableBlock,children:(0,A.jsx)(Z.Z,{isLoading:w,records:je,entityName:t("service_account"),idField:"",columns:[{label:t("service_account"),elementKey:""}],itemActions:me,selectedItems:ce,onSelect:function(e){return(0,E._0)(e,re,ce)},onSelectAll:function(){ce.length!==j.length?re(j):re([])}})}),(0,A.jsx)(i.ZP,{item:!0,xs:12,marginTop:"15px",children:(0,A.jsx)(k.Z,{title:t("service_accounts_learn_more"),iconComponent:(0,A.jsx)(x.frP,{}),help:(0,A.jsxs)(c.Fragment,{children:[t("service_accounts_info"),(0,A.jsx)("br",{})]})})})]})]})}}}]);
//# sourceMappingURL=343.0d168f78.chunk.js.map