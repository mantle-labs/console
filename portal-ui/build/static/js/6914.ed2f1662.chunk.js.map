{"version":3,"file":"static/js/6914.ed2f1662.chunk.js","mappings":"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","sources":["screens/LoginPage/LoginCallback.tsx","../node_modules/@mui/icons-material/ErrorOutline.js"],"sourcesContent":["// This file is part of MinIO Console Server\r\n// Copyright (c) 2021 MinIO, Inc.\r\n//\r\n// This program is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU Affero General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// This program is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU Affero General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU Affero General Public License\r\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\nimport React, { useEffect, useState } from \"react\"; // eslint-disable-line @typescript-eslint/no-unused-vars\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport api from \"../../common/api\";\r\nimport withStyles from \"@mui/styles/withStyles\";\r\nimport { Theme } from \"@mui/material/styles\";\r\nimport createStyles from \"@mui/styles/createStyles\";\r\nimport { baseUrl } from \"../../history\";\r\nimport { Paper } from \"@mui/material\";\r\nimport Grid from \"@mui/material/Grid\";\r\nimport Typography from \"@mui/material/Typography\";\r\nimport Button from \"@mui/material/Button\";\r\nimport ErrorOutlineIcon from \"@mui/icons-material/ErrorOutline\";\r\n\r\nconst styles = (theme: Theme) =>\r\n  createStyles({\r\n    paper: {\r\n      borderRadius: 8,\r\n      display: \"flex\",\r\n      flexDirection: \"column\",\r\n      alignItems: \"center\",\r\n      width: 800,\r\n      height: 424,\r\n      margin: \"auto\",\r\n      position: \"absolute\",\r\n      top: \"50%\",\r\n      left: \"50%\",\r\n      marginLeft: -400,\r\n      marginTop: -212,\r\n      \"&.MuiPaper-root\": {\r\n        borderRadius: 8,\r\n      },\r\n    },\r\n    submit: {\r\n      margin: \"30px 0px 16px\",\r\n      height: 40,\r\n      boxShadow: \"none\",\r\n      padding: \"16px 30px\",\r\n    },\r\n    mainContainer: {\r\n      position: \"relative\",\r\n      height: 424,\r\n    },\r\n    theOcean: {\r\n      borderTopLeftRadius: 8,\r\n      borderBottomLeftRadius: 8,\r\n      background:\r\n        \"transparent linear-gradient(to bottom, #073052 0%,#05122b 100%); 0% 0% no-repeat padding-box;\",\r\n    },\r\n    oceanBg: {\r\n      backgroundImage: \"url(/images/BG_Illustration.svg)\",\r\n      backgroundRepeat: \"no-repeat\",\r\n      backgroundPosition: \"bottom left\",\r\n      height: \"100%\",\r\n      width: 324,\r\n    },\r\n    theLogin: {\r\n      padding: \"40px 45px 20px 45px\",\r\n    },\r\n    extraDetailsContainer: {\r\n      fontStyle: \"italic\",\r\n      color: \"#9C9C9C\",\r\n      transition: \"all .2s ease-in-out\",\r\n      padding: \"0 5px\",\r\n      marginTop: 5,\r\n      overflow: \"auto\",\r\n    },\r\n    errorLabel: {\r\n      color: \"#000\",\r\n      fontSize: 18,\r\n      fontWeight: 500,\r\n      marginLeft: 5,\r\n    },\r\n    simpleError: {\r\n      marginTop: 5,\r\n      padding: \"2px 5px\",\r\n      fontSize: 16,\r\n      color: \"#000\",\r\n    },\r\n    messageIcon: {\r\n      color: \"#C72C48\",\r\n      display: \"flex\",\r\n      \"& svg\": {\r\n        width: 32,\r\n        height: 32,\r\n      },\r\n    },\r\n    errorTitle: {\r\n      display: \"flex\",\r\n      alignItems: \"center\",\r\n    },\r\n  });\r\n\r\ninterface ILoginCallBackProps {\r\n  classes: any;\r\n}\r\n\r\nconst LoginCallback = ({ classes }: ILoginCallBackProps) => {\r\n  const navigate = useNavigate();\r\n\r\n  const [error, setError] = useState<string>(\"\");\r\n  const [errorDescription, setErrorDescription] = useState<string>(\"\");\r\n  const [loading, setLoading] = useState<boolean>(true);\r\n\r\n  useEffect(() => {\r\n    if (loading) {\r\n      const queryString = window.location.search;\r\n      const urlParams = new URLSearchParams(queryString);\r\n      const code = urlParams.get(\"code\");\r\n      const state = urlParams.get(\"state\");\r\n      const error = urlParams.get(\"error\");\r\n      const errorDescription = urlParams.get(\"errorDescription\");\r\n      if (error || errorDescription) {\r\n        setError(error || \"\");\r\n        setErrorDescription(errorDescription || \"\");\r\n        setLoading(false);\r\n      } else {\r\n        api\r\n          .invoke(\"POST\", \"/api/v1/login/oauth2/auth\", { code, state })\r\n          .then(() => {\r\n            // We push to history the new URL.\r\n            let targetPath = \"/\";\r\n            if (\r\n              localStorage.getItem(\"redirect-path\") &&\r\n              localStorage.getItem(\"redirect-path\") !== \"\"\r\n            ) {\r\n              targetPath = `${localStorage.getItem(\"redirect-path\")}`;\r\n              localStorage.setItem(\"redirect-path\", \"\");\r\n            }\r\n            setLoading(false);\r\n            navigate(targetPath);\r\n          })\r\n          .catch((error) => {\r\n            setError(error.errorMessage);\r\n            setErrorDescription(error.detailedError);\r\n            setLoading(false);\r\n          });\r\n      }\r\n    }\r\n  }, [loading, navigate]);\r\n  return error !== \"\" || errorDescription !== \"\" ? (\r\n    <React.Fragment>\r\n      <Paper className={classes.paper}>\r\n        <Grid container className={classes.mainContainer}>\r\n          <Grid item xs={7} className={classes.theOcean}>\r\n            <div className={classes.oceanBg} />\r\n          </Grid>\r\n          <Grid item xs={5} className={classes.theLogin}>\r\n            <div className={classes.errorTitle}>\r\n              <span className={classes.messageIcon}>\r\n                <ErrorOutlineIcon />\r\n              </span>\r\n              <span className={classes.errorLabel}>Error from IDP</span>\r\n            </div>\r\n            <div className={classes.simpleError}>{error}</div>\r\n            <Typography\r\n              variant=\"body1\"\r\n              gutterBottom\r\n              component=\"div\"\r\n              className={classes.extraDetailsContainer}\r\n            >\r\n              {errorDescription}\r\n            </Typography>\r\n            <Button\r\n              component={\"a\"}\r\n              href={`${baseUrl}login`}\r\n              type=\"submit\"\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              className={classes.submit}\r\n            >\r\n              Back to Login\r\n            </Button>\r\n          </Grid>\r\n        </Grid>\r\n      </Paper>\r\n    </React.Fragment>\r\n  ) : null;\r\n};\r\n\r\nexport default withStyles(styles)(LoginCallback);\r\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z\"\n}), 'ErrorOutline');\n\nexports.default = _default;"],"names":["withStyles","theme","createStyles","paper","borderRadius","display","flexDirection","alignItems","width","height","margin","position","top","left","marginLeft","marginTop","submit","boxShadow","padding","mainContainer","theOcean","borderTopLeftRadius","borderBottomLeftRadius","background","oceanBg","backgroundImage","backgroundRepeat","backgroundPosition","theLogin","extraDetailsContainer","fontStyle","color","transition","overflow","errorLabel","fontSize","fontWeight","simpleError","messageIcon","errorTitle","classes","navigate","useNavigate","useState","error","setError","errorDescription","setErrorDescription","loading","setLoading","useEffect","queryString","window","location","search","urlParams","URLSearchParams","code","get","state","api","then","targetPath","localStorage","getItem","setItem","catch","errorMessage","detailedError","className","container","item","xs","variant","gutterBottom","component","href","baseUrl","type","_interopRequireDefault","require","exports","_createSvgIcon","_jsxRuntime","_default","default","jsx","d"],"sourceRoot":""}