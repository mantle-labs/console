"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[9134],{64163:function(e,n,t){var i=t(1413),l=t(72791),s=t(61889),c=t(11135),o=t(25787),a=t(23814),r=t(80184);n.Z=(0,o.Z)((function(e){return(0,c.Z)((0,i.Z)({},a.xx))}))((function(e){var n=e.classes,t=e.label,i=void 0===t?"":t,c=e.content,o=e.multiLine,a=void 0!==o&&o,u=e.actionButton;return(0,r.jsx)(l.Fragment,{children:(0,r.jsxs)(s.ZP,{className:n.prefinedContainer,children:[""!==i&&(0,r.jsx)(s.ZP,{item:!0,xs:12,className:n.predefinedTitle,children:i}),(0,r.jsxs)(s.ZP,{item:!0,xs:12,className:"".concat(n.predefinedList," ").concat(u?n.includesActionButton:""),children:[(0,r.jsx)(s.ZP,{item:!0,xs:12,className:a?n.innerContentMultiline:n.innerContent,children:c}),u&&(0,r.jsx)("div",{className:n.overlayShareOption,children:u})]})]})})}))},56028:function(e,n,t){var i=t(29439),l=t(1413),s=t(72791),c=t(60364),o=t(13400),a=t(55646),r=t(5574),u=t(65661),d=t(39157),m=t(11135),f=t(25787),Z=t(23814),h=t(25469),x=t(29823),p=t(28057),v=t(87995),g=t(80184);n.Z=(0,f.Z)((function(e){return(0,m.Z)((0,l.Z)((0,l.Z)({},Z.Qw),{},{content:{padding:25,paddingBottom:0},customDialogSize:{width:"100%",maxWidth:765}},Z.sN))}))((function(e){var n=e.onClose,t=e.modalOpen,m=e.title,f=e.children,Z=e.classes,j=e.wideLimit,b=void 0===j||j,k=e.noContentPadding,y=e.titleIcon,P=void 0===y?null:y,N=(0,h.TL)(),B=(0,s.useState)(!1),C=(0,i.Z)(B,2),S=C[0],T=C[1],E=(0,c.v9)((function(e){return e.system.modalSnackBar}));(0,s.useEffect)((function(){N((0,v.MK)(""))}),[N]),(0,s.useEffect)((function(){if(E){if(""===E.message)return void T(!1);"error"!==E.type&&T(!0)}}),[E]);var L=b?{classes:{paper:Z.customDialogSize}}:{maxWidth:"lg",fullWidth:!0},M="";return E&&(M=E.detailedErrorMsg,(""===E.detailedErrorMsg||E.detailedErrorMsg.length<5)&&(M=E.message)),(0,g.jsxs)(r.Z,(0,l.Z)((0,l.Z)({open:t,classes:Z},L),{},{scroll:"paper",onClose:function(e,t){"backdropClick"!==t&&n()},className:Z.root,children:[(0,g.jsxs)(u.Z,{className:Z.title,style:{zIndex:1},children:[(0,g.jsxs)("div",{className:Z.titleText,children:[P," ",m]}),(0,g.jsx)("div",{className:Z.closeContainer,children:(0,g.jsx)(o.Z,{"aria-label":"close",id:"close",className:Z.closeButton,onClick:n,disableRipple:!0,size:"small",children:(0,g.jsx)(x.Z,{})})})]}),(0,g.jsx)(p.Z,{isModal:!0}),(0,g.jsx)(a.Z,{open:S,className:Z.snackBarModal,onClose:function(){T(!1),N((0,v.MK)(""))},message:M,ContentProps:{className:"".concat(Z.snackBar," ").concat(E&&"error"===E.type?Z.errorSnackBar:"")},autoHideDuration:E&&"error"===E.type?1e4:5e3}),(0,g.jsx)(d.Z,{className:k?"":Z.content,children:f})]}))}))},58400:function(e,n,t){var i=t(93433),l=t(29439),s=t(1413),c=t(72791),o=t(11135),a=t(25787),r=t(40986),u=t(61889),d=t(21639),m=t(23814),f=t(81207),Z=t(92983),h=t(59114),x=t(87995),p=t(25469),v=t(74616),g=t(60364),j=t(33168),b=t(80184);n.Z=(0,a.Z)((function(e){return(0,o.Z)((0,s.Z)((0,s.Z)((0,s.Z)((0,s.Z)({noFound:{textAlign:"center",padding:"10px 0"},searchBox:{flex:1},fieldLabel:{fontWeight:400,width:160,marginRight:10},tableBlock:(0,s.Z)({},m.VX.tableBlock),filterBox:{display:"flex",marginBottom:15,alignItems:"center","& span":{fontSize:14}}},m.qg),m.VX),m.OR),m.jY))}))((function(e){var n=e.classes,t=(e.selectedPolicy,(0,j.$)().t),s=(0,p.TL)(),o=(0,c.useState)([]),a=(0,l.Z)(o,2),m=a[0],k=a[1],y=(0,c.useState)(!1),P=(0,l.Z)(y,2),N=P[0],B=P[1],C=(0,c.useState)(""),S=(0,l.Z)(C,2),T=S[0],E=S[1],L=(0,g.v9)((function(e){return e.createUser.selectedPolicies})),M=(0,c.useCallback)((function(){B(!0),f.Z.invoke("GET","/api/v1/policies?limit=1000").then((function(e){var n=null===e.policies?[]:e.policies;B(!1),k(n.sort(d.g4))})).catch((function(e){B(!1),s((0,x.zb)(e))}))}),[s]);(0,c.useEffect)((function(){B(!0)}),[]),(0,c.useEffect)((function(){N&&M()}),[N,M]);var _=m.filter((function(e){return e.name.includes(T)}));return(0,b.jsx)(u.ZP,{container:!0,children:(0,b.jsxs)(u.ZP,{item:!0,xs:12,children:[N&&(0,b.jsx)(r.Z,{}),m.length>0?(0,b.jsxs)(c.Fragment,{children:[(0,b.jsxs)(u.ZP,{item:!0,xs:12,className:n.filterBox,children:[(0,b.jsx)("span",{className:n.fieldLabel,children:t("assign_policies")}),(0,b.jsx)("div",{className:n.searchBox,children:(0,b.jsx)(h.Z,{placeholder:t("policy_search_placeholder"),onChange:function(e){E(e)},value:T})})]}),(0,b.jsx)(u.ZP,{item:!0,xs:12,className:n.tableBlock,style:{paddingBottom:16},children:(0,b.jsx)(Z.Z,{columns:[{label:t("policy"),elementKey:"name"}],onSelect:function(e){var n=e.target,t=n.value,l=n.checked,c=(0,i.Z)(L);l?c.push(t):c=c.filter((function(e){return e!==t})),c=c.filter((function(e){return""!==e})),s((0,v.ue)(c))},selectedItems:L,isLoading:N,records:_,entityName:"Policies",idField:"name",customPaperHeight:n.multiSelectTable})})]}):(0,b.jsx)("div",{className:n.noFound,children:t("no_policies_available")})]})})}))},39134:function(e,n,t){t.r(n);var i=t(29439),l=t(1413),s=t(72791),c=t(26181),o=t.n(c),a=t(11135),r=t(25787),u=t(36151),d=t(40986),m=t(61889),f=t(23814),Z=t(56028),h=t(81207),x=t(58400),p=t(64163),v=t(87995),g=t(25469),j=t(33168),b=t(60364),k=t(74616),y=t(80184);n.default=(0,r.Z)((function(e){return(0,a.Z)((0,l.Z)((0,l.Z)((0,l.Z)({},f.oO),f.bK),{},{tableBlock:(0,l.Z)((0,l.Z)({},f.VX.tableBlock),{},{marginTop:15}),buttonContainer:{textAlign:"right",marginTop:".9rem"}}))}))((function(e){var n=e.classes,t=e.closeModalAndRefresh,l=e.selectedUser,c=e.selectedGroups,a=e.open,r=(0,g.TL)(),f=(0,j.$)().t,P=(0,s.useState)(!1),N=(0,i.Z)(P,2),B=N[0],C=N[1],S=(0,s.useState)([]),T=(0,i.Z)(S,2),E=T[0],L=T[1],M=(0,s.useState)([]),_=(0,i.Z)(M,2),z=_[0],w=_[1],F=(0,b.v9)((function(e){return e.createUser.selectedPolicies}));(0,s.useEffect)((function(){if(a){if(1===(null===c||void 0===c?void 0:c.length))return void(1===(null===c||void 0===c?void 0:c.length)&&h.Z.invoke("GET","/api/v1/group?name=".concat(c[0])).then((function(e){var n=o()(e,"policy","");L(n.split(",")),w(n.split(",")),r((0,k.ue)(n.split(",")))})).catch((function(e){r((0,v.zb)(e)),C(!1)})));var e=o()(l,"policy",[]);L(e),w(e),r((0,k.ue)(e))}}),[a,null===c||void 0===c?void 0:c.length,l]);var K=o()(l,"accessKey","");return(0,y.jsxs)(Z.Z,{onClose:function(){t()},modalOpen:a,title:"Set Policies",children:[(0,y.jsxs)(m.ZP,{container:!0,children:[(1===(null===c||void 0===c?void 0:c.length)||null!=l)&&(0,y.jsxs)(s.Fragment,{children:[(0,y.jsx)(m.ZP,{item:!0,xs:12,children:(0,y.jsx)(p.Z,{label:"".concat(f("selected")," ").concat(f(null!==c?"group":"user")),content:null!==c?c[0]:K})}),(0,y.jsx)(m.ZP,{item:!0,xs:12,children:(0,y.jsx)(p.Z,{label:f("current_policy"),content:E.join(", ")})})]}),c&&(null===c||void 0===c?void 0:c.length)>1&&(0,y.jsx)(p.Z,{label:f("selected_group"),content:c.join(", ")}),(0,y.jsx)(m.ZP,{item:!0,xs:12,children:(0,y.jsx)("div",{className:n.tableBlock,children:(0,y.jsx)(x.Z,{selectedPolicy:z})})})]}),(0,y.jsxs)(m.ZP,{item:!0,xs:12,className:n.buttonContainer,children:[(0,y.jsx)(u.Z,{type:"button",variant:"outlined",color:"primary",className:n.spacerRight,onClick:function(){w(E),r((0,k.ue)(E))},children:"Reset"}),(0,y.jsx)(u.Z,{type:"button",variant:"contained",color:"primary",disabled:B,onClick:function(){var e=null,n=null;null!==c?n=c:null!==l&&(e=[l.accessKey]||0),C(!0),h.Z.invoke("PUT","/api/v1/set-policy-multi",{name:F,groups:n,users:e}).then((function(){C(!1),t()})).catch((function(e){C(!1),r((0,v.zb)(e))}))},children:"Save"})]}),B&&(0,y.jsx)(m.ZP,{item:!0,xs:12,children:(0,y.jsx)(d.Z,{})})]})}))}}]);
//# sourceMappingURL=9134.c2cfbff3.chunk.js.map