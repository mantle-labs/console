"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[3328],{63328:function(e,n,t){t.r(n),t.d(n,{default:function(){return V}});var i=t(29439),s=t(1413),r=t(72791),o=t(60364),l=t(16871),a=t(11135),c=t(25787),u=t(61889),d=t(64554),f=t(26181),x=t.n(f),p=t(23814),h=t(81207),m=t(56087),v=t(38442),Z=t(75578),j=t(45902),g=t(80184),b=function(e){var n=e.icon,t=void 0===n?null:n,i=e.label,s=void 0===i?null:i;return(0,g.jsxs)(d.Z,{sx:{display:"flex"},children:[(0,g.jsx)("div",{style:{height:16,width:16,display:"flex",alignItems:"center",marginTop:5},children:t}),(0,g.jsx)("div",{style:{marginLeft:t?5:"none"},children:s})]})},y=t(49324),C=t(45987),T=t(36151),k=t(72401),E=["isLoading","onClick","label"],S=function(e){var n=e.isLoading,t=e.onClick,i=e.label,r=(0,C.Z)(e,E);return(0,g.jsx)(T.Z,(0,s.Z)((0,s.Z)({color:"primary",onClick:t,variant:"text",sx:{padding:0,margin:0,alignItems:"flex-start",justifyContent:"flex-start",display:"inline-flex",height:"auto",textDecoration:"underline",color:"#2781B0","&:hover":{background:"#ffffff",textDecoration:"underline"}},disableRipple:!0,disableFocusRipple:!0},r),{},{children:n?(0,g.jsx)(k.Z,{style:{width:16,height:16}}):i}))},_=t(13400),N=t(33548),I=["disabled","onClick"],P=(0,c.Z)((function(e){return(0,a.Z)({root:{"&:hover":{backgroundColor:"#E2E2E2"}}})}))((function(e){var n=e.disabled,t=e.onClick,i=(0,C.Z)(e,I);return(0,g.jsx)(_.Z,(0,s.Z)((0,s.Z)({size:"small",disabled:n,onClick:t},i),{},{children:(0,g.jsx)(N.Z,{})}))})),F=function(e){var n=e.resourceName,t=e.iamScopes,i=e.secureCmpProps,r=void 0===i?{}:i,o=e.children;return(0,g.jsx)(v.s,(0,s.Z)((0,s.Z)({scopes:t,resource:n,errorProps:{disabled:!0}},r),{},{children:o}))},w=function(e){var n=e.isLoading,t=void 0===n||n,i=e.resourceName,s=void 0===i?"":i,r=e.iamScopes,o=e.secureCmpProps,l=void 0===o?{}:o,a=e.property,c=void 0===a?null:a,u=e.value,f=void 0===u?null:u,x=e.onEdit;return(0,g.jsxs)(d.Z,{sx:{display:"flex",alignItems:"baseline",justifyContent:"flex-start"},children:[(0,g.jsx)(j.Z,{label:c,value:(0,g.jsx)(F,{resourceName:s,iamScopes:r,secureCmpProps:l,children:(0,g.jsx)(S,{isLoading:t,onClick:x,label:f})})}),(0,g.jsx)(F,{resourceName:s,iamScopes:r,secureCmpProps:l,children:(0,g.jsx)(P,{onClick:x,sx:{background:"#f8f8f8",marginLeft:"3px",top:3,"& .min-icon":{width:"16px",height:"16px"}}})})]})},O=t(45248),L=function(e){var n=e.bucketSize;return(0,g.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center","& .min-icon":{height:37,width:37}},children:[(0,g.jsx)(y.Mhr,{}),(0,g.jsxs)(d.Z,{sx:{display:"flex",alignItems:"flex-start",justifyContent:"center",flexFlow:"column",marginLeft:"20px",fontSize:"19px"},children:[(0,g.jsx)("label",{style:{fontWeight:600},children:"Reported Usage:"}),(0,g.jsx)("label",{children:(0,O.ae)(n)})]})]})},B=function(e){var n=e.quota;return(0,g.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center","& .min-icon":{height:37,width:37}},children:[(0,g.jsx)(y.sjJ,{}),(0,g.jsxs)(d.Z,{sx:{display:"flex",alignItems:"flex-start",justifyContent:"center",flexFlow:"column",marginLeft:"20px",fontSize:"19px"},children:[(0,g.jsxs)("label",{style:{fontWeight:600,textTransform:"capitalize"},children:[null===n||void 0===n?void 0:n.type," Quota"]}),(0,g.jsxs)("label",{children:[" ",(0,O.ae)("".concat(null===n||void 0===n?void 0:n.quota),!0)]})]})]})},R=t(50896),U=t(87995),A=t(9859),G=t(25469),z=t(33168),M=(0,Z.Z)(r.lazy((function(){return Promise.all([t.e(5958),t.e(9682)]).then(t.bind(t,33690))}))),K=(0,Z.Z)(r.lazy((function(){return t.e(1604).then(t.bind(t,1604))}))),D=(0,Z.Z)(r.lazy((function(){return t.e(402).then(t.bind(t,70402))}))),q=(0,Z.Z)(r.lazy((function(){return Promise.all([t.e(1918),t.e(1705)]).then(t.bind(t,71705))}))),Q=(0,Z.Z)(r.lazy((function(){return t.e(1581).then(t.bind(t,1581))}))),J={display:"grid",gridTemplateColumns:{xs:"1fr",sm:"2fr 1fr"},gridAutoFlow:{xs:"dense",sm:"row"},gap:2},V=(0,c.Z)((function(e){return(0,a.Z)((0,s.Z)((0,s.Z)({},p.bK),p.VI))}))((function(e){var n=e.classes,t=(0,G.TL)(),a=(0,z.$)().t,c=(0,l.UO)(),f=(0,o.v9)(A.HQ),p=(0,o.v9)(A.G6),Z=(0,o.v9)(U.N5),C=(0,r.useState)("0"),T=(0,i.Z)(C,2),k=T[0],E=T[1],S=(0,r.useState)(!1),_=(0,i.Z)(S,2),N=_[0],I=_[1],P=(0,r.useState)(!1),F=(0,i.Z)(P,2),O=F[0],V=F[1],W=(0,r.useState)(!0),$=(0,i.Z)(W,2),Y=$[0],H=$[1],X=(0,r.useState)(!0),ee=(0,i.Z)(X,2),ne=ee[0],te=ee[1],ie=(0,r.useState)(!0),se=(0,i.Z)(ie,2),re=se[0],oe=se[1],le=(0,r.useState)(!0),ae=(0,i.Z)(le,2),ce=ae[0],ue=ae[1],de=(0,r.useState)(!0),fe=(0,i.Z)(de,2),xe=fe[0],pe=fe[1],he=(0,r.useState)(!0),me=(0,i.Z)(he,2),ve=me[0],Ze=me[1],je=(0,r.useState)(!1),ge=(0,i.Z)(je,2),be=ge[0],ye=ge[1],Ce=(0,r.useState)(!1),Te=(0,i.Z)(Ce,2),ke=Te[0],Ee=Te[1],Se=(0,r.useState)(null),_e=(0,i.Z)(Se,2),Ne=_e[0],Ie=_e[1],Pe=(0,r.useState)(!1),Fe=(0,i.Z)(Pe,2),we=Fe[0],Oe=Fe[1],Le=(0,r.useState)(null),Be=(0,i.Z)(Le,2),Re=Be[0],Ue=Be[1],Ae=(0,r.useState)(!1),Ge=(0,i.Z)(Ae,2),ze=Ge[0],Me=Ge[1],Ke=(0,r.useState)(!1),De=(0,i.Z)(Ke,2),qe=De[0],Qe=De[1],Je=(0,r.useState)(!1),Ve=(0,i.Z)(Je,2),We=Ve[0],$e=Ve[1],Ye=c.bucketName||"",He="n/a",Xe="";null!==p&&(He=p.access,Xe=p.definition);var en=(0,v.F)(Ye,[m.Ft.S3_GET_BUCKET_OBJECT_LOCK_CONFIGURATION]),nn=(0,v.F)(Ye,[m.Ft.ADMIN_GET_BUCKET_QUOTA]);(0,r.useEffect)((function(){oe(!!f)}),[f,oe]),(0,r.useEffect)((function(){ce&&Z&&h.Z.invoke("GET","/api/v1/buckets/".concat(Ye,"/versioning")).then((function(e){ye(e.is_versioned),ue(!1)})).catch((function(e){t((0,U.Ih)(e)),ue(!1)}))}),[ce,t,Ye,Z]),(0,r.useEffect)((function(){xe&&Z&&(nn?h.Z.invoke("GET","/api/v1/buckets/".concat(Ye,"/quota")).then((function(e){Ie(e),e.quota?Ee(!0):Ee(!1),pe(!1)})).catch((function(e){t((0,U.Ih)(e)),Ee(!1),pe(!1)})):(Ee(!1),pe(!1)))}),[xe,ue,t,Ye,Z,nn]),(0,r.useEffect)((function(){ce&&Z&&(en?h.Z.invoke("GET","/api/v1/buckets/".concat(Ye,"/object-locking")).then((function(e){I(e.object_locking_enabled),H(!1)})).catch((function(e){t((0,U.Ih)(e)),H(!1)})):H(!1))}),[Y,t,Ye,ce,Z,en]),(0,r.useEffect)((function(){ne&&h.Z.invoke("GET","/api/v1/buckets").then((function(e){var n=x()(e,"buckets",[]).find((function(e){return e.name===Ye})),t=x()(n,"size","0");te(!1),E(t)})).catch((function(e){te(!1),t((0,U.Ih)(e))}))}),[ne,t,Ye]),(0,r.useEffect)((function(){ve&&N&&h.Z.invoke("GET","/api/v1/buckets/".concat(Ye,"/retention")).then((function(e){Ze(!1),Oe(!0),Ue(e)})).catch((function(e){Oe(!1),Ze(!1),Ue(null)}))}),[ve,N,Ye]);var tn=function(){t((0,A.d5)(!0)),oe(!0),te(!0),ue(!0),Ze(!0)};return(0,g.jsxs)(r.Fragment,{children:[qe&&(0,g.jsx)(Q,{open:qe,selectedBucket:Ye,enabled:ke,cfg:Ne,closeModalAndRefresh:function(){Qe(!1),pe(!0)}}),O&&(0,g.jsx)(M,{bucketName:Ye,open:O,actualPolicy:He,actualDefinition:Xe,closeModalAndRefresh:function(){V(!1),tn()}}),ze&&(0,g.jsx)(K,{bucketName:Ye,open:ze,closeModalAndRefresh:function(){Me(!1),tn()}}),We&&(0,g.jsx)(D,{closeVersioningModalAndRefresh:function(e){$e(!1),e&&tn()},modalOpen:We,selectedBucket:Ye,versioningCurrentState:be}),(0,g.jsx)(R.Z,{children:a("summary")}),(0,g.jsxs)(u.ZP,{container:!0,spacing:1,children:[(0,g.jsx)(v.s,{scopes:[m.Ft.S3_GET_BUCKET_POLICY],resource:Ye,children:(0,g.jsx)(u.ZP,{item:!0,xs:12,children:(0,g.jsxs)(d.Z,{sx:(0,s.Z)({},J),children:[(0,g.jsxs)(d.Z,{sx:(0,s.Z)({},J),children:[(0,g.jsx)(v.s,{scopes:[m.Ft.S3_GET_BUCKET_POLICY],resource:Ye,children:(0,g.jsx)(w,{iamScopes:[m.Ft.S3_PUT_BUCKET_POLICY],resourceName:Ye,property:a("access_policy")+":",value:a(He.toLowerCase()),onEdit:function(){V(!0)},isLoading:re})}),(0,g.jsx)(v.s,{scopes:[m.Ft.S3_GET_BUCKET_OBJECT_LOCK_CONFIGURATION],resource:Ye,children:(0,g.jsx)(j.Z,{label:a("object_locking")+":",value:(0,g.jsx)(b,{icon:N?(0,g.jsx)(y.E31,{}):(0,g.jsx)(y.dRf,{}),label:(0,g.jsx)("label",{className:n.textMuted,children:a(N?"enabled":"disabled")})})})}),(0,g.jsx)(d.Z,{className:n.spacerTop,children:(0,g.jsx)(j.Z,{label:a("tags:"),value:(0,g.jsx)(q,{bucketName:Ye})})}),(0,g.jsx)(w,{iamScopes:[m.Ft.ADMIN_SET_BUCKET_QUOTA],resourceName:Ye,property:a("quota")+":",value:a(ke?"enabled":"disabled"),onEdit:function(){Qe(!0)},isLoading:xe})]}),(0,g.jsxs)(d.Z,{sx:{display:"grid",gridTemplateColumns:"1fr",alignItems:"flex-start"},children:[(0,g.jsx)(L,{bucketSize:k}),ke&&Ne?(0,g.jsx)(B,{quota:Ne}):null]})]})})}),Z&&(0,g.jsx)(v.s,{scopes:[m.Ft.S3_GET_BUCKET_VERSIONING],resource:Ye,children:(0,g.jsxs)(u.ZP,{item:!0,xs:12,children:[(0,g.jsx)(R.Z,{children:a("versioning")}),(0,g.jsx)(d.Z,{sx:(0,s.Z)({},J),children:(0,g.jsx)(d.Z,{sx:(0,s.Z)({},J),children:(0,g.jsx)(w,{iamScopes:[m.Ft.S3_PUT_BUCKET_VERSIONING],resourceName:Ye,property:"Current Status:",value:a(be?"versioned":"unversioned"),onEdit:function(){$e(!0)},isLoading:ce})})})]})}),N&&(0,g.jsx)(v.s,{scopes:[m.Ft.S3_GET_OBJECT_RETENTION],resource:Ye,children:(0,g.jsxs)(u.ZP,{item:!0,xs:12,children:[(0,g.jsx)(R.Z,{children:a("retention")}),(0,g.jsxs)(d.Z,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"2fr 1fr"},gridAutoFlow:{xs:"dense",sm:"row"},gap:2},children:[(0,g.jsxs)(d.Z,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"2fr 1fr"},gridAutoFlow:{xs:"dense",sm:"row"},gap:2},children:[(0,g.jsx)(w,{iamScopes:[m.Ft.ADMIN_SET_BUCKET_QUOTA],resourceName:Ye,property:a("retention")+":",value:a(we?"enabled":"disabled"),onEdit:function(){Me(!0)},isLoading:ve}),(0,g.jsx)(j.Z,{label:"Mode:",value:(0,g.jsx)("label",{className:n.textMuted,style:{textTransform:"capitalize"},children:Re&&Re.mode?Re.mode:"-"})}),(0,g.jsx)(j.Z,{label:a("validity")+":",value:(0,g.jsxs)("label",{className:n.textMuted,style:{textTransform:"capitalize"},children:[Re&&Re.validity," ",Re&&(1===Re.validity?Re.unit.slice(0,-1):Re.unit)]})})]}),(0,g.jsx)(d.Z,{sx:{display:"grid",gridTemplateColumns:"1fr",alignItems:"flex-start"}})]})]})})]})]})}))},45902:function(e,n,t){var i=t(1413),s=(t(72791),t(53767)),r=t(80184);n.Z=function(e){var n=e.label,t=void 0===n?null:n,o=e.value,l=void 0===o?"-":o,a=e.orientation,c=void 0===a?"column":a,u=e.stkProps,d=void 0===u?{}:u,f=e.lblProps,x=void 0===f?{}:f,p=e.valProps,h=void 0===p?{}:p;return(0,r.jsxs)(s.Z,(0,i.Z)((0,i.Z)({direction:{xs:"column",sm:c}},d),{},{children:[(0,r.jsx)("label",(0,i.Z)((0,i.Z)({style:{marginRight:5,fontWeight:600}},x),{},{children:t})),(0,r.jsx)("label",(0,i.Z)((0,i.Z)({style:{marginRight:5,fontWeight:500}},h),{},{children:l}))]}))}},53767:function(e,n,t){var i=t(4942),s=t(63366),r=t(87462),o=t(72791),l=t(51184),a=t(45682),c=t(78519),u=t(82466),d=t(66934),f=t(31402),x=t(80184),p=["component","direction","spacing","divider","children"];function h(e,n){var t=o.Children.toArray(e).filter(Boolean);return t.reduce((function(e,i,s){return e.push(i),s<t.length-1&&e.push(o.cloneElement(n,{key:"separator-".concat(s)})),e}),[])}var m=(0,d.ZP)("div",{name:"MuiStack",slot:"Root",overridesResolver:function(e,n){return[n.root]}})((function(e){var n=e.ownerState,t=e.theme,s=(0,r.Z)({display:"flex"},(0,l.k9)({theme:t},(0,l.P$)({values:n.direction,breakpoints:t.breakpoints.values}),(function(e){return{flexDirection:e}})));if(n.spacing){var o=(0,a.hB)(t),c=Object.keys(t.breakpoints.values).reduce((function(e,t){return null==n.spacing[t]&&null==n.direction[t]||(e[t]=!0),e}),{}),d=(0,l.P$)({values:n.direction,base:c}),f=(0,l.P$)({values:n.spacing,base:c});s=(0,u.Z)(s,(0,l.k9)({theme:t},f,(function(e,t){return{"& > :not(style) + :not(style)":(0,i.Z)({margin:0},"margin".concat((s=t?d[t]:n.direction,{row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"}[s])),(0,a.NA)(o,e))};var s})))}return s})),v=o.forwardRef((function(e,n){var t=(0,f.Z)({props:e,name:"MuiStack"}),i=(0,c.Z)(t),o=i.component,l=void 0===o?"div":o,a=i.direction,u=void 0===a?"column":a,d=i.spacing,v=void 0===d?0:d,Z=i.divider,j=i.children,g=(0,s.Z)(i,p),b={direction:u,spacing:v};return(0,x.jsx)(m,(0,r.Z)({as:l,ownerState:b,ref:n},g,{children:Z?h(j,Z):j}))}));n.Z=v}}]);
//# sourceMappingURL=3328.66a02c9c.chunk.js.map