{"version":3,"file":"static/js/7847.04dba10f.chunk.js","mappings":"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","sources":["screens/Console/Marketplace/euTimezones.ts","screens/Console/Marketplace/SetEmailModal.tsx","screens/Console/Marketplace/Marketplace.tsx"],"sourcesContent":["// This file is part of MinIO Console Server\r\n// Copyright (c) 2022 MinIO, Inc.\r\n//\r\n// This program is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU Affero General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// This program is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU Affero General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU Affero General Public License\r\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\nexport const euTimezones = [\r\n  \"europe/amsterdam\",\r\n  \"europe/andorra\",\r\n  \"europe/astrakhan\",\r\n  \"europe/athens\",\r\n  \"europe/belgrade\",\r\n  \"europe/berlin\",\r\n  \"europe/bratislava\",\r\n  \"europe/brussels\",\r\n  \"europe/bucharest\",\r\n  \"europe/budapest\",\r\n  \"europe/busingen\",\r\n  \"europe/chisinau\",\r\n  \"europe/copenhagen\",\r\n  \"europe/dublin\",\r\n  \"europe/gibraltar\",\r\n  \"europe/guernsey\",\r\n  \"europe/helsinki\",\r\n  \"europe/isle_of_man\",\r\n  \"europe/istanbul\",\r\n  \"europe/jersey\",\r\n  \"europe/kaliningrad\",\r\n  \"europe/kiev\",\r\n  \"europe/kirov\",\r\n  \"europe/lisbon\",\r\n  \"europe/ljubljana\",\r\n  \"europe/london\",\r\n  \"europe/luxembourg\",\r\n  \"europe/madrid\",\r\n  \"europe/malta\",\r\n  \"europe/mariehamn\",\r\n  \"europe/minsk\",\r\n  \"europe/monaco\",\r\n  \"europe/moscow\",\r\n  \"europe/oslo\",\r\n  \"europe/paris\",\r\n  \"europe/podgorica\",\r\n  \"europe/prague\",\r\n  \"europe/riga\",\r\n  \"europe/rome\",\r\n  \"europe/samara\",\r\n  \"europe/san_marino\",\r\n  \"europe/sarajevo\",\r\n  \"europe/saratov\",\r\n  \"europe/simferopol\",\r\n  \"europe/skopje\",\r\n  \"europe/sofia\",\r\n  \"europe/stockholm\",\r\n  \"europe/tallinn\",\r\n  \"europe/tirane\",\r\n  \"europe/ulyanovsk\",\r\n  \"europe/uzhgorod\",\r\n  \"europe/vaduz\",\r\n  \"europe/vatican\",\r\n  \"europe/vienna\",\r\n  \"europe/vilnius\",\r\n  \"europe/volgograd\",\r\n  \"europe/warsaw\",\r\n  \"europe/zagreb\",\r\n  \"europe/zaporozhye\",\r\n  \"europe/zurich\",\r\n];\r\n","// This file is part of MinIO Console Server\r\n// Copyright (c) 2022 MinIO, Inc.\r\n//\r\n// This program is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU Affero General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// This program is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU Affero General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU Affero General Public License\r\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\nimport { Theme } from \"@mui/material/styles\";\r\nimport createStyles from \"@mui/styles/createStyles\";\r\nimport withStyles from \"@mui/styles/withStyles\";\r\nimport { containerForHeader } from \"../Common/FormComponents/common/styleLibrary\";\r\nimport ConfirmDialog from \"../Common/ModalWrapper/ConfirmDialog\";\r\nimport useApi from \"../Common/Hooks/useApi\";\r\nimport React, { Fragment, useState } from \"react\";\r\nimport { ISetEmailModalProps } from \"./types\";\r\nimport { InfoIcon } from \"../../../icons\";\r\nimport { ErrorResponseHandler } from \"../../../common/types\";\r\nimport InputBoxWrapper from \"../Common/FormComponents/InputBoxWrapper/InputBoxWrapper\";\r\nimport { setErrorSnackMessage, setSnackBarMessage } from \"../../../systemSlice\";\r\nimport { useAppDispatch } from \"../../../store\";\r\nimport { euTimezones } from \"./euTimezones\";\r\n\r\nconst styles = (theme: Theme) =>\r\n  createStyles({\r\n    pageTitle: {\r\n      fontSize: 18,\r\n      marginBottom: 20,\r\n      textAlign: \"center\",\r\n    },\r\n    pageSubTitle: {\r\n      textAlign: \"center\",\r\n    },\r\n    ...containerForHeader(theme.spacing(4)),\r\n  });\r\n\r\nconst reEmail =\r\n  // eslint-disable-next-line\r\n  /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n\r\nconst SetEmailModal = ({ open, closeModal }: ISetEmailModalProps) => {\r\n  const dispatch = useAppDispatch();\r\n\r\n  const onError = (err: ErrorResponseHandler) => {\r\n    dispatch(setErrorSnackMessage(err));\r\n    closeModal();\r\n  };\r\n\r\n  const onSuccess = (res: any) => {\r\n    let msg = `Email ${email} has been saved`;\r\n    dispatch(setSnackBarMessage(msg));\r\n    closeModal();\r\n  };\r\n\r\n  const [isLoading, invokeApi] = useApi(onSuccess, onError);\r\n  const [email, setEmail] = useState<string>(\"\");\r\n  const [isEmailSet, setIsEmailSet] = useState<boolean>(false);\r\n\r\n  const handleInputChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    let v = event.target.value;\r\n    setIsEmailSet(reEmail.test(v));\r\n    setEmail(v);\r\n  };\r\n\r\n  const onConfirm = () => {\r\n    const isInEU = isEU();\r\n    invokeApi(\"POST\", \"/api/v1/mp-integration\", { email, isInEU });\r\n  };\r\n\r\n  const isEU = () => {\r\n    const tz = Intl.DateTimeFormat().resolvedOptions().timeZone;\r\n    return euTimezones.includes(tz.toLocaleLowerCase());\r\n  };\r\n\r\n  return open ? (\r\n    <ConfirmDialog\r\n      title={\"Register Email\"}\r\n      confirmText={\"Register\"}\r\n      isOpen={open}\r\n      titleIcon={<InfoIcon />}\r\n      isLoading={isLoading}\r\n      cancelText={\"Later\"}\r\n      onConfirm={onConfirm}\r\n      onClose={closeModal}\r\n      confirmButtonProps={{\r\n        color: \"info\",\r\n        disabled: !isEmailSet || isLoading,\r\n      }}\r\n      confirmationContent={\r\n        <Fragment>\r\n          <p>\r\n            Your Marketplace subscription includes support access from the\r\n            <a\r\n              href=\"https://min.io/product/subnet\"\r\n              target=\"_blank\"\r\n              rel=\"noreferrer\"\r\n            >\r\n              MinIO Subscription Network (SUBNET)\r\n            </a>\r\n            .\r\n            <br />\r\n            Enter your email to register now.\r\n          </p>\r\n          <p>\r\n            To register later, contact{\" \"}\r\n            <a href=\"mailto: support@min.io\">support@min.io</a>.\r\n          </p>\r\n          <InputBoxWrapper\r\n            id=\"set-mp-email\"\r\n            name=\"set-mp-email\"\r\n            onChange={handleInputChange}\r\n            label={\"\"}\r\n            placeholder=\"Enter email\"\r\n            type={\"email\"}\r\n            value={email}\r\n          />\r\n        </Fragment>\r\n      }\r\n    />\r\n  ) : null;\r\n};\r\n\r\nexport default withStyles(styles)(SetEmailModal);\r\n","// This file is part of MinIO Console Server\r\n// Copyright (c) 2022 MinIO, Inc.\r\n//\r\n// This program is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU Affero General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// This program is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU Affero General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU Affero General Public License\r\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\nimport React, { Fragment, useEffect, useState } from \"react\";\r\nimport PageHeader from \"../Common/PageHeader/PageHeader\";\r\nimport SetEmailModal from \"./SetEmailModal\";\r\nimport PageLayout from \"../Common/Layout/PageLayout\";\r\nimport { selFeatures } from \"../consoleSlice\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { resourcesConfigurations } from \"../Tenants/AddTenant/Steps/TenantResources/utils\";\r\nimport { selShowMarketplace, showMarketplace } from \"../../../systemSlice\";\r\nimport { Navigate } from \"react-router-dom\";\r\nimport { useAppDispatch } from \"../../../store\";\r\n\r\nconst Marketplace = () => {\r\n  const dispatch = useAppDispatch();\r\n  const navigate = useNavigate();\r\n  const features = useSelector(selFeatures);\r\n  const displayMarketplace = useSelector(selShowMarketplace);\r\n  const [isMPMode, setMPMode] = useState<boolean>(true);\r\n\r\n  useEffect(() => {\r\n    let mpMode = false;\r\n    if (features && features.length !== 0) {\r\n      features.forEach((feature) => {\r\n        if (feature in resourcesConfigurations) {\r\n          mpMode = true;\r\n          return;\r\n        }\r\n      });\r\n    }\r\n    setMPMode(mpMode);\r\n  }, [features, displayMarketplace]);\r\n\r\n  const getTargetPath = () => {\r\n    let targetPath = \"/\";\r\n    if (\r\n      localStorage.getItem(\"redirect-path\") &&\r\n      localStorage.getItem(\"redirect-path\") !== \"\"\r\n    ) {\r\n      targetPath = `${localStorage.getItem(\"redirect-path\")}`;\r\n      localStorage.setItem(\"redirect-path\", \"\");\r\n    }\r\n    return targetPath;\r\n  };\r\n\r\n  const closeModal = () => {\r\n    dispatch(showMarketplace(false));\r\n    navigate(getTargetPath());\r\n  };\r\n\r\n  if (!displayMarketplace || !isMPMode) {\r\n    return <Navigate to={{ pathname: getTargetPath() }} />;\r\n  }\r\n\r\n  if (features) {\r\n    return (\r\n      <Fragment>\r\n        <PageHeader label=\"Operator Marketplace\" />\r\n        <PageLayout>\r\n          <SetEmailModal open={true} closeModal={closeModal} />\r\n        </PageLayout>\r\n      </Fragment>\r\n    );\r\n  }\r\n  return null;\r\n};\r\n\r\nexport default Marketplace;\r\n"],"names":["euTimezones","reEmail","withStyles","theme","createStyles","pageTitle","fontSize","marginBottom","textAlign","pageSubTitle","containerForHeader","spacing","open","closeModal","dispatch","useAppDispatch","useApi","res","msg","email","setSnackBarMessage","err","setErrorSnackMessage","isLoading","invokeApi","useState","setEmail","isEmailSet","setIsEmailSet","isEU","tz","Intl","DateTimeFormat","resolvedOptions","timeZone","includes","toLocaleLowerCase","ConfirmDialog","title","confirmText","isOpen","titleIcon","cancelText","onConfirm","isInEU","onClose","confirmButtonProps","color","disabled","confirmationContent","Fragment","href","target","rel","InputBoxWrapper","id","name","onChange","event","v","value","test","label","placeholder","type","navigate","useNavigate","features","useSelector","selFeatures","displayMarketplace","selShowMarketplace","isMPMode","setMPMode","useEffect","mpMode","length","forEach","feature","resourcesConfigurations","getTargetPath","targetPath","localStorage","getItem","setItem","PageHeader","PageLayout","showMarketplace","to","pathname"],"sourceRoot":""}