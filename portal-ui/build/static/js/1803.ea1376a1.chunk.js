"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[1803],{31803:function(e,n,i){i.r(n),i.d(n,{default:function(){return V}});var t=i(29439),s=i(1413),r=i(72791),o=i(60364),l=i(16871),a=i(11135),c=i(25787),u=i(61889),d=i(64554),f=i(26181),x=i.n(f),p=i(23814),h=i(81207),m=i(56087),v=i(38442),Z=i(75578),g=i(45902),j=i(80184),b=function(e){var n=e.icon,i=void 0===n?null:n,t=e.label,s=void 0===t?null:t;return(0,j.jsxs)(d.Z,{sx:{display:"flex"},children:[(0,j.jsx)("div",{style:{height:16,width:16,display:"flex",alignItems:"center",marginTop:5},children:i}),(0,j.jsx)("div",{style:{marginLeft:i?5:"none"},children:s})]})},C=i(75900),k=i(45987),y=i(36151),E=i(72401),S=["isLoading","onClick","label"],T=function(e){var n=e.isLoading,i=e.onClick,t=e.label,r=(0,k.Z)(e,S);return(0,j.jsx)(y.Z,(0,s.Z)((0,s.Z)({color:"primary",onClick:i,variant:"text",sx:{padding:0,margin:0,alignItems:"flex-start",justifyContent:"flex-start",display:"inline-flex",height:"auto",textDecoration:"underline",color:"#2781B0","&:hover":{background:"#ffffff",textDecoration:"underline"}},disableRipple:!0,disableFocusRipple:!0},r),{},{children:n?(0,j.jsx)(E.Z,{style:{width:16,height:16}}):t}))},_=i(13400),N=i(33548),I=["disabled","onClick"],P=(0,c.Z)((function(e){return(0,a.Z)({root:{"&:hover":{backgroundColor:"#E2E2E2"}}})}))((function(e){var n=e.disabled,i=e.onClick,t=(0,k.Z)(e,I);return(0,j.jsx)(_.Z,(0,s.Z)((0,s.Z)({size:"small",disabled:n,onClick:i},t),{},{children:(0,j.jsx)(N.Z,{})}))})),w=function(e){var n=e.resourceName,i=e.iamScopes,t=e.secureCmpProps,r=void 0===t?{}:t,o=e.children;return(0,j.jsx)(v.s,(0,s.Z)((0,s.Z)({scopes:i,resource:n,errorProps:{disabled:!0}},r),{},{children:o}))},O=function(e){var n=e.isLoading,i=void 0===n||n,t=e.resourceName,s=void 0===t?"":t,r=e.iamScopes,o=e.secureCmpProps,l=void 0===o?{}:o,a=e.property,c=void 0===a?null:a,u=e.value,f=void 0===u?null:u,x=e.onEdit;return(0,j.jsxs)(d.Z,{sx:{display:"flex",alignItems:"baseline",justifyContent:"flex-start"},children:[(0,j.jsx)(g.Z,{label:c,value:(0,j.jsx)(w,{resourceName:s,iamScopes:r,secureCmpProps:l,children:(0,j.jsx)(T,{isLoading:i,onClick:x,label:f})})}),(0,j.jsx)(w,{resourceName:s,iamScopes:r,secureCmpProps:l,children:(0,j.jsx)(P,{onClick:x,sx:{background:"#f8f8f8",marginLeft:"3px",top:3,"& .min-icon":{width:"16px",height:"16px"}}})})]})},F=i(45248),L=i(33168),R=function(e){var n=e.bucketSize,i=(0,L.$)().t;return(0,j.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center","& .min-icon":{height:37,width:37}},children:[(0,j.jsx)(C.Mhr,{}),(0,j.jsxs)(d.Z,{sx:{display:"flex",alignItems:"flex-start",justifyContent:"center",flexFlow:"column",marginLeft:"20px",fontSize:"19px"},children:[(0,j.jsxs)("label",{style:{fontWeight:600},children:[i("reported_usage"),":"]}),(0,j.jsx)("label",{children:(0,F.ae)(n)})]})]})},B=i(50896),G=i(87995),U=i(9859),A=i(25469),z=(0,Z.Z)(r.lazy((function(){return Promise.all([i.e(5958),i.e(9682)]).then(i.bind(i,33690))}))),K=(0,Z.Z)(r.lazy((function(){return i.e(1604).then(i.bind(i,1604))}))),M=(0,Z.Z)(r.lazy((function(){return i.e(402).then(i.bind(i,70402))}))),D=(0,Z.Z)(r.lazy((function(){return Promise.all([i.e(1918),i.e(1705)]).then(i.bind(i,71705))}))),$={display:"grid",gridTemplateColumns:{xs:"1fr",sm:"2fr 1fr"},gridAutoFlow:{xs:"dense",sm:"row"},gap:2},V=(0,c.Z)((function(e){return(0,a.Z)((0,s.Z)((0,s.Z)({},p.bK),p.VI))}))((function(e){var n=e.classes,i=(0,A.TL)(),a=(0,L.$)().t,c=(0,l.UO)(),f=(0,o.v9)(U.HQ),p=(0,o.v9)(U.G6),Z=(0,o.v9)(G.N5),k=(0,r.useState)("0"),y=(0,t.Z)(k,2),E=y[0],S=y[1],T=(0,r.useState)(!1),_=(0,t.Z)(T,2),N=_[0],I=_[1],P=(0,r.useState)(!1),w=(0,t.Z)(P,2),F=w[0],V=w[1],J=(0,r.useState)(!0),W=(0,t.Z)(J,2),Y=W[0],Q=W[1],H=(0,r.useState)(!0),q=(0,t.Z)(H,2),X=q[0],ee=q[1],ne=(0,r.useState)(!0),ie=(0,t.Z)(ne,2),te=ie[0],se=ie[1],re=(0,r.useState)(!0),oe=(0,t.Z)(re,2),le=oe[0],ae=oe[1],ce=(0,r.useState)(!0),ue=(0,t.Z)(ce,2),de=ue[0],fe=ue[1],xe=(0,r.useState)(!1),pe=(0,t.Z)(xe,2),he=pe[0],me=pe[1],ve=(0,r.useState)(!1),Ze=(0,t.Z)(ve,2),ge=Ze[0],je=Ze[1],be=(0,r.useState)(null),Ce=(0,t.Z)(be,2),ke=Ce[0],ye=Ce[1],Ee=(0,r.useState)(!1),Se=(0,t.Z)(Ee,2),Te=Se[0],_e=Se[1],Ne=(0,r.useState)(!1),Ie=(0,t.Z)(Ne,2),Pe=Ie[0],we=Ie[1],Oe=c.bucketName||"",Fe="n/a",Le="";null!==p&&(Fe=p.access,Le=p.definition);var Re=(0,v.F)(Oe,[m.Ft.S3_GET_BUCKET_OBJECT_LOCK_CONFIGURATION]);(0,r.useEffect)((function(){se(!!f)}),[f,se]),(0,r.useEffect)((function(){le&&Z&&h.Z.invoke("GET","/api/v1/buckets/".concat(Oe,"/versioning")).then((function(e){me(e.is_versioned),ae(!1)})).catch((function(e){i((0,G.Ih)(e)),ae(!1)}))}),[le,i,Oe,Z]),(0,r.useEffect)((function(){le&&Z&&(Re?h.Z.invoke("GET","/api/v1/buckets/".concat(Oe,"/object-locking")).then((function(e){I(e.object_locking_enabled),Q(!1)})).catch((function(e){i((0,G.Ih)(e)),Q(!1)})):Q(!1))}),[Y,i,Oe,le,Z,Re]),(0,r.useEffect)((function(){X&&h.Z.invoke("GET","/api/v1/buckets").then((function(e){var n=x()(e,"buckets",[]).find((function(e){return e.name===Oe})),i=x()(n,"size","0");ee(!1),S(i)})).catch((function(e){ee(!1),i((0,G.Ih)(e))}))}),[X,i,Oe]),(0,r.useEffect)((function(){de&&N&&h.Z.invoke("GET","/api/v1/buckets/".concat(Oe,"/retention")).then((function(e){fe(!1),je(!0),ye(e)})).catch((function(e){je(!1),fe(!1),ye(null)}))}),[de,N,Oe]);var Be=function(){i((0,U.d5)(!0)),se(!0),ee(!0),ae(!0),fe(!0)};return(0,j.jsxs)(r.Fragment,{children:[F&&(0,j.jsx)(z,{bucketName:Oe,open:F,actualPolicy:Fe,actualDefinition:Le,closeModalAndRefresh:function(){V(!1),Be()}}),Te&&(0,j.jsx)(K,{bucketName:Oe,open:Te,closeModalAndRefresh:function(){_e(!1),Be()}}),Pe&&(0,j.jsx)(M,{closeVersioningModalAndRefresh:function(e){we(!1),e&&Be()},modalOpen:Pe,selectedBucket:Oe,versioningCurrentState:he}),(0,j.jsx)(B.Z,{children:a("summary")}),(0,j.jsxs)(u.ZP,{container:!0,spacing:1,children:[(0,j.jsx)(v.s,{scopes:[m.Ft.S3_GET_BUCKET_POLICY],resource:Oe,children:(0,j.jsx)(u.ZP,{item:!0,xs:12,children:(0,j.jsxs)(d.Z,{sx:(0,s.Z)({},$),children:[(0,j.jsxs)(d.Z,{sx:(0,s.Z)({},$),children:[(0,j.jsx)(v.s,{scopes:[m.Ft.S3_GET_BUCKET_POLICY],resource:Oe,children:(0,j.jsx)(O,{iamScopes:[m.Ft.S3_PUT_BUCKET_POLICY],resourceName:Oe,property:a("access_policy")+":",value:a(Fe.toLowerCase()),onEdit:function(){V(!0)},isLoading:te})}),(0,j.jsx)(v.s,{scopes:[m.Ft.S3_GET_BUCKET_OBJECT_LOCK_CONFIGURATION],resource:Oe,children:(0,j.jsx)(g.Z,{label:a("object_locking")+":",value:(0,j.jsx)(b,{icon:N?(0,j.jsx)(C.E31,{}):(0,j.jsx)(C.dRf,{}),label:(0,j.jsx)("label",{className:n.textMuted,children:a(N?"enabled":"disabled")})})})}),(0,j.jsx)(d.Z,{className:n.spacerTop,children:(0,j.jsx)(g.Z,{label:a("tags:"),value:(0,j.jsx)(D,{bucketName:Oe})})})]}),(0,j.jsx)(d.Z,{sx:{display:"grid",gridTemplateColumns:"1fr",alignItems:"flex-start"},children:(0,j.jsx)(R,{bucketSize:E})})]})})}),Z&&(0,j.jsx)(v.s,{scopes:[m.Ft.S3_GET_BUCKET_VERSIONING],resource:Oe,children:(0,j.jsxs)(u.ZP,{item:!0,xs:12,children:[(0,j.jsx)(B.Z,{children:a("versioning")}),(0,j.jsx)(d.Z,{sx:(0,s.Z)({},$),children:(0,j.jsx)(d.Z,{sx:(0,s.Z)({},$),children:(0,j.jsx)(O,{iamScopes:[m.Ft.S3_PUT_BUCKET_VERSIONING],resourceName:Oe,property:"Current Status:",value:a(he?"versioned":"unversioned"),onEdit:function(){we(!0)},isLoading:le})})})]})}),N&&(0,j.jsx)(v.s,{scopes:[m.Ft.S3_GET_OBJECT_RETENTION],resource:Oe,children:(0,j.jsxs)(u.ZP,{item:!0,xs:12,children:[(0,j.jsx)(B.Z,{children:a("retention")}),(0,j.jsxs)(d.Z,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"2fr 1fr"},gridAutoFlow:{xs:"dense",sm:"row"},gap:2},children:[(0,j.jsxs)(d.Z,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"2fr 1fr"},gridAutoFlow:{xs:"dense",sm:"row"},gap:2},children:[(0,j.jsx)(O,{iamScopes:[m.Ft.ADMIN_SET_BUCKET_QUOTA],resourceName:Oe,property:a("retention")+":",value:a(ge?"enabled":"disabled"),onEdit:function(){_e(!0)},isLoading:de}),(0,j.jsx)(g.Z,{label:"Mode:",value:(0,j.jsx)("label",{className:n.textMuted,style:{textTransform:"capitalize"},children:ke&&ke.mode?ke.mode:"-"})}),(0,j.jsx)(g.Z,{label:a("validity")+":",value:(0,j.jsxs)("label",{className:n.textMuted,style:{textTransform:"capitalize"},children:[ke&&ke.validity," ",ke&&(1===ke.validity?ke.unit.slice(0,-1):ke.unit)]})})]}),(0,j.jsx)(d.Z,{sx:{display:"grid",gridTemplateColumns:"1fr",alignItems:"flex-start"}})]})]})})]})]})}))},45902:function(e,n,i){var t=i(1413),s=(i(72791),i(53767)),r=i(80184);n.Z=function(e){var n=e.label,i=void 0===n?null:n,o=e.value,l=void 0===o?"-":o,a=e.orientation,c=void 0===a?"column":a,u=e.stkProps,d=void 0===u?{}:u,f=e.lblProps,x=void 0===f?{}:f,p=e.valProps,h=void 0===p?{}:p;return(0,r.jsxs)(s.Z,(0,t.Z)((0,t.Z)({direction:{xs:"column",sm:c}},d),{},{children:[(0,r.jsx)("label",(0,t.Z)((0,t.Z)({style:{marginRight:5,fontWeight:600}},x),{},{children:i})),(0,r.jsx)("label",(0,t.Z)((0,t.Z)({style:{marginRight:5,fontWeight:500}},h),{},{children:l}))]}))}},53767:function(e,n,i){var t=i(4942),s=i(63366),r=i(87462),o=i(72791),l=i(51184),a=i(45682),c=i(78519),u=i(82466),d=i(66934),f=i(31402),x=i(80184),p=["component","direction","spacing","divider","children"];function h(e,n){var i=o.Children.toArray(e).filter(Boolean);return i.reduce((function(e,t,s){return e.push(t),s<i.length-1&&e.push(o.cloneElement(n,{key:"separator-".concat(s)})),e}),[])}var m=(0,d.ZP)("div",{name:"MuiStack",slot:"Root",overridesResolver:function(e,n){return[n.root]}})((function(e){var n=e.ownerState,i=e.theme,s=(0,r.Z)({display:"flex"},(0,l.k9)({theme:i},(0,l.P$)({values:n.direction,breakpoints:i.breakpoints.values}),(function(e){return{flexDirection:e}})));if(n.spacing){var o=(0,a.hB)(i),c=Object.keys(i.breakpoints.values).reduce((function(e,i){return null==n.spacing[i]&&null==n.direction[i]||(e[i]=!0),e}),{}),d=(0,l.P$)({values:n.direction,base:c}),f=(0,l.P$)({values:n.spacing,base:c});s=(0,u.Z)(s,(0,l.k9)({theme:i},f,(function(e,i){return{"& > :not(style) + :not(style)":(0,t.Z)({margin:0},"margin".concat((s=i?d[i]:n.direction,{row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"}[s])),(0,a.NA)(o,e))};var s})))}return s})),v=o.forwardRef((function(e,n){var i=(0,f.Z)({props:e,name:"MuiStack"}),t=(0,c.Z)(i),o=t.component,l=void 0===o?"div":o,a=t.direction,u=void 0===a?"column":a,d=t.spacing,v=void 0===d?0:d,Z=t.divider,g=t.children,j=(0,s.Z)(t,p),b={direction:u,spacing:v};return(0,x.jsx)(m,(0,r.Z)({as:l,ownerState:b,ref:n},j,{children:Z?h(g,Z):g}))}));n.Z=v}}]);
//# sourceMappingURL=1803.ea1376a1.chunk.js.map