"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[5128],{75128:function(e,n,t){t.r(n),t.d(n,{default:function(){return ce}});var r=t(29439),i=t(1413),s=t(72791),o=t(60364),a=t(16871),l=t(11135),c=t(25787),u=t(61889),d=t(64554),f=t(26181),x=t.n(f),h=t(23814),p=t(81207),Z=t(56087),m=t(38442),v=t(75578),j=t(45902),g=t(80184),b=function(e){var n=e.icon,t=void 0===n?null:n,r=e.label,i=void 0===r?null:r;return(0,g.jsxs)(d.Z,{sx:{display:"flex"},children:[(0,g.jsx)("div",{style:{height:16,width:16,display:"flex",alignItems:"center",marginTop:5},children:t}),(0,g.jsx)("div",{style:{marginLeft:t?5:"none"},children:i})]})},C=t(75900),k=t(45987),y=t(36151),S=t(72401),E=["isLoading","onClick","label"],T=function(e){var n=e.isLoading,t=e.onClick,r=e.label,s=(0,k.Z)(e,E);return(0,g.jsx)(y.Z,(0,i.Z)((0,i.Z)({color:"primary",onClick:t,variant:"text",sx:{padding:0,margin:0,alignItems:"flex-start",justifyContent:"flex-start",display:"inline-flex",height:"auto",textDecoration:"underline",color:"#2781B0","&:hover":{background:"#ffffff",textDecoration:"underline"}},disableRipple:!0,disableFocusRipple:!0},s),{},{children:n?(0,g.jsx)(S.Z,{style:{width:16,height:16}}):r}))},_=t(13400),w=t(33548),N=["disabled","onClick"],P=(0,c.Z)((function(e){return(0,l.Z)({root:{"&:hover":{backgroundColor:"#E2E2E2"}}})}))((function(e){var n=e.disabled,t=e.onClick,r=(0,k.Z)(e,N);return(0,g.jsx)(_.Z,(0,i.Z)((0,i.Z)({size:"small",disabled:n,onClick:t},r),{},{children:(0,g.jsx)(w.Z,{})}))})),I=function(e){var n=e.resourceName,t=e.iamScopes,r=e.secureCmpProps,s=void 0===r?{}:r,o=e.children;return(0,g.jsx)(m.s,(0,i.Z)((0,i.Z)({scopes:t,resource:n,errorProps:{disabled:!0}},s),{},{children:o}))},R=function(e){var n=e.isLoading,t=void 0===n||n,r=e.resourceName,i=void 0===r?"":r,s=e.iamScopes,o=e.secureCmpProps,a=void 0===o?{}:o,l=e.property,c=void 0===l?null:l,u=e.value,f=void 0===u?null:u,x=e.onEdit;return(0,g.jsxs)(d.Z,{sx:{display:"flex",alignItems:"baseline",justifyContent:"flex-start"},children:[(0,g.jsx)(j.Z,{label:c,value:(0,g.jsx)(I,{resourceName:i,iamScopes:s,secureCmpProps:a,children:(0,g.jsx)(T,{isLoading:t,onClick:x,label:f})})}),(0,g.jsx)(I,{resourceName:i,iamScopes:s,secureCmpProps:a,children:(0,g.jsx)(P,{onClick:x,sx:{background:"#f8f8f8",marginLeft:"3px",top:3,"& .min-icon":{width:"16px",height:"16px"}}})})]})},B=t(45248),L=t(33168),M=function(e){var n=e.bucketSize,t=(0,L.$)().t;return(0,g.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center","& .min-icon":{height:37,width:37}},children:[(0,g.jsx)(C.Mhr,{}),(0,g.jsxs)(d.Z,{sx:{display:"flex",alignItems:"flex-start",justifyContent:"center",flexFlow:"column",marginLeft:"20px",fontSize:"19px"},children:[(0,g.jsxs)("label",{style:{fontWeight:600},children:[t("reported_usage"),":"]}),(0,g.jsx)("label",{children:(0,B.ae)(n)})]})]})},O=t(50896),F=t(87995),G=t(9859),U=t(25469),A=t(93433),z=t(81918),K=t(20890),D=t(57621),$=t(87462),V=t(63366),W=t(28182),H=t(94419),J=t(66934),Y=t(31402),Q=t(21217);function q(e){return(0,Q.Z)("MuiCardContent",e)}(0,t(75878).Z)("MuiCardContent",["root"]);var X=["className","component"],ee=(0,J.ZP)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:function(e,n){return n.root}})((function(){return{padding:16,"&:last-child":{paddingBottom:24}}})),ne=s.forwardRef((function(e,n){var t=(0,Y.Z)({props:e,name:"MuiCardContent"}),r=t.className,i=t.component,s=void 0===i?"div":i,o=(0,V.Z)(t,X),a=(0,$.Z)({},t,{component:s}),l=function(e){var n=e.classes;return(0,H.Z)({root:["root"]},q,n)}(a);return(0,g.jsx)(ee,(0,$.Z)({as:s,className:(0,W.Z)(l.root,r),ownerState:a,ref:n},o))})),te=function(e){switch(e){case"up":return(0,g.jsx)(z.Z,{label:"Healthy",color:"success",icon:(0,g.jsx)("span",{children:"\ud83d\udfe2"})});case"down":return(0,g.jsx)(z.Z,{label:"Down",color:"error",icon:(0,g.jsx)("span",{children:"\ud83d\udd34"})});case"warning":return(0,g.jsx)(z.Z,{label:"Warning",color:"warning",icon:(0,g.jsx)("span",{children:"\ud83d\udfe1"})});default:return(0,g.jsx)(z.Z,{label:"Unknown"})}};function re(){var e=(0,U.TL)(),n=(0,s.useState)([]),t=(0,r.Z)(n,2),i=t[0],o=t[1];return(0,s.useEffect)((function(){p.Z.invoke("GET","/api/v1/buckets/default/health").then((function(e){var n=(0,A.Z)(e).sort((function(e,n){return e.url.localeCompare(n.url)}));o(n)})).catch((function(n){e((0,F.Ih)(n))}))}),[]),(0,g.jsxs)(d.Z,{mt:4,children:[(0,g.jsx)(K.Z,{variant:"h6",gutterBottom:!0,sx:{},children:"Health Info"}),(0,g.jsx)(u.ZP,{container:!0,spacing:2,children:i.map((function(e){var n=e.url,t=e.status;return(0,g.jsx)(u.ZP,{item:!0,xs:12,sm:6,md:4,children:(0,g.jsx)(D.Z,{sx:{boxShadow:3,borderRadius:2,height:"100%",display:"flex",flexDirection:"column"},children:(0,g.jsxs)(ne,{sx:{display:"flex",flexDirection:"column",justifyContent:"space-between",flexGrow:1},children:[(0,g.jsx)(d.Z,{sx:{flexGrow:1},children:(0,g.jsx)(K.Z,{variant:"body1",sx:{mb:1,wordBreak:"break-word"},children:n})}),(0,g.jsx)(d.Z,{mt:2,children:te(t)})]})})},n)}))})]})}var ie=(0,v.Z)(s.lazy((function(){return Promise.all([t.e(5958),t.e(9682)]).then(t.bind(t,33690))}))),se=(0,v.Z)(s.lazy((function(){return t.e(1604).then(t.bind(t,1604))}))),oe=(0,v.Z)(s.lazy((function(){return t.e(402).then(t.bind(t,70402))}))),ae=(0,v.Z)(s.lazy((function(){return t.e(1705).then(t.bind(t,71705))}))),le={display:"grid",gridTemplateColumns:{xs:"1fr",sm:"2fr 1fr"},gridAutoFlow:{xs:"dense",sm:"row"},gap:2},ce=(0,c.Z)((function(e){return(0,l.Z)((0,i.Z)((0,i.Z)({},h.bK),h.VI))}))((function(e){var n=e.classes,t=(0,U.TL)(),l=(0,L.$)().t,c=(0,a.UO)(),f=(0,o.v9)(G.HQ),h=(0,o.v9)(G.G6),v=(0,o.v9)(F.N5),k=(0,s.useState)("0"),y=(0,r.Z)(k,2),S=y[0],E=y[1],T=(0,s.useState)(!1),_=(0,r.Z)(T,2),w=_[0],N=_[1],P=(0,s.useState)(!1),I=(0,r.Z)(P,2),B=I[0],A=I[1],z=(0,s.useState)(!0),K=(0,r.Z)(z,2),D=K[0],$=K[1],V=(0,s.useState)(!0),W=(0,r.Z)(V,2),H=W[0],J=W[1],Y=(0,s.useState)(!0),Q=(0,r.Z)(Y,2),q=Q[0],X=Q[1],ee=(0,s.useState)(!0),ne=(0,r.Z)(ee,2),te=ne[0],ce=ne[1],ue=(0,s.useState)(!0),de=(0,r.Z)(ue,2),fe=de[0],xe=de[1],he=(0,s.useState)(!1),pe=(0,r.Z)(he,2),Ze=pe[0],me=pe[1],ve=(0,s.useState)(!1),je=(0,r.Z)(ve,2),ge=je[0],be=je[1],Ce=(0,s.useState)(null),ke=(0,r.Z)(Ce,2),ye=ke[0],Se=ke[1],Ee=(0,s.useState)(!1),Te=(0,r.Z)(Ee,2),_e=Te[0],we=Te[1],Ne=(0,s.useState)(!1),Pe=(0,r.Z)(Ne,2),Ie=Pe[0],Re=Pe[1],Be=c.bucketName||"",Le="n/a",Me="";null!==h&&(Le=h.access,Me=h.definition);var Oe=(0,m.F)(Be,[Z.Ft.S3_GET_BUCKET_OBJECT_LOCK_CONFIGURATION]);(0,s.useEffect)((function(){X(!!f)}),[f,X]),(0,s.useEffect)((function(){te&&v&&p.Z.invoke("GET","/api/v1/buckets/".concat(Be,"/versioning")).then((function(e){me(e.is_versioned),ce(!1)})).catch((function(e){t((0,F.Ih)(e)),ce(!1)}))}),[te,t,Be,v]),(0,s.useEffect)((function(){te&&v&&(Oe?p.Z.invoke("GET","/api/v1/buckets/".concat(Be,"/object-locking")).then((function(e){N(e.object_locking_enabled),$(!1)})).catch((function(e){t((0,F.Ih)(e)),$(!1)})):$(!1))}),[D,t,Be,te,v,Oe]),(0,s.useEffect)((function(){H&&p.Z.invoke("GET","/api/v1/buckets").then((function(e){var n=x()(e,"buckets",[]).find((function(e){return e.name===Be})),t=x()(n,"size","0");J(!1),E(t)})).catch((function(e){J(!1),t((0,F.Ih)(e))}))}),[H,t,Be]),(0,s.useEffect)((function(){fe&&w&&p.Z.invoke("GET","/api/v1/buckets/".concat(Be,"/retention")).then((function(e){xe(!1),be(!0),Se(e)})).catch((function(e){be(!1),xe(!1),Se(null)}))}),[fe,w,Be]);var Fe=function(){t((0,G.d5)(!0)),X(!0),J(!0),ce(!0),xe(!0)};return(0,g.jsxs)(s.Fragment,{children:[B&&(0,g.jsx)(ie,{bucketName:Be,open:B,actualPolicy:Le,actualDefinition:Me,closeModalAndRefresh:function(){A(!1),Fe()}}),_e&&(0,g.jsx)(se,{bucketName:Be,open:_e,closeModalAndRefresh:function(){we(!1),Fe()}}),Ie&&(0,g.jsx)(oe,{closeVersioningModalAndRefresh:function(e){Re(!1),e&&Fe()},modalOpen:Ie,selectedBucket:Be,versioningCurrentState:Ze}),(0,g.jsx)(O.Z,{children:l("summary")}),(0,g.jsxs)(u.ZP,{container:!0,spacing:1,children:[(0,g.jsx)(m.s,{scopes:[Z.Ft.S3_GET_BUCKET_POLICY],resource:Be,children:(0,g.jsx)(u.ZP,{item:!0,xs:12,children:(0,g.jsxs)(d.Z,{sx:(0,i.Z)({},le),children:[(0,g.jsxs)(d.Z,{sx:(0,i.Z)({},le),children:[(0,g.jsx)(m.s,{scopes:[Z.Ft.S3_GET_BUCKET_POLICY],resource:Be,children:(0,g.jsx)(R,{iamScopes:[Z.Ft.S3_PUT_BUCKET_POLICY],resourceName:Be,property:l("access_policy")+":",value:l(Le.toLowerCase()),onEdit:function(){A(!0)},isLoading:q})}),(0,g.jsx)(m.s,{scopes:[Z.Ft.S3_GET_BUCKET_OBJECT_LOCK_CONFIGURATION],resource:Be,children:(0,g.jsx)(j.Z,{label:l("object_locking")+":",value:(0,g.jsx)(b,{icon:w?(0,g.jsx)(C.E31,{}):(0,g.jsx)(C.dRf,{}),label:(0,g.jsx)("label",{className:n.textMuted,children:l(w?"enabled":"disabled")})})})}),(0,g.jsx)(d.Z,{className:n.spacerTop,children:(0,g.jsx)(j.Z,{label:l("tags:"),value:(0,g.jsx)(ae,{bucketName:Be})})})]}),(0,g.jsx)(d.Z,{sx:{display:"grid",gridTemplateColumns:"1fr",alignItems:"flex-start"},children:(0,g.jsx)(M,{bucketSize:S})})]})})}),v&&(0,g.jsx)(m.s,{scopes:[Z.Ft.S3_GET_BUCKET_VERSIONING],resource:Be,children:(0,g.jsxs)(u.ZP,{item:!0,xs:12,children:[(0,g.jsx)(O.Z,{children:l("versioning")}),(0,g.jsx)(d.Z,{sx:(0,i.Z)({},le),children:(0,g.jsx)(d.Z,{sx:(0,i.Z)({},le),children:(0,g.jsx)(R,{iamScopes:[Z.Ft.S3_PUT_BUCKET_VERSIONING],resourceName:Be,property:"Current Status:",value:l(Ze?"versioned":"unversioned"),onEdit:function(){Re(!0)},isLoading:te})})})]})}),w&&(0,g.jsx)(m.s,{scopes:[Z.Ft.S3_GET_OBJECT_RETENTION],resource:Be,children:(0,g.jsxs)(u.ZP,{item:!0,xs:12,children:[(0,g.jsx)(O.Z,{children:l("retention")}),(0,g.jsxs)(d.Z,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"2fr 1fr"},gridAutoFlow:{xs:"dense",sm:"row"},gap:2},children:[(0,g.jsxs)(d.Z,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"2fr 1fr"},gridAutoFlow:{xs:"dense",sm:"row"},gap:2},children:[(0,g.jsx)(R,{iamScopes:[Z.Ft.ADMIN_SET_BUCKET_QUOTA],resourceName:Be,property:l("retention")+":",value:l(ge?"enabled":"disabled"),onEdit:function(){we(!0)},isLoading:fe}),(0,g.jsx)(j.Z,{label:"Mode:",value:(0,g.jsx)("label",{className:n.textMuted,style:{textTransform:"capitalize"},children:ye&&ye.mode?ye.mode:"-"})}),(0,g.jsx)(j.Z,{label:l("validity")+":",value:(0,g.jsxs)("label",{className:n.textMuted,style:{textTransform:"capitalize"},children:[ye&&ye.validity," ",ye&&(1===ye.validity?ye.unit.slice(0,-1):ye.unit)]})})]}),(0,g.jsx)(d.Z,{sx:{display:"grid",gridTemplateColumns:"1fr",alignItems:"flex-start"}})]})]})})]}),(0,g.jsx)(re,{})]})}))},45902:function(e,n,t){var r=t(1413),i=(t(72791),t(53767)),s=t(80184);n.Z=function(e){var n=e.label,t=void 0===n?null:n,o=e.value,a=void 0===o?"-":o,l=e.orientation,c=void 0===l?"column":l,u=e.stkProps,d=void 0===u?{}:u,f=e.lblProps,x=void 0===f?{}:f,h=e.valProps,p=void 0===h?{}:h;return(0,s.jsxs)(i.Z,(0,r.Z)((0,r.Z)({direction:{xs:"column",sm:c}},d),{},{children:[(0,s.jsx)("label",(0,r.Z)((0,r.Z)({style:{marginRight:5,fontWeight:600}},x),{},{children:t})),(0,s.jsx)("label",(0,r.Z)((0,r.Z)({style:{marginRight:5,fontWeight:500}},p),{},{children:a}))]}))}},57621:function(e,n,t){t.d(n,{Z:function(){return Z}});var r=t(87462),i=t(63366),s=t(72791),o=t(28182),a=t(94419),l=t(66934),c=t(31402),u=t(10703),d=t(21217);function f(e){return(0,d.Z)("MuiCard",e)}(0,t(75878).Z)("MuiCard",["root"]);var x=t(80184),h=["className","raised"],p=(0,l.ZP)(u.Z,{name:"MuiCard",slot:"Root",overridesResolver:function(e,n){return n.root}})((function(){return{overflow:"hidden"}})),Z=s.forwardRef((function(e,n){var t=(0,c.Z)({props:e,name:"MuiCard"}),s=t.className,l=t.raised,u=void 0!==l&&l,d=(0,i.Z)(t,h),Z=(0,r.Z)({},t,{raised:u}),m=function(e){var n=e.classes;return(0,a.Z)({root:["root"]},f,n)}(Z);return(0,x.jsx)(p,(0,r.Z)({className:(0,o.Z)(m.root,s),elevation:u?8:void 0,ref:n,ownerState:Z},d))}))},53767:function(e,n,t){var r=t(4942),i=t(63366),s=t(87462),o=t(72791),a=t(51184),l=t(45682),c=t(78519),u=t(82466),d=t(66934),f=t(31402),x=t(80184),h=["component","direction","spacing","divider","children"];function p(e,n){var t=o.Children.toArray(e).filter(Boolean);return t.reduce((function(e,r,i){return e.push(r),i<t.length-1&&e.push(o.cloneElement(n,{key:"separator-".concat(i)})),e}),[])}var Z=(0,d.ZP)("div",{name:"MuiStack",slot:"Root",overridesResolver:function(e,n){return[n.root]}})((function(e){var n=e.ownerState,t=e.theme,i=(0,s.Z)({display:"flex"},(0,a.k9)({theme:t},(0,a.P$)({values:n.direction,breakpoints:t.breakpoints.values}),(function(e){return{flexDirection:e}})));if(n.spacing){var o=(0,l.hB)(t),c=Object.keys(t.breakpoints.values).reduce((function(e,t){return null==n.spacing[t]&&null==n.direction[t]||(e[t]=!0),e}),{}),d=(0,a.P$)({values:n.direction,base:c}),f=(0,a.P$)({values:n.spacing,base:c});i=(0,u.Z)(i,(0,a.k9)({theme:t},f,(function(e,t){return{"& > :not(style) + :not(style)":(0,r.Z)({margin:0},"margin".concat((i=t?d[t]:n.direction,{row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"}[i])),(0,l.NA)(o,e))};var i})))}return i})),m=o.forwardRef((function(e,n){var t=(0,f.Z)({props:e,name:"MuiStack"}),r=(0,c.Z)(t),o=r.component,a=void 0===o?"div":o,l=r.direction,u=void 0===l?"column":l,d=r.spacing,m=void 0===d?0:d,v=r.divider,j=r.children,g=(0,i.Z)(r,h),b={direction:u,spacing:m};return(0,x.jsx)(Z,(0,s.Z)({as:a,ownerState:b,ref:n},g,{children:v?p(j,v):j}))}));n.Z=m}}]);
//# sourceMappingURL=5128.9c23655b.chunk.js.map