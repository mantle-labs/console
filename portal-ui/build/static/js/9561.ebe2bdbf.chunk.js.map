{"version":3,"file":"static/js/9561.ebe2bdbf.chunk.js","mappings":"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","sources":["common/HelpBox.tsx","screens/Console/Configurations/SiteReplication/AddReplicationSites.tsx"],"sourcesContent":["// This file is part of MinIO Console Server\r\n// Copyright (c) 2021 MinIO, Inc.\r\n//\r\n// This program is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU Affero General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// This program is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU Affero General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU Affero General Public License\r\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\nimport React from \"react\";\r\nimport { Theme } from \"@mui/material/styles\";\r\nimport createStyles from \"@mui/styles/createStyles\";\r\nimport withStyles from \"@mui/styles/withStyles\";\r\nimport Grid from \"@mui/material/Grid\";\r\n\r\nconst styles = (theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      border: \"1px solid #E2E2E2\",\r\n      borderRadius: 2,\r\n      backgroundColor: \"#FBFAFA\",\r\n      paddingLeft: 25,\r\n      paddingTop: 31,\r\n      paddingBottom: 21,\r\n      paddingRight: 30,\r\n    },\r\n    leftItems: {\r\n      fontSize: 16,\r\n      fontWeight: \"bold\",\r\n      marginBottom: 15,\r\n      display: \"flex\",\r\n      alignItems: \"center\",\r\n      \"& .min-icon\": {\r\n        marginRight: 15,\r\n        height: 28,\r\n        width: 38,\r\n      },\r\n    },\r\n    helpText: {\r\n      fontSize: 16,\r\n      paddingLeft: 5,\r\n    },\r\n  });\r\n\r\ninterface IHelpBox {\r\n  classes: any;\r\n  iconComponent: any;\r\n  title: string;\r\n  help: any;\r\n}\r\n\r\nconst HelpBox = ({ classes, iconComponent, title, help }: IHelpBox) => {\r\n  return (\r\n    <div className={classes.root}>\r\n      <Grid container>\r\n        <Grid item xs={12} className={classes.leftItems}>\r\n          {iconComponent}\r\n          {title}\r\n        </Grid>\r\n        <Grid item xs={12} className={classes.helpText}>\r\n          {help}\r\n        </Grid>\r\n      </Grid>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default withStyles(styles)(HelpBox);\r\n","// This file is part of MinIO Console Server\r\n// Copyright (c) 2022 MinIO, Inc.\r\n//\r\n// This program is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU Affero General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// This program is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU Affero General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU Affero General Public License\r\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\nimport React, { Fragment, useEffect, useState } from \"react\";\r\nimport Grid from \"@mui/material/Grid\";\r\nimport { Box, Button, LinearProgress } from \"@mui/material\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nimport RBIconButton from \"../../Buckets/BucketDetails/SummaryItems/RBIconButton\";\r\nimport useApi from \"../../Common/Hooks/useApi\";\r\nimport { AddIcon, ClustersIcon, RemoveIcon } from \"../../../../icons\";\r\nimport InputBoxWrapper from \"../../Common/FormComponents/InputBoxWrapper/InputBoxWrapper\";\r\nimport PageHeader from \"../../Common/PageHeader/PageHeader\";\r\nimport BackLink from \"../../../../common/BackLink\";\r\nimport { IAM_PAGES } from \"../../../../common/SecureComponent/permissions\";\r\nimport PageLayout from \"../../Common/Layout/PageLayout\";\r\nimport HelpBox from \"../../../../common/HelpBox\";\r\nimport SectionTitle from \"../../Common/SectionTitle\";\r\nimport {\r\n  setErrorSnackMessage,\r\n  setSnackBarMessage,\r\n} from \"../../../../systemSlice\";\r\nimport { useAppDispatch } from \"../../../../store\";\r\n\r\ntype SiteInputRow = {\r\n  name: string;\r\n  endpoint: string;\r\n};\r\n\r\nconst isValidEndPoint = (ep: string) => {\r\n  let isValidEndPointUrl = false;\r\n\r\n  try {\r\n    new URL(ep);\r\n    isValidEndPointUrl = true;\r\n  } catch (err) {\r\n    isValidEndPointUrl = false;\r\n  }\r\n  if (isValidEndPointUrl || ep === \"\") {\r\n    return \"\";\r\n  } else {\r\n    return \"Invalid Endpoint\";\r\n  }\r\n};\r\nconst AddReplicationSites = () => {\r\n  const dispatch = useAppDispatch();\r\n  const navigate = useNavigate();\r\n\r\n  const [existingSites, setExistingSites] = useState<SiteInputRow[]>([]);\r\n\r\n  const [accessKey, setAccessKey] = useState<string>(\"\");\r\n  const [secretKey, setSecretKey] = useState<string>(\"\");\r\n  const [siteConfig, setSiteConfig] = useState<SiteInputRow[]>([]);\r\n\r\n  const setDefaultNewRows = () => {\r\n    const defaultNewSites = existingSites?.length\r\n      ? [{ endpoint: \"\", name: \"\" }]\r\n      : [\r\n          { endpoint: \"\", name: \"\" },\r\n          { endpoint: \"\", name: \"\" },\r\n        ];\r\n    setSiteConfig(defaultNewSites);\r\n  };\r\n\r\n  const [isSiteInfoLoading, invokeSiteInfoApi] = useApi(\r\n    (res: any) => {\r\n      const { sites: siteList, name: curSiteName } = res;\r\n      // current site name to be the fist one.\r\n      const foundIdx = siteList.findIndex((el: any) => el.name === curSiteName);\r\n      if (foundIdx !== -1) {\r\n        let curSite = siteList[foundIdx];\r\n        curSite = {\r\n          ...curSite,\r\n          isCurrent: true,\r\n        };\r\n        siteList.splice(foundIdx, 1, curSite);\r\n      }\r\n\r\n      siteList.sort((x: any, y: any) => {\r\n        return x.name === curSiteName ? -1 : y.name === curSiteName ? 1 : 0;\r\n      });\r\n      setExistingSites(siteList);\r\n    },\r\n    (err: any) => {\r\n      setExistingSites([]);\r\n    }\r\n  );\r\n\r\n  const getSites = () => {\r\n    invokeSiteInfoApi(\"GET\", `api/v1/admin/site-replication`);\r\n  };\r\n\r\n  useEffect(() => {\r\n    getSites();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setDefaultNewRows();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [existingSites]);\r\n\r\n  const isAllEndpointsValid =\r\n    siteConfig.reduce((acc: string[], cv, i) => {\r\n      const epValue = siteConfig[i].endpoint;\r\n      const isEpValid = isValidEndPoint(epValue);\r\n\r\n      if (isEpValid === \"\" && epValue !== \"\") {\r\n        acc.push(isEpValid);\r\n      }\r\n      return acc;\r\n    }, []).length === siteConfig.length;\r\n\r\n  const [isAdding, invokeSiteAddApi] = useApi(\r\n    (res: any) => {\r\n      if (res.success) {\r\n        dispatch(setSnackBarMessage(res.status));\r\n        resetForm();\r\n        getSites();\r\n        navigate(IAM_PAGES.SITE_REPLICATION);\r\n      } else {\r\n        dispatch(\r\n          setErrorSnackMessage({\r\n            errorMessage: \"Error\",\r\n            detailedError: res.status,\r\n          })\r\n        );\r\n      }\r\n    },\r\n    (err: any) => {\r\n      dispatch(setErrorSnackMessage(err));\r\n    }\r\n  );\r\n\r\n  const resetForm = () => {\r\n    setAccessKey(\"\");\r\n    setSecretKey(\"\");\r\n    setDefaultNewRows();\r\n  };\r\n\r\n  const addSiteReplication = () => {\r\n    const existingSitesToAdd = existingSites?.map((es, idx) => {\r\n      return {\r\n        accessKey: accessKey,\r\n        secretKey: secretKey,\r\n        name: es.name,\r\n        endpoint: es.endpoint,\r\n      };\r\n    });\r\n\r\n    const newSitesToAdd = siteConfig.reduce((acc: any, ns, idx) => {\r\n      if (ns.endpoint) {\r\n        acc.push({\r\n          accessKey: accessKey,\r\n          secretKey: secretKey,\r\n          name: ns.name || `dr-site-${idx}`,\r\n          endpoint: ns.endpoint,\r\n        });\r\n      }\r\n      return acc;\r\n    }, []);\r\n\r\n    invokeSiteAddApi(\"POST\", `api/v1/admin/site-replication`, [\r\n      ...(existingSitesToAdd || []),\r\n      ...(newSitesToAdd || []),\r\n    ]);\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <PageHeader\r\n        label={\r\n          <BackLink\r\n            to={IAM_PAGES.SITE_REPLICATION}\r\n            label={\"Add Replication Site\"}\r\n          />\r\n        }\r\n      />\r\n      <PageLayout>\r\n        <Box\r\n          sx={{\r\n            display: \"grid\",\r\n            padding: \"25px\",\r\n            gap: \"25px\",\r\n            gridTemplateColumns: {\r\n              md: \"2fr 1.2fr\",\r\n              xs: \"1fr\",\r\n            },\r\n            border: \"1px solid #eaeaea\",\r\n          }}\r\n        >\r\n          <Box>\r\n            <SectionTitle icon={<ClustersIcon />}>\r\n              Add Sites for Replication\r\n            </SectionTitle>\r\n\r\n            {isSiteInfoLoading || isAdding ? <LinearProgress /> : null}\r\n            <form\r\n              noValidate\r\n              autoComplete=\"off\"\r\n              onSubmit={(e: React.FormEvent<HTMLFormElement>) => {\r\n                e.preventDefault();\r\n                return addSiteReplication();\r\n              }}\r\n            >\r\n              <Grid item xs={12} marginBottom={\"15px\"}>\r\n                <Box\r\n                  sx={{\r\n                    fontStyle: \"italic\",\r\n                    display: \"flex\",\r\n                    alignItems: \"center\",\r\n                    fontSize: \"12px\",\r\n                    marginTop: 2,\r\n                  }}\r\n                >\r\n                  <Box sx={{ fontWeight: 600 }}>Note:</Box>{\" \"}\r\n                  <Box sx={{ marginLeft: 1 }}>\r\n                    Access Key and Secret Key should be same on all sites.\r\n                  </Box>\r\n                </Box>\r\n              </Grid>\r\n              <Grid\r\n                item\r\n                xs={12}\r\n                marginBottom={\"15px\"}\r\n                sx={{\r\n                  \"& label span\": {\r\n                    fontWeight: \"normal\",\r\n                  },\r\n                }}\r\n              >\r\n                <InputBoxWrapper\r\n                  id=\"add-rep-peer-accKey\"\r\n                  name=\"add-rep-peer-accKey\"\r\n                  onChange={(event: React.ChangeEvent<HTMLInputElement>) => {\r\n                    setAccessKey(event.target.value);\r\n                  }}\r\n                  label=\"Access Key\"\r\n                  required={true}\r\n                  value={accessKey}\r\n                  error={accessKey === \"\" ? \"Access Key is required.\" : \"\"}\r\n                  data-test-id={\"add-site-rep-acc-key\"}\r\n                />\r\n              </Grid>\r\n              <Grid\r\n                item\r\n                xs={12}\r\n                marginBottom={\"30px\"}\r\n                sx={{\r\n                  \"& label span\": {\r\n                    fontWeight: \"normal\",\r\n                  },\r\n                }}\r\n              >\r\n                <InputBoxWrapper\r\n                  id=\"add-rep-peer-secKey\"\r\n                  name=\"add-rep-peer-secKey\"\r\n                  type={\"password\"}\r\n                  required={true}\r\n                  onChange={(event: React.ChangeEvent<HTMLInputElement>) => {\r\n                    setSecretKey(event.target.value);\r\n                  }}\r\n                  error={secretKey === \"\" ? \"Secret Key is required.\" : \"\"}\r\n                  label=\"Secret Key\"\r\n                  value={secretKey}\r\n                  data-test-id={\"add-site-rep-sec-key\"}\r\n                />\r\n              </Grid>\r\n\r\n              <Grid item xs={12}>\r\n                <Box\r\n                  sx={{\r\n                    marginBottom: \"15px\",\r\n                    fontSize: \"14px\",\r\n                    fontWeight: 600,\r\n                  }}\r\n                >\r\n                  Peer Sites\r\n                </Box>\r\n              </Grid>\r\n\r\n              <Box\r\n                sx={{\r\n                  display: \"grid\",\r\n                  gridTemplateColumns: \".8fr 1.2fr .2fr\",\r\n                  border: \"1px solid #eaeaea\",\r\n                  padding: \"15px\",\r\n                  gap: \"10px\",\r\n                  maxHeight: \"430px\",\r\n                  overflowY: \"auto\",\r\n                }}\r\n              >\r\n                <Box\r\n                  sx={{\r\n                    fontSize: \"14px\",\r\n                    marginLeft: \"5px\",\r\n                  }}\r\n                >\r\n                  Site Name\r\n                </Box>\r\n                <Box sx={{ fontSize: \"14px\", marginLeft: \"5px\" }}>\r\n                  Endpoint {\"*\"}\r\n                </Box>\r\n                <Box> </Box>\r\n                {existingSites?.map((si, index) => {\r\n                  return (\r\n                    <Fragment key={si.name}>\r\n                      <Box>\r\n                        <InputBoxWrapper\r\n                          id={`add-rep-ex-peer-site-${index}`}\r\n                          name={`add-rep-ex-peer-site-${index}`}\r\n                          extraInputProps={{\r\n                            readOnly: true,\r\n                          }}\r\n                          label=\"\"\r\n                          value={si.name}\r\n                          onChange={() => {}}\r\n                        />\r\n                      </Box>\r\n                      <Box>\r\n                        <InputBoxWrapper\r\n                          id={`add-rep-ex-peer-site-ep-${index}`}\r\n                          name={`add-rep-ex-peer-site-ep-${index}`}\r\n                          extraInputProps={{\r\n                            readOnly: true,\r\n                          }}\r\n                          label=\"\"\r\n                          value={si.endpoint}\r\n                          onChange={() => {}}\r\n                        />\r\n                      </Box>\r\n                      <Grid item xs={12}>\r\n                        {\" \"}\r\n                      </Grid>\r\n                    </Fragment>\r\n                  );\r\n                })}\r\n\r\n                {siteConfig.map((sci, index) => {\r\n                  let isDelDisabled = false;\r\n\r\n                  if (existingSites?.length && index === 0) {\r\n                    isDelDisabled = true;\r\n                  } else if (!existingSites?.length && index < 2) {\r\n                    isDelDisabled = true;\r\n                  }\r\n\r\n                  return (\r\n                    <Fragment key={`${index}`}>\r\n                      <Box>\r\n                        <InputBoxWrapper\r\n                          id={`add-rep-peer-site-${index}`}\r\n                          name={`add-rep-peer-site-${index}`}\r\n                          placeholder={`dr-site-${index}`}\r\n                          label=\"\"\r\n                          value={`${sci.name}`}\r\n                          onChange={(e) => {\r\n                            const nameTxt = e.target.value;\r\n                            setSiteConfig((prevItems) => {\r\n                              return prevItems.map((item, ix) =>\r\n                                ix === index ? { ...item, name: nameTxt } : item\r\n                              );\r\n                            });\r\n                          }}\r\n                          data-test-id={`add-site-rep-peer-site-${index}`}\r\n                        />\r\n                      </Box>\r\n                      <Box>\r\n                        <InputBoxWrapper\r\n                          id={`add-rep-peer-site-ep-${index}`}\r\n                          name={`add-rep-peer-site-ep-${index}`}\r\n                          placeholder={`https://dr.minio-storage:900${index}`}\r\n                          label=\"\"\r\n                          error={isValidEndPoint(siteConfig[index].endpoint)}\r\n                          value={`${sci.endpoint}`}\r\n                          onChange={(e) => {\r\n                            const epTxt = e.target.value;\r\n                            setSiteConfig((prevItems) => {\r\n                              return prevItems.map((item, ix) =>\r\n                                ix === index\r\n                                  ? { ...item, endpoint: epTxt }\r\n                                  : item\r\n                              );\r\n                            });\r\n                          }}\r\n                          data-test-id={`add-site-rep-peer-ep-${index}`}\r\n                        />\r\n                      </Box>\r\n                      <Grid item xs={12} alignItems={\"center\"} display={\"flex\"}>\r\n                        <Box\r\n                          sx={{\r\n                            display: \"flex\",\r\n                            alignItems: \"center\",\r\n                            justifyContent: \"center\",\r\n                            alignSelf: \"baseline\",\r\n                            marginTop: \"4px\",\r\n\r\n                            \"& button\": {\r\n                              borderColor: \"#696969\",\r\n                              color: \"#696969\",\r\n                              borderRadius: \"50%\",\r\n                            },\r\n                          }}\r\n                        >\r\n                          <RBIconButton\r\n                            tooltip={\"Add a Row\"}\r\n                            text={\"\"}\r\n                            variant=\"outlined\"\r\n                            color=\"primary\"\r\n                            icon={<AddIcon />}\r\n                            onClick={(e) => {\r\n                              e.preventDefault();\r\n                              const newRows = [...siteConfig];\r\n                              //add at the next index\r\n                              newRows.splice(index + 1, 0, {\r\n                                name: \"\",\r\n                                endpoint: \"\",\r\n                              });\r\n\r\n                              setSiteConfig(newRows);\r\n                            }}\r\n                          />\r\n                          <RBIconButton\r\n                            tooltip={\"Remove Row\"}\r\n                            text={\"\"}\r\n                            variant=\"outlined\"\r\n                            disabled={isDelDisabled}\r\n                            color=\"primary\"\r\n                            icon={<RemoveIcon />}\r\n                            onClick={(e) => {\r\n                              e.preventDefault();\r\n                              setSiteConfig(\r\n                                siteConfig.filter((_, idx) => idx !== index)\r\n                              );\r\n                            }}\r\n                          />\r\n                        </Box>\r\n                      </Grid>\r\n                    </Fragment>\r\n                  );\r\n                })}\r\n              </Box>\r\n\r\n              <Grid item xs={12}>\r\n                <Box\r\n                  sx={{\r\n                    display: \"flex\",\r\n                    alignItems: \"center\",\r\n                    justifyContent: \"flex-end\",\r\n                    marginTop: \"20px\",\r\n                    gap: \"15px\",\r\n                  }}\r\n                >\r\n                  <Button\r\n                    type=\"button\"\r\n                    variant=\"outlined\"\r\n                    color=\"primary\"\r\n                    disabled={isAdding}\r\n                    onClick={resetForm}\r\n                  >\r\n                    Clear\r\n                  </Button>\r\n\r\n                  <Button\r\n                    type=\"submit\"\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    disabled={\r\n                      isAdding ||\r\n                      !accessKey ||\r\n                      !secretKey ||\r\n                      !isAllEndpointsValid\r\n                    }\r\n                  >\r\n                    Save\r\n                  </Button>\r\n                </Box>\r\n              </Grid>\r\n            </form>\r\n          </Box>\r\n\r\n          <HelpBox\r\n            title={\"\"}\r\n            iconComponent={null}\r\n            help={\r\n              <Fragment>\r\n                <Box\r\n                  sx={{\r\n                    marginTop: \"-25px\",\r\n                    fontSize: \"16px\",\r\n                    fontWeight: 600,\r\n                    display: \"flex\",\r\n                    alignItems: \"center\",\r\n                    justifyContent: \"flex-start\",\r\n                    padding: \"2px\",\r\n                  }}\r\n                >\r\n                  <Box\r\n                    sx={{\r\n                      backgroundColor: \"#07193E\",\r\n                      height: \"15px\",\r\n                      width: \"15px\",\r\n                      display: \"flex\",\r\n                      alignItems: \"center\",\r\n                      justifyContent: \"center\",\r\n                      borderRadius: \"50%\",\r\n                      marginRight: \"18px\",\r\n                      padding: \"3px\",\r\n                      paddingLeft: \"2px\",\r\n                      \"& .min-icon\": {\r\n                        height: \"11px\",\r\n                        width: \"11px\",\r\n                        fill: \"#ffffff\",\r\n                      },\r\n                    }}\r\n                  >\r\n                    <ClustersIcon />\r\n                  </Box>\r\n                  About Site Replication\r\n                </Box>\r\n                <Box\r\n                  sx={{\r\n                    display: \"flex\",\r\n                    flexFlow: \"column\",\r\n                    fontSize: \"14px\",\r\n                    flex: \"2\",\r\n                    \"& .step-number\": {\r\n                      color: \"#ffffff\",\r\n                      height: \"25px\",\r\n                      width: \"25px\",\r\n                      background: \"#081C42\",\r\n                      marginRight: \"10px\",\r\n                      textAlign: \"center\",\r\n                      fontWeight: 600,\r\n                      borderRadius: \"50%\",\r\n                    },\r\n\r\n                    \"& .step-row\": {\r\n                      fontSize: \"14px\",\r\n                      display: \"flex\",\r\n                      marginTop: \"15px\",\r\n                      marginBottom: \"15px\",\r\n\r\n                      \"&.step-text\": {\r\n                        fontWeight: 400,\r\n                      },\r\n                      \"&:before\": {\r\n                        content: \"' '\",\r\n                        height: \"7px\",\r\n                        width: \"7px\",\r\n                        backgroundColor: \"#2781B0\",\r\n                        marginRight: \"10px\",\r\n                        marginTop: \"12px\",\r\n                        flexShrink: 0,\r\n                      },\r\n                    },\r\n                  }}\r\n                >\r\n                  <Box>\r\n                    The following changes are replicated to all other sites\r\n                  </Box>\r\n                  <ul>\r\n                    <li>Creation and deletion of buckets and objects</li>\r\n                    <li>\r\n                      Creation and deletion of all IAM users, groups, policies\r\n                      and their mappings to users or groups\r\n                    </li>\r\n                    <li>Creation of STS credentials</li>\r\n                    <li>\r\n                      Creation and deletion of service accounts (except those\r\n                      owned by the root user)\r\n                    </li>\r\n                    <li>\r\n                      Changes to Bucket features such as\r\n                      <ul>\r\n                        <li>Bucket Policies</li>\r\n                        <li>Bucket Tags</li>\r\n                        <li>Bucket Object-Lock configurations</li>\r\n                        <li>Bucket Encryption configuration</li>\r\n                      </ul>\r\n                    </li>\r\n\r\n                    <li>\r\n                      The following Bucket features will NOT be replicated\r\n                      <ul>\r\n                        <li>Bucket notification configuration</li>\r\n                        <li>Bucket lifecycle (ILM) configuration</li>\r\n                      </ul>\r\n                    </li>\r\n                  </ul>\r\n                </Box>\r\n              </Fragment>\r\n            }\r\n          />\r\n        </Box>\r\n      </PageLayout>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default AddReplicationSites;\r\n"],"names":["withStyles","theme","createStyles","root","border","borderRadius","backgroundColor","paddingLeft","paddingTop","paddingBottom","paddingRight","leftItems","fontSize","fontWeight","marginBottom","display","alignItems","marginRight","height","width","helpText","classes","iconComponent","title","help","className","container","item","xs","isValidEndPoint","ep","isValidEndPointUrl","URL","err","dispatch","useAppDispatch","navigate","useNavigate","useState","existingSites","setExistingSites","accessKey","setAccessKey","secretKey","setSecretKey","siteConfig","setSiteConfig","setDefaultNewRows","defaultNewSites","length","endpoint","name","useApi","res","siteList","sites","curSiteName","foundIdx","findIndex","el","curSite","isCurrent","splice","sort","x","y","isSiteInfoLoading","invokeSiteInfoApi","getSites","useEffect","isAllEndpointsValid","reduce","acc","cv","i","epValue","isEpValid","push","success","setSnackBarMessage","status","resetForm","IAM_PAGES","setErrorSnackMessage","errorMessage","detailedError","isAdding","invokeSiteAddApi","Fragment","label","to","sx","padding","gap","gridTemplateColumns","md","icon","noValidate","autoComplete","onSubmit","e","preventDefault","existingSitesToAdd","map","es","idx","newSitesToAdd","ns","addSiteReplication","fontStyle","marginTop","marginLeft","id","onChange","event","target","value","required","error","type","maxHeight","overflowY","si","index","extraInputProps","readOnly","sci","isDelDisabled","placeholder","nameTxt","prevItems","ix","epTxt","justifyContent","alignSelf","borderColor","color","tooltip","text","variant","onClick","newRows","disabled","filter","_","fill","flexFlow","flex","background","textAlign","content","flexShrink"],"sourceRoot":""}