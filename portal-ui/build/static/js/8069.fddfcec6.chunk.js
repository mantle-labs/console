"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[8069],{58069:function(e,n,t){t.r(n),t.d(n,{default:function(){return gn}});var i=t(1413),o=t(72791),a=t(60364),r=t(16871),s=t(11135),c=t(25787),l=t(20068),d=t(13400),u=t(61889),h=t(25469),f=t(23814),m=t(93433),p=t(29439),x=t(57831),v=t(26181),g=t.n(v),b=t(81207),j=t(92983),Z=t(45248),w=t(20890),y=t(84697),S=t(78029),C=t.n(S),k=t(43504),N=t(36151),E=t(75900),_=t(38442),P=t(56087),I=t(75578),L=t(87995),F=t(54756),T=t(40603),D=t(33168),O=t(80184),B=(0,I.Z)(o.lazy((function(){return t.e(2185).then(t.bind(t,62185))}))),z=(0,c.Z)((function(e){return(0,s.Z)((0,i.Z)((0,i.Z)({},f.cx),{},{slashSpacingStyle:{margin:"0 5px"}}))}))((function(e){var n=e.classes,t=e.bucketName,i=e.internalPaths,s=e.existingFiles,c=e.hidePathButton,f=e.additionalOptions,x=(0,h.TL)(),v=(0,r.s0)(),g=(0,D.$)().t,b=(0,a.v9)((function(e){return e.objectBrowser.rewind.rewindEnabled})),j=(0,a.v9)((function(e){return e.objectBrowser.versionsMode})),w=(0,a.v9)((function(e){return e.objectBrowser.versionedFile})),y=(0,o.useState)(!1),S=(0,p.Z)(y,2),I=S[0],z=S[1],R=i;""!==i&&(R="/".concat(i));var M=R.split("/").filter((function(e){return""!==e})),W=M.length-1,A=M.map((function(e,i){var a="".concat(M.slice(0,i+1).join("/"),"/"),r="/buckets/".concat(t,"/browse/").concat(a?"".concat((0,Z.LL)(a)):"");return i===W&&e===w?null:(0,O.jsxs)(o.Fragment,{children:[(0,O.jsx)("span",{className:n.slashSpacingStyle,children:"/"}),i===W?(0,O.jsx)("span",{style:{cursor:"default"},children:e}):(0,O.jsx)(k.rU,{to:r,onClick:function(){x((0,F.db)({status:!1,objectName:""}))},children:e})]},"breadcrumbs-".concat(i.toString()))})),U=[];j&&(U=[(0,O.jsx)(o.Fragment,{children:(0,O.jsxs)("span",{children:[(0,O.jsx)("span",{className:n.slashSpacingStyle,children:"/"}),w," - Versions"]})},"breadcrumbs-versionedItem")]);var H=[(0,O.jsx)(o.Fragment,{children:(0,O.jsx)(k.rU,{to:"/buckets/".concat(t,"/browse"),onClick:function(){x((0,F.db)({status:!1,objectName:""}))},children:t})},"breadcrumbs-root-path")].concat((0,m.Z)(A),(0,m.Z)(U));return(0,O.jsxs)(o.Fragment,{children:[(0,O.jsxs)("div",{className:n.breadcrumbsMain,children:[I&&(0,O.jsx)(B,{modalOpen:I,bucketName:t,folderName:i,onClose:function(){z(!1)},existingFiles:s}),(0,O.jsxs)(u.ZP,{item:!0,xs:12,className:"".concat(n.breadcrumbs),children:[(0,O.jsx)(d.Z,{onClick:function(){j?x((0,F.db)({status:!1,objectName:""})):v(-1)},sx:{border:"#EAEDEE 1px solid",backgroundColor:"#fff",borderLeft:0,borderRadius:0,width:38,height:38,marginRight:"10px"},children:(0,O.jsx)(E.ubh,{})}),(0,O.jsx)("div",{className:n.breadcrumbsList,dir:"rtl",children:H}),(0,O.jsx)(C(),{text:"".concat(t,"/").concat(M.join("/")),children:(0,O.jsx)(T.Z,{id:"copy-path",icon:(0,O.jsx)(E.TIy,{}),disableTouchRipple:!0,disableRipple:!0,focusRipple:!1,variant:"outlined",onClick:function(){x((0,L.y1)("Path copied to clipboard"))},sx:{marginRight:"3px",padding:"0",color:"#969FA8",border:"#969FA8 1px solid",width:"28px",height:"28px","& .MuiButton-root":{height:"28px"},"& .min-icon":{width:"12px",height:"12px"}}})}),(0,O.jsx)("div",{className:n.additionalOptions,children:f})]}),!c&&(0,O.jsx)(l.Z,{title:g("choose_or_create_path"),children:(0,O.jsx)(N.Z,{id:"new-path",onClick:function(){z(!0)},disabled:b||!(0,_.F)(t,[P.Ft.S3_PUT_OBJECT]),endIcon:(0,O.jsx)(E.N$q,{}),disableTouchRipple:!0,disableRipple:!0,focusRipple:!1,sx:{color:"#969FA8",border:"#969FA8 1px solid",whiteSpace:"nowrap",minWidth:"160px","@media (max-width: 1060px)":{fontSize:0,minWidth:40,padding:"0 10px 0 0"}},variant:"outlined",children:g("create_new_path")})})]}),(0,O.jsx)("div",{className:n.breadcrumbsSecond,children:f})]})})),R=t(47922),M=t(14917),W=t(74794),A=t(71715),U=t(23786),H=t(49900),V=t(57064),K=(0,c.Z)((function(e){return(0,s.Z)({listUploadIcons:{height:20,"& .min-icon":{width:18,fill:"rgba(0,0,0,0.87)"}}})}))((function(e){var n=e.uploadPath,t=e.bucketName,i=e.forceDisable,a=void 0!==i&&i,r=e.uploadFileFunction,s=e.uploadFolderFunction,c=e.classes,l=(0,D.$)().t,d=o.useState(null),u=(0,p.Z)(d,2),h=u[0],f=u[1],m=Boolean(h),x=function(){f(null)},v=(0,_.F)(n,[P.Ft.S3_PUT_OBJECT]),g=(0,_.F)(t,[P.Ft.S3_PUT_OBJECT],!1,!0),b=v||g;return(0,O.jsxs)(o.Fragment,{children:[(0,O.jsx)(T.Z,{id:"upload-main",tooltip:l("upload_file"),"aria-controls":"upload-main-menu","aria-haspopup":"true","aria-expanded":m?"true":void 0,onClick:function(e){f(e.currentTarget)},text:l("upload"),icon:(0,O.jsx)(E.rG2,{}),color:"primary",variant:"contained",disabled:a||!b}),(0,O.jsxs)(A.Z,{id:"upload-main-menu","aria-labelledby":"upload-main",anchorEl:h,open:m,onClose:function(){x()},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:[(0,O.jsxs)(U.Z,{onClick:function(){r(x)},disabled:!v||a,children:[(0,O.jsx)(V.Z,{className:c.listUploadIcons,children:(0,O.jsx)(E.rG2,{})}),(0,O.jsx)(H.Z,{children:l("upload_file")})]}),(0,O.jsxs)(U.Z,{onClick:function(){s(x)},disabled:!g||a,children:[(0,O.jsx)(V.Z,{className:c.listUploadIcons,children:(0,O.jsx)(E.oXh,{})}),(0,O.jsx)(H.Z,{children:l("upload_folder")})]})]})]})})),q=t(72455),Y=(0,q.Z)((function(e){return(0,s.Z)({detailsList:{borderColor:"#EAEDEE",borderWidth:0,borderStyle:"solid",borderRadius:3,borderBottomLeftRadius:0,borderBottomRightRadius:0,width:0,transitionDuration:"0.3s",overflowX:"hidden",overflowY:"auto",position:"relative",opacity:0,marginLeft:-1,"&.open":{width:300,minWidth:300,borderLeftWidth:1,opacity:1},"@media (max-width: 799px)":{"&.open":{width:"100%",minWidth:"100%",borderLeftWidth:0}}},closePanel:{position:"absolute",right:0,top:8,"& .min-icon":{width:14}}})})),G=function(e){var n=e.open,t=e.closePanel,i=e.className,o=void 0===i?"":i,a=e.children,r=Y();return(0,O.jsxs)(u.ZP,{item:!0,className:"".concat(r.detailsList," ").concat(n?"open":""," ").concat(o," detailsListPanel"),children:[(0,O.jsx)(d.Z,{onClick:t,className:r.closePanel,children:(0,O.jsx)(E.oto,{})}),a]})},J=t(45987),$=t(28182),X=["disabled","onClick","icon","label","classes"],Q=(0,c.Z)((function(e){return(0,s.Z)({root:{padding:"0 15px",height:22,margin:0,color:"#5E5E5E",fontWeight:"normal",fontSize:14,whiteSpace:"nowrap",width:"100%",justifyContent:"flex-start","&:hover":{backgroundColor:"transparent",color:"#000"},"& .min-icon":{width:11},"&:disabled":{color:"#EBEBEB",borderColor:"#EBEBEB"}}})}))((function(e){var n=e.disabled,t=e.onClick,o=e.icon,a=e.label,r=e.classes,s=(0,J.Z)(e,X);return(0,O.jsx)(N.Z,(0,i.Z)((0,i.Z)({},s),{},{disabled:n,onClick:t,className:(0,$.Z)(r.root,"noDefaultHeight"),startIcon:o,sx:{height:"initial"},children:(0,O.jsx)("span",{className:"buttonItem",children:a})}))})),ee=(0,c.Z)((function(){return(0,s.Z)((0,i.Z)({},f.$b))}))((function(e){var n=e.items,t=e.classes,i=e.title;return(0,O.jsxs)(o.Fragment,{children:[(0,O.jsx)("div",{className:t.titleLabel,children:i}),(0,O.jsxs)("ul",{className:t.objectActions,children:[(0,O.jsx)("li",{children:"Actions:"}),n.map((function(e,n){return(0,O.jsx)("li",{children:(0,O.jsx)(Q,{label:e.label,icon:e.icon,onClick:e.action,disabled:e.disabled})},"action-element-".concat(n.toString()))}))]})]})})),ne=t(46431),te=t.n(ne),ie=t(37762),oe=t(71863),ae=t(82314),re=(0,c.Z)((function(e){return(0,s.Z)({fileName:{display:"flex",alignItems:"center","& .min-icon":{width:16,height:16,marginRight:4,minWidth:16,minHeight:16}},fileNameText:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}})}))((function(e){var n=e.classes,t=e.icon,i=e.strings;return(0,O.jsxs)("div",{className:n.fileName,children:[t,(0,O.jsx)("span",{className:n.fileNameText,children:i[i.length-1]})]})})),se=o.lazy((function(){return Promise.resolve().then(t.bind(t,76181))})),ce=o.lazy((function(){return Promise.resolve().then(t.bind(t,49563))})),le=o.lazy((function(){return Promise.resolve().then(t.bind(t,21733))})),de=o.lazy((function(){return Promise.resolve().then(t.bind(t,95232))})),ue=o.lazy((function(){return Promise.resolve().then(t.bind(t,27529))})),he=o.lazy((function(){return Promise.resolve().then(t.bind(t,60527))})),fe=o.lazy((function(){return Promise.resolve().then(t.bind(t,69812))})),me=o.lazy((function(){return Promise.resolve().then(t.bind(t,46454))})),pe=o.lazy((function(){return Promise.resolve().then(t.bind(t,84820))})),xe=o.lazy((function(){return Promise.resolve().then(t.bind(t,40599))})),ve=o.lazy((function(){return Promise.resolve().then(t.bind(t,72995))})),ge=o.lazy((function(){return Promise.resolve().then(t.bind(t,34171))})),be=o.lazy((function(){return Promise.resolve().then(t.bind(t,30745))})),je=o.lazy((function(){return Promise.resolve().then(t.bind(t,84033))})),Ze=o.lazy((function(){return Promise.resolve().then(t.bind(t,52009))})),we=[{icon:(0,O.jsx)(be,{}),extensions:["mp4","mov","avi","mpeg","mpg"]},{icon:(0,O.jsx)(pe,{}),extensions:["mp3","m4a","aac"]},{icon:(0,O.jsx)(xe,{}),extensions:["pdf"]},{icon:(0,O.jsx)(ve,{}),extensions:["ppt","pptx"]},{icon:(0,O.jsx)(je,{}),extensions:["xls","xlsx"]},{icon:(0,O.jsx)(fe,{}),extensions:["cer","crt","pem"]},{icon:(0,O.jsx)(ce,{}),extensions:["html","xml","css","py","go","php","cpp","h","java"]},{icon:(0,O.jsx)(le,{}),extensions:["cfg","yaml"]},{icon:(0,O.jsx)(de,{}),extensions:["sql"]},{icon:(0,O.jsx)(ue,{}),extensions:["ttf","otf"]},{icon:(0,O.jsx)(ge,{}),extensions:["txt"]},{icon:(0,O.jsx)(Ze,{}),extensions:["zip","rar","tar","gz"]},{icon:(0,O.jsx)(se,{}),extensions:["epub","mobi","azw","azw3"]},{icon:(0,O.jsx)(he,{}),extensions:["jpeg","jpg","gif","tiff","png","heic","dng"]}],ye=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=e,i=(0,O.jsx)(oe.Z,{});e.endsWith("/")&&(i=(0,O.jsx)(ae.Z,{}),t=e.slice(0,-1));var o,a=e.toLowerCase(),r=(0,ie.Z)(we);try{for(r.s();!(o=r.n()).done;){var s,c=o.value,l=(0,ie.Z)(c.extensions);try{for(l.s();!(s=l.n()).done;){var d=s.value;a.endsWith(".".concat(d))&&(i=c.icon)}}catch(h){l.e(h)}finally{l.f()}}}catch(h){r.e(h)}finally{r.f()}!e.endsWith("/")&&e.indexOf(".")<0&&(i=(0,O.jsx)(me,{}));var u=t.split("/");return n?i:(0,O.jsx)(re,{icon:i,strings:u})},Se=t(68825),Ce=function(e){return e.name.endsWith("/")?"":(0,O.jsx)(te(),{children:e.last_modified})},ke=function(e){return e.name.endsWith("/")||!e.size?"-":(0,Z.ae)(String(e.size))},Ne=[{label:Se.ZP.t("name"),elementKey:"name",renderFunction:ye,enableSort:!0},{label:Se.ZP.t("last_modified"),elementKey:"last_modified",renderFunction:Ce,renderFullObject:!0,enableSort:!0},{label:Se.ZP.t("size"),elementKey:"size",renderFunction:ke,renderFullObject:!0,width:100,contentTextAlign:"center",enableSort:!0}],Ee=[{label:Se.ZP.t("name"),elementKey:"name",renderFunction:ye,enableSort:!0},{label:Se.ZP.t("object_data"),elementKey:"last_modified",renderFunction:Ce,renderFullObject:!0,enableSort:!0},{label:Se.ZP.t("size"),elementKey:"size",renderFunction:ke,renderFullObject:!0,width:100,contentTextAlign:"center",enableSort:!0},{label:Se.ZP.t("deleted"),elementKey:"delete_flag",renderFunction:function(e){return e?"Yes":"No"},width:60,contentTextAlign:"center"}],_e=t(40986),Pe=t(34433),Ie=t(51691),Le=t(2148),Fe=t(88878),Te=(0,c.Z)((function(e){return(0,s.Z)((0,i.Z)({},f.oO))}))((function(e){var n=e.classes,t=e.versionID,i=e.bucketName,a=e.objectPath,r=e.restoreOpen,s=e.onCloseAndUpdate,c=(0,h.TL)(),l=(0,o.useState)(!1),d=(0,p.Z)(l,2),u=d[0],f=d[1];return(0,O.jsx)(Le.Z,{title:"Restore File Version",confirmText:"Restore",isOpen:r,isLoading:u,titleIcon:(0,O.jsx)(Fe.Z,{}),onConfirm:function(){f(!0),b.Z.invoke("PUT","/api/v1/buckets/".concat(i,"/objects/restore?prefix=").concat((0,Z.LL)(a),"&version_id=").concat(t)).then((function(e){f(!1),s(!0)})).catch((function(e){c((0,L.Ih)(e)),f(!1)}))},confirmButtonProps:{color:"secondary",variant:"outlined",disabled:u},onClose:function(){s(!1)},confirmationContent:(0,O.jsxs)(Ie.Z,{id:"alert-dialog-description",children:["Are you sure you want to restore ",(0,O.jsx)("br",{}),(0,O.jsx)("b",{children:a})," ",(0,O.jsx)("br",{})," with Version ID:",(0,O.jsx)("br",{}),(0,O.jsx)("b",{className:n.wrapText,children:t}),"?"]})})})),De=function(e){var n="#000",t="";switch(e.type){case"null":n="#07193E",t="NULL VERSION";break;case"deleted":n="#868686",t="DELETED";break;default:n="#174551",t="CURRENT VERSION"}return(0,O.jsx)("span",{style:{backgroundColor:n,padding:"0 5px",display:"inline-block",color:"#FFF",fontWeight:"bold",fontSize:12,borderRadius:2,whiteSpace:"nowrap",margin:"0 10px"},children:t})},Oe=t(34866),Be=(0,c.Z)((function(e){return(0,s.Z)({mainFileVersionItem:{borderBottom:"#E2E2E2 1px solid",padding:"1rem 0",margin:"0 0.5rem 0 2.5rem",cursor:"pointer","&.deleted":{color:"#868686"},"@media (max-width: 799px)":{padding:"5px 0px",margin:0}},intermediateLayer:{margin:"0 1.5rem 0 1.5rem","&:hover, &.selected":{backgroundColor:"#F8F8F8","& > div":{borderBottomColor:"#F8F8F8"}},"@media (max-width: 799px)":{margin:0,"&:hover, &.selected":{backgroundColor:"transparent","& > div":{borderBottomColor:"#E2E2E2"}}}},versionContainer:{fontSize:16,fontWeight:"bold",display:"flex",alignItems:"center","& svg.min-icon":{width:18,height:18,minWidth:18,minHeight:18,marginRight:10},"@media (max-width: 799px)":{fontSize:14,"& svg.min-icon":{display:"none"}}},buttonContainer:{textAlign:"right","& button":{marginLeft:"1.5rem"},"@media (max-width: 600px)":{"& button":{marginLeft:"5px"}}},versionID:{fontSize:"12px",margin:"2px 0",whiteSpace:"nowrap",textOverflow:"ellipsis",maxWidth:"95%",overflow:"hidden"},versionData:{marginRight:"10px",fontSize:12,color:"#868686","@media (max-width: 799px)":{textOverflow:"ellipsis",maxWidth:"95%",overflow:"hidden",whiteSpace:"nowrap"}},ctrItem:{position:"relative","&::before":{content:"' '",display:"block",position:"absolute",width:"2px",height:"calc(100% + 2px)",backgroundColor:"#F8F8F8",left:"24px"},"@media (max-width: 799px)":{"&::before":{display:"none"}}},collapsableInfo:{"@media (max-width: 799px)":{display:"flex",flexDirection:"column"}},versionItem:{"@media (max-width: 799px)":{display:"none"}}})}))((function(e){var n=e.classes,t=e.fileName,i=e.versionInfo,o=e.isSelected,a=e.checkable,r=e.isChecked,s=e.onCheck,c=e.onShare,h=e.onDownload,f=e.onRestore,m=e.onPreview,p=e.globalClick,x=e.index,v=e.key,g=e.style,b=i.is_delete_marker,j=[{icon:(0,O.jsx)(E.P99,{}),action:m,tooltip:"Preview"},{icon:(0,O.jsx)(E._8t,{}),action:h,tooltip:"Download this version"},{icon:(0,O.jsx)(E.aAc,{}),action:c,tooltip:"Share this version"},{icon:(0,O.jsx)(E.D7Y,{}),action:f,tooltip:"Restore this version"}],w=null;return i.is_delete_marker?w="deleted":i.is_latest?w="current":"null"===i.version_id&&(w="null"),(0,O.jsx)(u.ZP,{container:!0,flex:1,className:n.ctrItem,onClick:function(){p(i)},style:g,children:(0,O.jsx)(u.ZP,{item:!0,xs:12,className:"".concat(n.intermediateLayer," ").concat(o?"selected":""),children:(0,O.jsxs)(u.ZP,{item:!0,xs:12,className:"".concat(n.mainFileVersionItem," ").concat(i.is_delete_marker?"deleted":""),children:[(0,O.jsx)(u.ZP,{item:!0,xs:12,justifyContent:"space-between",children:(0,O.jsxs)(u.ZP,{container:!0,children:[(0,O.jsxs)(u.ZP,{item:!0,xs:!0,md:4,className:n.versionContainer,children:[a&&(0,O.jsx)(Oe.Z,{checked:r,id:"select-".concat(i.version_id),label:"",name:"select-".concat(i.version_id),onChange:function(e){e.stopPropagation(),e.preventDefault(),s(i.version_id||"")},value:i.version_id||"",disabled:i.is_delete_marker,overrideCheckboxStyles:{paddingLeft:0,height:34,width:25},noTopMargin:!0}),ye(t,!0)," v",x.toString(),(0,O.jsx)("span",{className:n.versionItem,children:w&&(0,O.jsx)(De,{type:w})})]}),(0,O.jsx)(u.ZP,{item:!0,xs:10,md:8,className:n.buttonContainer,children:j.map((function(e,t){return(0,O.jsx)(l.Z,{title:e.tooltip,children:(0,O.jsx)(d.Z,{size:"small",id:"version-action-".concat(e.tooltip,"-").concat(t.toString()),className:"".concat(n.spacing," ").concat(b?n.buttonDisabled:""),disabled:b,onClick:function(n){n.stopPropagation(),b?n.preventDefault():e.action(i)},sx:{backgroundColor:"#F8F8F8",borderRadius:"100%",width:"28px",height:"28px",padding:"5px","& .min-icon":{width:"14px",height:"14px"}},children:e.icon})},"version-action-".concat(e.tooltip,"-").concat(t.toString()))}))})]})}),(0,O.jsx)(u.ZP,{item:!0,xs:12,className:n.versionID,children:"null"!==i.version_id?i.version_id:"-"}),(0,O.jsxs)(u.ZP,{item:!0,xs:12,className:n.collapsableInfo,children:[(0,O.jsxs)("span",{className:n.versionData,children:[(0,O.jsx)("strong",{children:"Last modified:"})," ",(0,O.jsx)(te(),{children:i.last_modified})]}),(0,O.jsxs)("span",{className:n.versionData,children:[(0,O.jsx)("strong",{children:"Size:"})," ",(0,Z.ae)(i.size||"0")]})]})]})})},v)})),ze=t(90673),Re=t(78562),Me=t(21435),We=function(e){var n=e.closeDeleteModalAndRefresh,t=e.deleteOpen,i=e.selectedBucket,a=e.selectedObject,r=(0,h.TL)(),s=(0,o.useState)(!1),c=(0,p.Z)(s,2),l=c[0],d=c[1],f=(0,o.useState)(""),m=(0,p.Z)(f,2),x=m[0],v=m[1];if((0,o.useEffect)((function(){l&&b.Z.invoke("DELETE","/api/v1/buckets/".concat(i,"/objects?path=").concat(a,"&non_current_versions=true")).then((function(){n(!0)})).catch((function(e){r((0,L.Ih)(e)),d(!1)}))}),[l,n,r,a,i]),!a)return null;return(0,O.jsx)(Le.Z,{title:"Delete Non-Current versions",confirmText:"Delete",isOpen:t,titleIcon:(0,O.jsx)(E.NvT,{}),isLoading:l,onConfirm:function(){d(!0)},onClose:function(){return n(!1)},confirmButtonProps:{disabled:"YES, PROCEED"!==x||l},confirmationContent:(0,O.jsxs)(Ie.Z,{children:["Are you sure you want to delete all the non-current versions for:"," ",(0,O.jsx)("b",{children:(0,Z.IO)(a)}),"? ",(0,O.jsx)("br",{}),(0,O.jsx)("br",{}),"To continue please type ",(0,O.jsx)("b",{children:"YES, PROCEED"})," in the box.",(0,O.jsx)(u.ZP,{item:!0,xs:12,children:(0,O.jsx)(Me.Z,{id:"type-confirm",name:"retype-tenant",onChange:function(e){v(e.target.value)},label:"",value:x})})]})})},Ae=function(e){var n=e.closeDeleteModalAndRefresh,t=e.deleteOpen,i=e.selectedBucket,a=e.selectedVersions,r=e.selectedObject,s=(0,h.TL)(),c=(0,o.useState)(!1),l=(0,p.Z)(c,2),d=l[0],u=l[1];return(0,o.useEffect)((function(){if(d){var e=a.map((function(e){return{path:r,versionID:e,recursive:!1}}));e.length>0&&b.Z.invoke("POST","/api/v1/buckets/".concat(i,"/delete-objects?all_versions=false"),e).then((function(){u(!1),n(!0)})).catch((function(e){s((0,L.Ih)(e)),u(!1)}))}}),[d,n,i,r,a,s]),a?(0,O.jsx)(Le.Z,{title:"Delete Selected Versions",confirmText:"Delete",isOpen:t,titleIcon:(0,O.jsx)(E.NvT,{}),isLoading:d,onConfirm:function(){u(!0)},onClose:function(){return n(!1)},confirmationContent:(0,O.jsxs)(Ie.Z,{children:["Are you sure you want to delete the selected ",a.length," ","versions for ",(0,O.jsx)("strong",{children:r}),"?"]})}):null},Ue=t(76610),He=t(5171),Ve={is_latest:!0,last_modified:"",legal_hold_status:"",name:"",retention_mode:"",retention_until_date:"",size:"0",tags:{},version_id:null},Ke=(0,c.Z)((function(e){return(0,s.Z)((0,i.Z)((0,i.Z)((0,i.Z)((0,i.Z)((0,i.Z)((0,i.Z)((0,i.Z)((0,i.Z)((0,i.Z)({versionsContainer:{padding:10,"@media (max-width: 799px)":{minHeight:800}},noBottomBorder:{borderBottom:0},versionsVirtualPanel:{flexGrow:1,height:"calc(100% - 120px)",overflow:"auto","@media (max-width: 799px)":{height:600}},screenTitleContainer:{position:"relative","&::before":{content:"' '",display:"block",position:"absolute",width:"2px",backgroundColor:"#F8F8F8",left:"24px",height:"40px",bottom:0},"@media (max-width: 799px)":{"&::before":{display:"none"}}},sortByLabel:{color:"#838383",fontWeight:"bold",whiteSpace:"nowrap",marginRight:12,fontSize:14,"@media (max-width: 600px)":{display:"none"}}},f.bp),f.Si),f.OR),f.VX),f.bK),f.VI),f.cx),f.C4),(0,f.Bz)(e.spacing(4))))}))((function(e){var n=e.classes,t=e.internalPaths,i=e.bucketName,r=(0,h.TL)(),s=(0,a.v9)((function(e){return e.objectBrowser.searchVersions})),c=(0,a.v9)((function(e){return e.objectBrowser.loadingVersions})),l=(0,a.v9)((function(e){return e.objectBrowser.selectedVersion})),d=(0,a.v9)(L.N5),f=(0,o.useState)(!1),x=(0,p.Z)(f,2),v=x[0],j=x[1],w=(0,o.useState)(null),y=(0,p.Z)(w,2),S=y[0],C=y[1],k=(0,o.useState)(null),N=(0,p.Z)(k,2),_=N[0],P=N[1],I=(0,o.useState)([]),D=(0,p.Z)(I,2),B=D[0],W=D[1],A=(0,o.useState)(!1),U=(0,p.Z)(A,2),H=U[0],V=U[1],K=(0,o.useState)(""),q=(0,p.Z)(K,2),Y=q[0],G=q[1],J=(0,o.useState)("date"),$=(0,p.Z)(J,2),X=$[0],Q=$[1],ee=(0,o.useState)(!1),ne=(0,p.Z)(ee,2),te=ne[0],ie=ne[1],oe=(0,o.useState)(!1),ae=(0,p.Z)(oe,2),re=ae[0],se=ae[1],ce=(0,o.useState)(!1),le=(0,p.Z)(ce,2),de=le[0],ue=le[1],he=(0,o.useState)([]),fe=(0,p.Z)(he,2),me=fe[0],pe=fe[1],xe=(0,o.useState)(!1),ve=(0,p.Z)(xe,2),ge=ve[0],be=ve[1],je=[];S&&(je=S.name.split("/")),(0,o.useEffect)((function(){c||S||r((0,F.Eq)(!0))}),[c,S,r]),(0,o.useEffect)((function(){c&&""!==t&&b.Z.invoke("GET","/api/v1/buckets/".concat(i,"/objects?prefix=").concat(t).concat(d?"&with_versions=true":"")).then((function(e){var n=g()(e,"objects",[]),i=(0,Z.IO)(t),o=n.filter((function(e){return e.name===i}));d?(C(o.find((function(e){return e.is_latest}))||Ve),W(o)):(C(o[0]),W([])),r((0,F.Eq)(!1))})).catch((function(e){r((0,L.Ih)(e)),r((0,F.Eq)(!1))}))}),[c,i,t,r,d]);var Ze=function(e){P(e),j(!0)},we=function(e){P(e),ie(!0)},ye=function(e){G(e.version_id||""),V(!0)},Se=function(e){!function(e){var n=(0,Z.LL)("".concat(i,"-").concat(e.name,"-").concat((new Date).getTime(),"-").concat(Math.random())),o=(0,R.LR)(i,t,e.version_id,parseInt(e.size||"0"),null,(function(e){r((0,F.RO)({instanceID:n,progress:e}))}),(function(){r((0,F.oK)(n))}),(function(e){r((0,F.qJ)({instanceID:n,msg:e}))}),(function(){r((0,F.Im)(n))})),a=(0,Ue.YO)(8);(0,Ue.EN)(a,o),r((0,F.Mc)({ID:a,bucketName:i,done:!1,instanceID:n,percentage:0,prefix:e.name,type:"download",waitingForFile:!0,failed:!1,cancelled:!1,errorMessage:""})),o.send()}(e)},Ce=function(e){r((0,F.M3)(e.version_id||""))},ke=B.filter((function(e){return!!e.version_id&&e.version_id.includes(s)})),Ne=B.reduce((function(e,n){return n.size?e+parseInt(n.size):e}),0);ke.sort((function(e,n){if("size"===X)return e.size&&n.size?e.size<n.size?-1:e.size>n.size?1:0:0;var t=new Date(e.last_modified).getTime(),i=new Date(n.last_modified).getTime();return t<i?1:t>i?-1:0}));var Ee=function(e){if(me.includes(e)){var n=me.filter((function(n){return n!==e}));pe(n)}else{var t=(0,m.Z)(me);t.push(e),pe(t)}};return(0,O.jsxs)(o.Fragment,{children:[v&&S&&(0,O.jsx)(Pe.default,{open:v,closeModalAndRefresh:function(){P(null),j(!1),ie(!1)},bucketName:i,dataObject:_||S}),H&&S&&(0,O.jsx)(Te,{restoreOpen:H,bucketName:i,versionID:Y,objectPath:S.name,onCloseAndUpdate:function(e){V(!1),G(""),e&&(r((0,F.Eq)(!0)),r((0,F.vH)(!0)))}}),te&&S&&(0,O.jsx)(Re.default,{open:te,bucketName:i,object:{name:S.name,version_id:_&&_.version_id?_.version_id:"null",size:parseInt(_&&_.size?_.size:"0"),content_type:"",last_modified:new Date(S.last_modified)},onClosePreview:function(){ie(!1)}}),re&&(0,O.jsx)(We,{deleteOpen:re,closeDeleteModalAndRefresh:function(e){se(!1),e&&(r((0,F.Eq)(!0)),r((0,F.M3)("")),r((0,F.vH)(!0)))},selectedBucket:i,selectedObject:t}),ge&&(0,O.jsx)(Ae,{selectedBucket:i,selectedObject:(0,Z.IO)(t),deleteOpen:ge,selectedVersions:me,closeDeleteModalAndRefresh:function(e){be(!1),e&&(r((0,F.Eq)(!0)),r((0,F.M3)("")),r((0,F.vH)(!0)),pe([]))}}),(0,O.jsxs)(u.ZP,{container:!0,className:n.versionsContainer,children:[!S&&(0,O.jsx)(u.ZP,{item:!0,xs:12,children:(0,O.jsx)(_e.Z,{})}),S&&(0,O.jsxs)(o.Fragment,{children:[(0,O.jsx)(u.ZP,{item:!0,xs:12,children:(0,O.jsx)(z,{bucketName:i,internalPaths:(0,Z.IO)(t),existingFiles:[],hidePathButton:!0})}),(0,O.jsx)(u.ZP,{item:!0,xs:12,className:n.screenTitleContainer,children:(0,O.jsx)(M.Z,{icon:(0,O.jsx)("span",{className:n.listIcon,children:(0,O.jsx)(E.cRd,{})}),title:(0,O.jsxs)("span",{className:n.titleSpacer,children:[je.length>0?je[je.length-1]:S.name," ","Versions"]}),subTitle:(0,O.jsx)(o.Fragment,{children:(0,O.jsxs)(u.ZP,{item:!0,xs:12,className:n.bucketDetails,children:[(0,O.jsx)("span",{className:n.detailsSpacer,children:(0,O.jsxs)("strong",{children:[B.length," Version",1===B.length?"":"s","\xa0\xa0\xa0"]})}),(0,O.jsx)("span",{className:n.detailsSpacer,children:(0,O.jsx)("strong",{children:(0,Z.l5)(Ne)})})]})}),actions:(0,O.jsxs)(o.Fragment,{children:[(0,O.jsx)(T.Z,{id:"select-multiple-versions",tooltip:"Select Multiple Versions",onClick:function(){ue(!de)},text:"",icon:(0,O.jsx)(E.amE,{}),color:"primary",variant:de?"contained":"outlined",style:{marginRight:8}}),de&&(0,O.jsx)(T.Z,{id:"delete-multiple-versions",tooltip:"Delete Selected Versions",onClick:function(){be(!0)},text:"",icon:(0,O.jsx)(E.pJl,{}),color:"secondary",style:{marginRight:8},disabled:0===me.length}),(0,O.jsx)(T.Z,{id:"delete-non-current",tooltip:"Delete Non Current Versions",onClick:function(){se(!0)},text:"",icon:(0,O.jsx)(E.utM,{}),color:"secondary",style:{marginRight:15},disabled:B.length<=1}),(0,O.jsx)("span",{className:n.sortByLabel,children:"Sort by"}),(0,O.jsx)(ze.Z,{id:"sort-by",label:"",value:X,onChange:function(e){Q(e.target.value)},name:"sort-by",options:[{label:"Date",value:"date"},{label:"Size",value:"size"}]})]}),className:n.noBottomBorder})}),(0,O.jsx)(u.ZP,{item:!0,xs:12,className:n.versionsVirtualPanel,children:S.version_id&&"null"!==S.version_id&&(0,O.jsx)(He.aV,{style:{width:"100%"},containerStyle:{width:"100%",maxWidth:"100%"},width:1,height:800,rowCount:ke.length,rowHeight:108,rowRenderer:function(e){var n=e.key,t=e.index,i=(e.isScrolling,e.isVisible,e.style),o=B.length-t;return(0,O.jsx)(Be,{style:i,fileName:(null===S||void 0===S?void 0:S.name)||"",versionInfo:ke[t],index:o,onDownload:Se,onRestore:ye,onShare:Ze,onPreview:we,globalClick:Ce,isSelected:l===ke[t].version_id,checkable:de,onCheck:Ee,isChecked:me.includes(ke[t].version_id||"")},n)}})})]})]})]})})),qe=t(9859),Ye=t(56028),Ge=t(37516),Je=(0,q.Z)((function(e){return(0,s.Z)((0,i.Z)((0,i.Z)((0,i.Z)((0,i.Z)({},f.ID),f.DF),f.bK),(0,f.Bz)(e.spacing(4))))})),$e=function(e){var n=e.open,t=e.closeModal,i=e.currentItem,a=e.internalPaths,r=e.actualInfo,s=e.bucketName,c=Je(),l=(0,h.TL)(),d=(0,o.useState)(i),f=(0,p.Z)(d,2),m=f[0],x=f[1],v=(0,o.useState)(!1),g=(0,p.Z)(v,2),b=g[0],j=g[1];return(0,O.jsxs)(Ye.Z,{title:"Rename Download",modalOpen:n,onClose:t,titleIcon:(0,O.jsx)(E.dY8,{}),children:[(0,O.jsxs)("div",{children:["The file you are trying to download has a long name.",(0,O.jsx)("br",{}),"This can cause issues on Windows Systems by trimming the file name after download.",(0,O.jsx)("br",{}),(0,O.jsx)("br",{})," We recommend to rename the file download"]}),(0,O.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){!function(e){e.preventDefault();var n=(0,Z.LL)("".concat(s,"-").concat(r.name,"-").concat((new Date).getTime(),"-").concat(Math.random())),i=(0,R.LR)(s,a,r.version_id,parseInt(r.size||"0"),m,(function(e){l((0,F.RO)({instanceID:n,progress:e}))}),(function(){l((0,F.oK)(n))}),(function(e){l((0,F.qJ)({instanceID:n,msg:e}))}),(function(){l((0,F.Im)(n))})),o=(0,Ue.YO)(8);(0,Ue.EN)(o,i),l((0,F.Mc)({ID:o,bucketName:s,done:!1,instanceID:n,percentage:0,prefix:m,type:"download",waitingForFile:!0,failed:!1,cancelled:!1,errorMessage:""})),i.send(),t()}(e)},children:(0,O.jsxs)(u.ZP,{container:!0,children:[(0,O.jsxs)(u.ZP,{item:!0,xs:12,className:c.modalFormScrollable,children:[(0,O.jsx)(u.ZP,{item:!0,xs:12,className:c.formFieldRow,children:(0,O.jsx)(Me.Z,{id:"download-filename",name:"download-filename",onChange:function(e){x(e.target.value)},label:"",type:"text",value:m,error:m.length>200&&!b?"Filename should be less than 200 characters long.":""})}),(0,O.jsx)(u.ZP,{item:!0,xs:12,className:c.formFieldRow,children:(0,O.jsx)(Ge.Z,{value:"acceptLongName",id:"acceptLongName",name:"acceptLongName",checked:b,onChange:function(e){j(e.target.checked),e.target.checked&&x(i)},label:"Use Original Name"})})]}),(0,O.jsx)(u.ZP,{item:!0,xs:12,className:c.modalButtonBar,children:(0,O.jsx)(N.Z,{type:"submit",variant:"contained",color:"primary",disabled:m.length>200&&!b,children:"Download File"})})]})})]})},Xe=t(46078),Qe=o.lazy((function(){return Promise.resolve().then(t.bind(t,13065))})),en=o.lazy((function(){return Promise.resolve().then(t.bind(t,28789))})),nn=o.lazy((function(){return Promise.resolve().then(t.bind(t,74768))})),tn=(0,I.Z)(o.lazy((function(){return t.e(711).then(t.bind(t,50711))}))),on=(0,I.Z)(o.lazy((function(){return Promise.resolve().then(t.bind(t,34433))}))),an=(0,I.Z)(o.lazy((function(){return Promise.all([t.e(3691),t.e(4814),t.e(6901)]).then(t.bind(t,26901))}))),rn=(0,I.Z)(o.lazy((function(){return Promise.resolve().then(t.bind(t,78562))}))),sn=(0,q.Z)((function(e){return(0,s.Z)((0,i.Z)((0,i.Z)((0,i.Z)((0,i.Z)((0,i.Z)((0,i.Z)({browsePaper:{border:0,height:"calc(100vh - 210px)","&.isEmbedded":{height:"calc(100vh - 315px)"},"&.actionsPanelOpen":{minHeight:"100%"},"@media (max-width: 800px)":{width:800}},"@global":{".rowLine:hover  .iconFileElm":{backgroundImage:"url(/images/ob_file_filled.svg)"},".rowLine:hover  .iconFolderElm":{backgroundImage:"url(/images/ob_folder_filled.svg)"}},badgeOverlap:{"& .MuiBadge-badge":{top:10,right:1,width:5,height:5,minWidth:5}},screenTitle:{borderBottom:0,paddingTop:0,paddingLeft:0,paddingRight:0}},f.VX),f.OR),f.qg),{},{searchField:(0,i.Z)((0,i.Z)({},f.qg.searchField),{},{maxWidth:380}),screenTitleContainer:{border:"#EAEDEE 1px solid",padding:"0.8rem 15px 0"},labelStyle:{color:"#969FA8",fontSize:"12px"},breadcrumbsContainer:{padding:"12px 14px 5px"},parentWrapper:{"@media (max-width: 800px)":{overflowX:"auto"}},fullContainer:{"@media (max-width: 799px)":{width:0}},hideListOnSmall:{"@media (max-width: 799px)":{display:"none"}}},f.C4),f.cx),(0,f.Bz)(e.spacing(4))))})),cn={borderWidth:2,borderRadius:2,borderColor:"#eeeeee",outline:"none"},ln={borderStyle:"dashed",backgroundColor:"#fafafa",borderColor:"#2196f3"},dn={borderStyle:"dashed",backgroundColor:"#fafafa",borderColor:"#00e676"};var un=(0,O.jsx)(w.Z,{component:"h3",children:"Loading..."}),hn=function(){var e,n=sn(),t=(0,h.TL)(),s=(0,r.UO)(),c=(0,r.s0)(),l=(0,r.TH)(),d=(0,D.$)().t,f=(0,a.v9)((function(e){return e.objectBrowser.rewind.rewindEnabled})),v=(0,a.v9)((function(e){return e.objectBrowser.rewind.dateToRewind})),S=(0,a.v9)((function(e){return e.objectBrowser.rewind.bucketToRewind})),C=(0,a.v9)((function(e){return e.objectBrowser.versionsMode})),k=(0,a.v9)((function(e){return e.objectBrowser.searchObjects})),N=(0,a.v9)((function(e){return e.objectBrowser.showDeleted})),I=(0,a.v9)((function(e){return e.objectBrowser.objectDetailsOpen})),B=(0,a.v9)((function(e){return e.objectBrowser.selectedInternalPaths})),A=(0,a.v9)((function(e){return e.objectBrowser.loadingObjects})),U=(0,a.v9)((function(e){return e.objectBrowser.simplePath})),H=(0,a.v9)(qe.HQ),V=(0,a.v9)(qe.G6),q=(0,a.v9)((function(e){return e.console.session.allowResources})),Y=(0,a.v9)(Xe.$4),J=!(null===Y||void 0===Y||!Y.includes("object-browser-only")),$=(0,o.useState)([]),X=(0,p.Z)($,2),Q=X[0],ne=X[1],te=(0,o.useState)(!1),ie=(0,p.Z)(te,2),oe=ie[0],ae=ie[1],re=(0,o.useState)(0),se=(0,p.Z)(re,2),ce=se[0],le=se[1],de=(0,o.useState)(un),ue=(0,p.Z)(de,2),he=ue[0],fe=ue[1],me=(0,o.useState)(!0),pe=(0,p.Z)(me,2),xe=pe[0],ve=pe[1],ge=(0,o.useState)(!1),be=(0,p.Z)(ge,2),je=be[0],Ze=be[1],we=(0,o.useState)(!0),ye=(0,p.Z)(we,2),Se=ye[0],Ce=ye[1],ke=(0,o.useState)(!1),_e=(0,p.Z)(ke,2),Pe=(_e[0],_e[1]),Ie=(0,o.useState)(!1),Le=(0,p.Z)(Ie,2),Fe=Le[0],Te=Le[1],De=(0,o.useState)([]),Be=(0,p.Z)(De,2),ze=Be[0],Re=Be[1],Me=(0,o.useState)(!1),We=(0,p.Z)(Me,2),Ae=We[0],He=We[1],Ve=(0,o.useState)(null),Ye=(0,p.Z)(Ve,2),Ge=Ye[0],Je=Ye[1],hn=(0,o.useState)(!1),fn=(0,p.Z)(hn,2),mn=fn[0],pn=fn[1],xn=(0,o.useState)("ASC"),vn=(0,p.Z)(xn,2),gn=vn[0],bn=vn[1],jn=(0,o.useState)("name"),Zn=(0,p.Z)(jn,2),wn=Zn[0],yn=Zn[1],Sn=(0,o.useState)(!1),Cn=(0,p.Z)(Sn,2),kn=Cn[0],Nn=Cn[1],En=(0,o.useState)(!1),_n=(0,p.Z)(En,2),Pn=_n[0],In=_n[1],Ln=(0,o.useState)(!1),Fn=(0,p.Z)(Ln,2),Tn=Fn[0],Dn=Fn[1],On=(0,o.useState)(null),Bn=(0,p.Z)(On,2),zn=(Bn[0],Bn[1],(0,o.useState)(null)),Rn=(0,p.Z)(zn,2),Mn=Rn[0],Wn=Rn[1],An=l.pathname.split("/browse/"),Un=2===An.length?An[1]:"",Hn=s.bucketName||"",Vn=(0,o.useRef)(null),Kn=(0,o.useRef)(null);(0,o.useEffect)((function(){null!==Kn.current&&(Kn.current.setAttribute("directory",""),Kn.current.setAttribute("webkitdirectory",""))}),[Kn]),(0,o.useEffect)((function(){if(1===ze.length){var e=ze[0];"none"!==(0,R.Bg)(e)?Dn(!0):Dn(!1),e.endsWith("/")?In(!1):In(!0)}else In(!1),Dn(!1)}),[ze]),(0,o.useEffect)((function(){ze.length>0?t((0,F.vb)(!0)):0===ze.length&&t((0,F.vb)(!1))}),[ze,B,t]);var qn=(0,_.F)(Hn,[P.Ft.S3_DELETE_OBJECT]),Yn=(0,_.F)(Hn,[P.Ft.S3_LIST_BUCKET]);(0,o.useEffect)((function(){kn||(t((0,qe.d5)(!0)),Nn(!0))}),[kn,t,Nn]),function(e,n){var t=(0,o.useRef)(null);(0,o.useEffect)((function(){t.current=e}),[e]),(0,o.useEffect)((function(){if(null!==n){var e=setInterval((function(){void 0!==t&&t.current&&t.current()}),n);return function(){return clearInterval(e)}}}),[n])}((function(){A&&function(){var e=Date.now()-ce;e/1e3>=6?fe((0,O.jsx)(o.Fragment,{children:(0,O.jsxs)(w.Z,{component:"h3",children:["This operation is taking longer than expected... (",Math.ceil(e/1e3),"s)"]})})):e/1e3>=3&&fe((0,O.jsx)(w.Z,{component:"h3",children:"This operation is taking longer than expected..."}))}()}),1e3),(0,o.useEffect)((function(){xe&&(Yn?b.Z.invoke("GET","/api/v1/buckets/".concat(Hn,"/versioning")).then((function(e){Ze(e.is_versioned),ve(!1)})).catch((function(e){console.error("Error Getting Object Versioning Status: ",e.detailedError),ve(!1)})):(ve(!1),ne([])))}),[Hn,xe,t,Yn]),(0,o.useEffect)((function(){Se&&(Yn?b.Z.invoke("GET","/api/v1/buckets/".concat(Hn,"/object-locking")).then((function(e){Pe(e.object_locking_enabled),Ce(!1)})).catch((function(e){console.error("Error Getting Object Locking Status: ",e.detailedError),Ce(!1)})):(ne([]),Ce(!1)))}),[Hn,Se,t,Yn]),(0,o.useEffect)((function(){var e=(0,Z.IO)(Un);e.endsWith("/")||""===e?(t((0,F.vb)(!1)),t((0,F.EE)(null)),t((0,F.Su)(""===e?"/":e))):(t((0,F.vH)(!0)),t((0,F.vb)(!0)),t((0,F.Eq)(!0)),t((0,F.EE)("".concat(e?"".concat((0,Z.LL)(e)):""))),t((0,F.Su)("".concat(e.split("/").slice(0,-1).join("/"),"/"))))}),[Un,v,f,t]),(0,o.useEffect)((function(){t((0,F.G4)("")),t((0,F.MU)(!0)),Re([])}),[U,t,Re]),(0,o.useEffect)((function(){if(A)if(Yn){var e="";if(Un){var n=(0,Z.IO)(Un);e=n.endsWith("/")?n:n+"/"}var i=Date.now();le(i),fe(un);var o="/api/v1/buckets/".concat(Hn,"/objects");if(f){if(S!==Hn)return void t((0,F._w)());if(v){var a=v.toISOString();o="/api/v1/buckets/".concat(Hn,"/rewind/").concat(a)}}else if(N){var r=(new Date).toISOString();o="/api/v1/buckets/".concat(Hn,"/rewind/").concat(r)}b.Z.invoke("GET","".concat(o).concat(e?"?prefix=".concat((0,Z.LL)(e)):"")).then((function(n){var i=n.objects||[],a=[],r=[];i.forEach((function(e){e.name!==(0,Z.IO)(Un)&&(e.name.endsWith("/")?a.push(e):r.push(e))}));var s=[].concat(a,r);if(0===s.length&&""!==e){var c="/api/v1/buckets/".concat(Hn,"/objects").concat(Un?"?prefix=".concat(Un):"");if(f){var l=v.toISOString(),d="";if(Un){var u=(0,Z.IO)(Un);d=u.endsWith("/")?u:u+"/"}c="/api/v1/buckets/".concat(Hn,"/rewind/").concat(l).concat(d?"?prefix=".concat((0,Z.LL)(d)):"")}b.Z.invoke("GET",c).then((function(n){if(n.objects){for(var i=!1,a=e.slice(0,e.length-1),r=0;r<n.objects.length;r++)n.objects[r].name===a&&(i=!0);if(1===n.objects.length&&n.objects[0].name.endsWith("/")||!i)ne(s);else{t((0,F.vb)(!0)),t((0,F.EE)(Un));var c="".concat((0,Z.IO)(Un).split("/").slice(0,-1).join("/"),"/");b.Z.invoke("GET","".concat(o).concat(e?"?prefix=".concat((0,Z.LL)(c)):"")).then((function(e){var n=e.objects||[];ne(n)})).catch((function(){}))}t((0,F.MU)(!1))}else t((0,F.MU)(!1)),ne(s)})).catch((function(e){t((0,F.MU)(!1)),t((0,L.Ih)(e))}))}else ne(s),t((0,F.MU)(!1))})).catch((function(n){var i=(0,R.kh)(Hn,e,q||[]);i&&0!==i.length?ne(i):t((0,L.Ih)(n)),t((0,F.MU)(!1))}))}else t((0,F.MU)(!1))}),[A,t,Hn,f,v,Un,V,N,Yn,S,q]),(0,o.useEffect)((function(){H&&b.Z.invoke("GET","/api/v1/buckets/".concat(Hn)).then((function(e){t((0,qe.d5)(!1)),t((0,qe.f4)(e))})).catch((function(e){t((0,qe.d5)(!1)),t((0,L.Ih)(e))}))}),[Hn,H,t]);var Gn=function(e){if(null!==e&&void 0!==e&&null!==e.target.files&&void 0!==e.target.files){e.preventDefault();for(var n=[],t=0;t<e.target.files.length;t++)n.push(e.target.files[t]);Jn(n,""),e.target.value=""}},Jn=(0,o.useCallback)((function(e,n){var i="";U&&(i=U.endsWith("/")?U:U+"/");!function(e,n,i,o){var a=function(a){return new Promise((function(r,s){var c="api/v1/buckets/".concat(n,"/objects/upload"),l=a.name,d=new Blob([a],{type:a.type}),u="",h=g()(a,"path",""),f=g()(a,"webkitRelativePath",""),m=o;if(""!==h?m=h:""!==f&&(m=f),""!==i||""!==m){var p=m.split("/").slice(0,-1).join("/"),x=i.endsWith("/")?i.slice(0,-1):i;u=(0,Z.LL)("".concat(x).concat(x.endsWith("/")||""===p||p.startsWith("/")?"":"/").concat(p).concat(!p.endsWith("/")||""===p.trim()&&!i.endsWith("/")?"/":""))}""!==u&&(c="".concat(c,"?prefix=").concat(u));var v=(0,Z.LL)("".concat(n,"-").concat(u,"-").concat((new Date).getTime(),"-").concat(Math.random())),b=new XMLHttpRequest;b.open("POST",c,!0);var j=e.length>1,w="An error occurred while uploading the file".concat(j?"s":"","."),y={413:"Error - File size too large"};b.withCredentials=!1,b.onload=function(e){if(b.status>=200&&b.status<300)t((0,F.oK)(v)),r({status:b.status});else{if(y[b.status])w=y[b.status];else if(b.response)try{var n=JSON.parse(b.response);w=n.detailedMessage}catch(i){w="something went wrong"}t((0,F.qJ)({instanceID:v,msg:w})),s({status:b.status,message:w})}},b.upload.addEventListener("error",(function(e){s(w),t((0,F.qJ)({instanceID:v,msg:"A network error occurred."}))})),b.upload.addEventListener("progress",(function(e){var n=Math.floor(100*e.loaded/e.total);t((0,F.RO)({instanceID:v,progress:n}))})),b.onerror=function(){s(w),t((0,F.qJ)({instanceID:v,msg:"A network error occurred."}))},b.onloadend=function(){0===e.length&&t((0,F.MU)(!0))},b.onabort=function(){t((0,F.Im)(v))};var S=new FormData;if(void 0!==a.size){S.append(a.size.toString(),d,l);var C=(0,Ue.YO)(8);(0,Ue.EN)(C,b),t((0,F.Mc)({ID:C,bucketName:n,done:!1,instanceID:v,percentage:0,prefix:"".concat((0,Z.IO)(u)).concat(l),type:"upload",waitingForFile:!1,failed:!1,cancelled:!1,errorMessage:""})),b.send(S)}}))},r=[];t((0,F.LD)());for(var s=0;s<e.length;s++){var c=e[s];r.push(a(c))}Promise.allSettled(r).then((function(e){var n=e.filter((function(e){return"rejected"===e.status}));if(n.length>0){var i=r.length,o=r.length-n.length,a={errorMessage:"There were some errors during file upload",detailedError:"Uploaded files ".concat(o,"/").concat(i)};t((0,L.Ih)(a))}t((0,F.MU)(!0)),Re([])}))}(e,Hn,i,n)}),[Hn,t,U]),$n=(0,o.useCallback)((function(e){if(e&&e.length>0){var n=e[0].path;Jn(e,n)}}),[Jn]),Xn=(0,x.uI)({noClick:!0,onDrop:$n}),Qn=Xn.getRootProps,et=Xn.getInputProps,nt=Xn.isDragActive,tt=Xn.isDragAccept,it=(0,o.useMemo)((function(){return(0,i.Z)((0,i.Z)((0,i.Z)({},cn),nt?ln:{}),tt?dn:{})}),[nt,tt]),ot=Q.filter((function(e){return""===k||e.name.toLowerCase().indexOf(k.toLowerCase())>=0})),at=(0,Z.IO)(Un),rt=at.split("/").filter((function(e){return""!==e})),st=ot.sort((0,R.P_)(wn)),ct=[];ct="ASC"===gn?st:st.reverse();var lt=[Hn];rt.length>0&&(lt=lt.concat(rt));var dt=function(e){if(t((0,F.EE)(null)),t((0,F.db)({status:!1})),I&&null!==B){var n=(0,Z.IO)(Un).split("/");n.pop();var i="";n&&n.length>0&&(i="".concat(n.join("/"),"/")),c("/buckets/".concat(Hn,"/browse/").concat((0,Z.LL)(i)))}t((0,F.vb)(!1)),Re([]),e&&t((0,F.MU)(!0))},ut=[{type:"view",label:"View",onClick:function(e){var n=e.lastIndexOf("/")===e.length-1;if(console.log(n),n){Re([]);var i="/buckets/".concat(Hn,"/browse").concat(e?"/".concat((0,Z.LL)(e)):"");c(i)}else{var o=ze;o.includes(e)?o=o.filter((function(n){return n!==e})):o.push(e),Re(o),t((0,F.EE)(null)),t((0,F.EE)("".concat(e?"".concat((0,Z.LL)(e)):"")))}},sendOnlyId:!0}],ht=[{action:function(){if(0!==ze.length){var e=[];if(1===(e=ot.filter((function(e){return ze.includes(e.name)}))).length&&e[0].name.length>200&&(0,Z.mv)().toLowerCase().includes("win"))return void Wn(e[0]);e.forEach((function(e){!function(e){var n=(0,Z.LL)("".concat(Hn,"-").concat(e.name,"-").concat((new Date).getTime(),"-").concat(Math.random())),i=(0,R.LR)(Hn,(0,Z.LL)(e.name),e.version_id,e.size,null,(function(e){t((0,F.RO)({instanceID:n,progress:e}))}),(function(){t((0,F.oK)(n))}),(function(e){t((0,F.qJ)({instanceID:n,msg:e}))}),(function(){t((0,F.Im)(n))})),o=(0,Ue.YO)(8);(0,Ue.EN)(o,i),t((0,F.Mc)({ID:o,bucketName:Hn,done:!1,instanceID:n,percentage:0,prefix:e.name,type:"download",waitingForFile:!0,failed:!1,cancelled:!1,errorMessage:""})),i.send()}(e)}))}},label:d("download"),disabled:0===ze.length,icon:(0,O.jsx)(E._8t,{}),tooltip:d("download_selected")},{action:function(){if(1===ze.length){var e;(e=ot.find((function(e){return ze.includes(e.name)})))&&(Je(e),pn(!0))}},label:d("share"),disabled:1!==ze.length||!Pn,icon:(0,O.jsx)(E.aAc,{}),tooltip:d("share_selected_file")},{action:function(){if(1===ze.length){var e;(e=ot.find((function(e){return ze.includes(e.name)})))&&(Je(e),He(!0))}},label:d("preview"),disabled:1!==ze.length||!Tn,icon:(0,O.jsx)(E.P99,{}),tooltip:d("preview_selected_file")},{action:function(){ae(!0)},label:d("delete"),icon:(0,O.jsx)(nn,{}),disabled:!(0,_.F)(Hn,[P.Ft.S3_DELETE_OBJECT])||0===ze.length||!qn,tooltip:d("delete_selected_file")}];return(0,O.jsxs)(o.Fragment,{children:[mn&&Ge&&(0,O.jsx)(on,{open:mn,closeModalAndRefresh:function(){pn(!1),Je(null)},bucketName:Hn,dataObject:{name:Ge.name,last_modified:"",version_id:Ge.version_id}}),oe&&(0,O.jsx)(tn,{deleteOpen:oe,selectedBucket:Hn,selectedObjects:ze,closeDeleteModalAndRefresh:function(e){ae(!1),e&&(t((0,L.y1)("Objects deleted successfully.")),Re([]),t((0,F.MU)(!0)))},versioning:je}),Fe&&(0,O.jsx)(an,{open:Fe,closeModalAndRefresh:function(){Te(!1)},bucketName:Hn}),Ae&&(0,O.jsx)(rn,{open:Ae,bucketName:Hn,object:Ge,onClosePreview:function(){He(!1),Je(null)}}),!!Mn&&(0,O.jsx)($e,{open:!!Mn,closeModal:function(){Wn(null)},currentItem:(null===(e=Mn.name.split("/"))||void 0===e?void 0:e.pop())||"",bucketName:Hn,internalPaths:Un,actualInfo:{name:Mn.name,last_modified:"",version_id:Mn.version_id,size:Mn.size.toString()}}),(0,O.jsxs)(W.Z,{variant:"full",children:[(0,O.jsx)(u.ZP,{item:!0,xs:12,className:n.screenTitleContainer,children:(0,O.jsx)(M.Z,{className:n.screenTitle,icon:(0,O.jsx)("span",{className:n.listIcon,children:(0,O.jsx)(E.wNb,{})}),title:(0,O.jsx)("span",{className:n.titleSpacer,children:Hn}),subTitle:(0,O.jsx)(o.Fragment,{children:(0,O.jsxs)(u.ZP,{item:!0,xs:12,className:n.bucketDetails,children:[(0,O.jsxs)("span",{className:n.detailsSpacer,children:[d("created"),":\xa0\xa0\xa0",(0,O.jsx)("strong",{children:(null===V||void 0===V?void 0:V.creation_date)||""})]}),(0,O.jsxs)("span",{className:n.detailsSpacer,children:[d("access"),":\xa0\xa0\xa0",(0,O.jsx)("strong",{children:V?d(V.access.toLocaleLowerCase()).toUpperCase():""})]}),V&&(0,O.jsx)(o.Fragment,{children:(0,O.jsx)("span",{className:n.detailsSpacer,children:V.objects&&(0,O.jsxs)(o.Fragment,{children:[V.objects,"\xa0",d("objects"),V.objects&&1!==V.objects?"s":""]})})})]})}),actions:(0,O.jsx)(o.Fragment,{children:(0,O.jsxs)("div",{className:n.actionsSection,children:[(0,O.jsx)(T.Z,{id:"rewind-objects-list",tooltip:d("rewind_bucket"),text:d("rewind"),icon:(0,O.jsx)(y.Z,{badgeContent:" ",color:"secondary",variant:"dot",invisible:!f,className:n.badgeOverlap,sx:{height:16},children:(0,O.jsx)(Qe,{style:{minWidth:16,minHeight:16,width:16,height:16}})}),color:"primary",variant:"outlined",onClick:function(){Te(!0)},disabled:!je||!(0,_.F)(Hn,[P.Ft.S3_GET_OBJECT])}),(0,O.jsx)(T.Z,{id:"refresh-objects-list",tooltip:d("reload_list"),text:d("refresh"),icon:(0,O.jsx)(en,{}),color:"primary",variant:"outlined",onClick:function(){t(C?(0,F.Eq)(!0):(0,F.MU)(!0))},disabled:!(0,_.F)(Hn,[P.Ft.S3_LIST_BUCKET])||f}),(0,O.jsx)("input",{type:"file",multiple:!0,onChange:Gn,style:{display:"none"},ref:Vn}),(0,O.jsx)("input",{type:"file",multiple:!0,onChange:Gn,style:{display:"none"},ref:Kn}),(0,O.jsx)(K,{bucketName:Hn,uploadPath:lt.join("/"),uploadFileFunction:function(e){Vn&&Vn.current&&Vn.current.click(),e()},uploadFolderFunction:function(e){Kn&&Kn.current&&Kn.current.click(),e()}})]})})})}),(0,O.jsxs)("div",(0,i.Z)((0,i.Z)({id:"object-list-wrapper"},Qn({style:(0,i.Z)({},it)})),{},{children:[(0,O.jsx)("input",(0,i.Z)({},et())),(0,O.jsxs)(u.ZP,{item:!0,xs:12,className:n.tableBlock,sx:{border:"#EAEDEE 1px solid",borderTop:0},children:[C?(0,O.jsx)(o.Fragment,{children:null!==B&&(0,O.jsx)(Ke,{internalPaths:B,bucketName:Hn})}):(0,O.jsx)(_.s,{scopes:[P.Ft.S3_LIST_BUCKET],resource:Hn,errorProps:{disabled:!0},children:(0,O.jsxs)(u.ZP,{item:!0,xs:12,className:n.fullContainer,children:[(0,O.jsx)(u.ZP,{item:!0,xs:12,className:n.breadcrumbsContainer,children:(0,O.jsx)(z,{bucketName:Hn,internalPaths:at,existingFiles:Q||[],additionalOptions:!je||f?null:(0,O.jsx)("div",{children:(0,O.jsx)(Oe.Z,{name:"deleted_objects",id:"showDeletedObjects",value:"deleted_on",label:d("show_deleted_obj"),onChange:function(){t((0,F.mz)(!N)),dt(!0)},checked:N,overrideLabelClasses:n.labelStyle,className:n.overrideShowDeleted,noTopMargin:!0})}),hidePathButton:!1})}),(0,O.jsx)(j.Z,{itemActions:ut,columns:f?Ee:Ne,isLoading:A,loadingMessage:he,entityName:"Objects",idField:"name",records:ct,customPaperHeight:"".concat(n.browsePaper," ").concat(J?"isEmbedded":""," ").concat(I?"actionsPanelOpen":""),selectedItems:ze,onSelect:function(e){var n=e.target,i=n.value,o=n.checked,a=(0,m.Z)(ze);return o?a.push(i):a=a.filter((function(e){return e!==i})),Re(a),t((0,F.EE)(null)),a},customEmptyMessage:"".concat(d("this_location_empty")," ").concat(f?"":", ".concat(d("please_try_uploading_a_new_file"))),sortConfig:{currentSort:wn,currentDirection:gn,triggerSort:function(e){var n=g()(e,"sortDirection","DESC");yn(e.sortBy),bn(n),t((0,F.MU)(!0))}},onSelectAll:function(){if(t((0,F.EE)(null)),ze.length!==ct.length){var e=ct.map((function(e){return e.name}));Re(e)}else Re([])},rowStyle:function(e){var n,t=e.index;return null!==(n=ct[t])&&void 0!==n&&n.delete_flag?d("deleted"):""},parentClassName:n.parentWrapper})]})}),(0,O.jsx)(_.s,{scopes:[P.Ft.S3_LIST_BUCKET],resource:Hn,errorProps:{disabled:!0},children:(0,O.jsx)(G,{open:I,closePanel:function(){dt(!1)},className:"".concat(C?n.hideListOnSmall:""),children:ze.length>0&&(0,O.jsx)(ee,{items:ht,title:"".concat(d("selected_objects"),":")})})})]})]}))]})]})},fn=t(32291),mn=t(95792),pn=t(84669),xn=t(59114),vn=t(73996),gn=(0,c.Z)((function(e){return(0,s.Z)((0,i.Z)({},(0,f.Bz)(e.spacing(4))))}))((function(){var e=(0,h.TL)(),n=(0,r.s0)(),t=(0,D.$)().t,i=(0,r.UO)(),s=(0,r.TH)(),c=(0,a.v9)((function(e){return e.objectBrowser.versionsMode})),f=(0,a.v9)((function(e){return e.objectBrowser.searchObjects})),m=(0,a.v9)((function(e){return e.objectBrowser.versionedFile})),p=(0,a.v9)((function(e){return e.objectBrowser.searchVersions})),x=(0,a.v9)(Xe.$4),v=i.bucketName||"",g=s.pathname.split("/browse/"),b=2===g.length?g[1]:"",j=!(null===x||void 0===x||!x.includes("object-browser-only"));(0,o.useEffect)((function(){e((0,F.db)({status:!1}))}),[b,e]);var Z=(0,O.jsx)(o.Fragment,{children:c?(0,O.jsx)(o.Fragment,{children:(0,O.jsx)(xn.Z,{placeholder:"start_typing_to_filter_version_of".concat(" ",m),onChange:function(n){e((0,F.Pr)(n))},value:p})}):(0,O.jsx)(_.s,{scopes:[P.Ft.S3_LIST_BUCKET],resource:v,errorProps:{disabled:!0},children:(0,O.jsx)(xn.Z,{placeholder:t("start_typing_to_filter_obj"),onChange:function(n){e((0,F.G4)(n))},value:f})})});return(0,O.jsxs)(o.Fragment,{children:[j?(0,O.jsxs)(u.ZP,{container:!0,sx:{padding:"20px 32px 0"},children:[(0,O.jsx)(u.ZP,{children:(0,O.jsx)(vn.Z,{marginRight:30,marginTop:10})}),(0,O.jsx)(u.ZP,{item:!0,xs:!0,children:Z})]}):(0,O.jsx)(fn.Z,{label:(0,O.jsx)(pn.Z,{label:"Buckets",to:P.gA.BUCKETS}),actions:(0,O.jsx)(_.s,{scopes:P.D[P.EI.BUCKET_ADMIN],resource:v,errorProps:{disabled:!0},children:(0,O.jsx)(l.Z,{title:t("configure_bucket"),children:(0,O.jsx)(d.Z,{color:"primary","aria-label":t("configure_bucket"),component:"span",onClick:function(){n("/buckets/".concat(v,"/admin"))},size:"large",children:(0,O.jsx)(mn.Z,{})})})}),middleComponent:Z}),(0,O.jsx)(u.ZP,{children:(0,O.jsx)(hn,{})})]})}))},34433:function(e,n,t){t.r(n),t.d(n,{default:function(){return L}});var i=t(29439),o=t(1413),a=t(72791),r=t(26181),s=t.n(r),c=t(60364),l=t(11135),d=t(25787),u=t(78029),h=t.n(u),f=t(61889),m=t(40986),p=t(23814),x=t(81207),v=t(56028),g=t(64163),b=t(30829),j=t(72426),Z=t.n(j),w=t(21435),y=t(75900),S=t(80184),C=(0,d.Z)((function(e){return(0,l.Z)((0,o.Z)((0,o.Z)((0,o.Z)({},p.YI),p.Hr),{},{labelContainer:{display:"flex",alignItems:"center",marginBottom:15},fieldContainer:(0,o.Z)((0,o.Z)({},p.YI.fieldContainer),{},{display:"flex",alignItems:"center",justifyContent:"space-between",paddingBottom:10,marginTop:11,marginBottom:6}),dateInputContainer:{margin:"0 10px"},durationInputs:{display:"flex",alignItems:"center",justifyContent:"flex-start"},validityIndicator:{display:"flex",alignItems:"center",justifyContent:"flex-start",marginTop:25,marginLeft:10},invalidDurationText:{marginTop:15,display:"flex",color:"red",fontSize:11},reverseInput:{flexFlow:"row-reverse","& > label":{fontWeight:400,marginLeft:15,marginRight:25}},validityText:{fontSize:14,marginTop:15,display:"flex",alignItems:"center",justifyContent:"center","@media (max-width: 900px)":{flexFlow:"column"},"& > .min-icon":{color:"#5E5E5E",width:15,height:15,marginRight:10}},validTill:{fontWeight:"bold",marginLeft:15}}))}))((function(e){var n=e.classes,t=e.id,o=e.initialDate,r=e.label,s=e.maxDays,c=e.entity,l=e.onChange,d=(0,a.useState)(7),u=(0,i.Z)(d,2),h=u[0],m=u[1],p=(0,a.useState)(0),x=(0,i.Z)(p,2),v=x[0],g=x[1],j=(0,a.useState)(0),C=(0,i.Z)(j,2),k=C[0],N=C[1],E=(0,a.useState)(!0),_=(0,i.Z)(E,2),P=_[0],I=_[1],L=(0,a.useState)(Z()()),F=(0,i.Z)(L,2),T=F[0],D=F[1];(0,a.useEffect)((function(){D(function(e,n,t,i){return Z()(e).add(n,"days").add(t,"hours").add(i,"minutes")}(o,h,v,k))}),[o,h,v,k]),(0,a.useEffect)((function(){P?l(T.format("YYYY-MM-DDTHH:mm:ss"),!0):l("0000-00-00",!1)}),[T,l,P]),(0,a.useEffect)((function(){var e=!0;(h<0||s&&h>s||isNaN(h))&&(e=!1),(v<0||v>23||isNaN(v))&&(e=!1),(k<0||k>59||isNaN(k))&&(e=!1),!s||h!==s||0===v&&0===k||(e=!1),I(e)}),[T,s,l,h,v,k]);var O={style:{textAlign:"center",paddingRight:10,paddingLeft:10,width:25},className:"removeArrows"};return(0,S.jsx)(a.Fragment,{children:(0,S.jsxs)(f.ZP,{container:!0,className:n.fieldContainer,children:[(0,S.jsx)(f.ZP,{item:!0,xs:12,className:n.labelContainer,children:(0,S.jsx)(b.Z,{htmlFor:t,className:n.inputLabel,sx:{marginLeft:"10px"},children:(0,S.jsx)("span",{children:r})})}),(0,S.jsxs)(f.ZP,{item:!0,xs:12,className:n.durationInputs,children:[(0,S.jsx)(f.ZP,{item:!0,className:n.dateInputContainer,children:(0,S.jsx)(w.Z,{id:t,className:n.reverseInput,type:"number",min:"0",max:s?s.toString():"999",label:"Days",name:t,onChange:function(e){m(parseInt(e.target.value))},value:h.toString(),extraInputProps:O,noLabelMinWidth:!0})}),(0,S.jsx)(f.ZP,{item:!0,className:n.dateInputContainer,children:(0,S.jsx)(w.Z,{id:t,className:n.reverseInput,type:"number",min:"0",max:"23",label:"Hours",name:t,onChange:function(e){g(parseInt(e.target.value))},value:v.toString(),extraInputProps:O,noLabelMinWidth:!0})}),(0,S.jsx)(f.ZP,{item:!0,className:n.dateInputContainer,children:(0,S.jsx)(w.Z,{id:t,className:n.reverseInput,type:"number",min:"0",max:"59",label:"Minutes",name:t,onChange:function(e){N(parseInt(e.target.value))},value:k.toString(),extraInputProps:O,noLabelMinWidth:!0})})]}),(0,S.jsx)(f.ZP,{item:!0,xs:12,className:"".concat(n.validityIndicator," ").concat(n.formFieldRow),children:P?(0,S.jsxs)("div",{className:n.validityText,children:[(0,S.jsx)(y.xPt,{}),(0,S.jsxs)("div",{className:n.validityLabel,children:[c," will be available until:"]})," ",(0,S.jsx)("div",{className:n.validTill,children:T.format("MM/DD/YYYY HH:mm:ss")})]}):(0,S.jsx)("div",{className:n.invalidDurationText,children:"Please select a valid duration."})})]})})})),k=t(45248),N=t(85531),E=t(87995),_=t(25469),P=a.lazy((function(){return Promise.resolve().then(t.bind(t,79880))})),I=new Date,L=(0,d.Z)((function(e){return(0,l.Z)((0,o.Z)((0,o.Z)({shareLinkInfo:{fontSize:14,fontWeight:400},copyShareLink:{display:"flex","@media (max-width: 900px)":{flexFlow:"column",alignItems:"center",justifyContent:"center"}},copyShareLinkInput:{"& div:first-child":{marginTop:0},"@media (max-width: 900px)":{minWidth:250}},copyShareLinkBtn:{display:"flex",alignItems:"center",justifyContent:"center","@media (max-width: 900px)":{marginTop:10}}},p.ID),p.DF))}))((function(e){var n=e.classes,t=e.open,o=e.closeModalAndRefresh,r=e.bucketName,l=e.dataObject,d=(0,_.TL)(),u=(0,c.v9)(E.N5),p=(0,a.useState)(""),b=(0,i.Z)(p,2),j=b[0],Z=b[1],w=(0,a.useState)(!0),L=(0,i.Z)(w,2),F=L[0],T=L[1],D=(0,a.useState)(!1),O=(0,i.Z)(D,2),B=O[0],z=O[1],R=(0,a.useState)(""),M=(0,i.Z)(R,2),W=M[0],A=M[1],U=(0,a.useState)(!0),H=(0,i.Z)(U,2),V=H[0],K=H[1],q=(0,a.useState)("null"),Y=(0,i.Z)(q,2),G=Y[0],J=Y[1];return(0,a.useEffect)((function(){if(void 0===l.version_id)return u?(x.Z.invoke("GET","/api/v1/buckets/".concat(r,"/objects?prefix=").concat((0,k.LL)(l.name)).concat(u?"&with_versions=true":"")).then((function(e){var n=s()(e,"objects",[]).find((function(e){return e.is_latest}));J(n?n.version_id:"null")})).catch((function(e){d((0,E.zb)(e))})),void T(!1)):(J("null"),void T(!1));J(l.version_id||"null"),T(!1)}),[r,l,u,d]),(0,a.useEffect)((function(){if(V&&!F){z(!0),Z("");var e=new Date("".concat(W)),n=I,t=Math.ceil((e.getTime()-n.getTime())/1e3);t>0&&x.Z.invoke("GET","/api/v1/buckets/".concat(r,"/objects/share?prefix=").concat((0,k.LL)(l.name),"&version_id=").concat(G).concat(""!==W?"&expires=".concat(t,"s"):"")).then((function(e){Z(e),z(!1)})).catch((function(e){d((0,E.zb)(e)),Z(""),z(!1)}))}}),[l,W,r,V,Z,d,u,F,G]),(0,S.jsx)(a.Fragment,{children:(0,S.jsxs)(v.Z,{title:"Share File",titleIcon:(0,S.jsx)(y.aAc,{style:{fill:"#4CCB92"}}),modalOpen:t,onClose:function(){o()},children:[F&&(0,S.jsx)(f.ZP,{item:!0,xs:12,children:(0,S.jsx)(m.Z,{})}),!F&&(0,S.jsxs)(a.Fragment,{children:[(0,S.jsxs)(f.ZP,{item:!0,xs:12,className:n.shareLinkInfo,children:["This is a temporary URL with integrated access credentials for sharing objects valid for up to 7 days.",(0,S.jsx)("br",{}),(0,S.jsx)("br",{}),"The temporary URL expires after the configured time limit."]}),(0,S.jsx)("br",{}),(0,S.jsx)(f.ZP,{item:!0,xs:12,className:n.dateContainer,children:(0,S.jsx)(C,{initialDate:I,id:"date",label:"Active for",maxDays:7,onChange:function(e,n){K(n),n?A(e):(A(""),Z(""))},entity:"Link"})}),(0,S.jsx)(f.ZP,{item:!0,xs:12,className:"".concat(n.copyShareLink," ").concat(n.formFieldRow," "),children:(0,S.jsx)(f.ZP,{item:!0,xs:12,className:n.copyShareLinkInput,children:(0,S.jsx)(g.Z,{content:j,actionButton:(0,S.jsx)(h(),{text:j,children:(0,S.jsx)(N.Z,{variant:"outlined",onClick:function(){d((0,E.MK)("Share URL Copied to clipboard"))},disabled:""===j||B,sx:{marginRight:"5px",width:"28px",height:"28px",padding:"0px"},children:(0,S.jsx)(P,{})})})})})})]})]})})}))},78562:function(e,n,t){t.r(n),t.d(n,{default:function(){return v}});var i=t(72791),o=t(56028),a=t(4942),r=t(29439),s=t(11135),c=t(25787),l=t(61889),d=t(40986),u=t(47922),h=t(45248),f=t(28182),m=t(80184),p=(0,c.Z)((function(){return(0,s.Z)({iframeContainer:{border:"0px",flex:"1 1 auto",width:"100%",height:250,backgroundColor:"transparent",borderRadius:5,"&.image":{height:500},"&.text":{height:700},"&.audio":{height:150},"&.video":{height:350},"&.fullHeight":{height:"calc(100vh - 185px)"}},iframeBase:{backgroundColor:"#fff"},iframeHidden:{display:"none"}})}))((function(e){var n=e.bucketName,t=e.object,o=e.isFullscreen,s=void 0!==o&&o,c=e.classes,p=(0,i.useState)(!0),x=(0,r.Z)(p,2),v=x[0],g=x[1],b="";if(t){var j=(0,h.LL)(t.name),Z=document.baseURI.replace(window.location.origin,"");b="".concat(window.location.origin).concat(Z,"api/v1/buckets/").concat(n,"/objects/download?preview=true&prefix=").concat(j),t.version_id&&(b=b.concat("&version_id=".concat(t.version_id)))}var w=(0,u.Bg)((null===t||void 0===t?void 0:t.name)||""),y=function(){g(!1)};return(0,m.jsxs)(i.Fragment,{children:[v&&(0,m.jsx)(l.ZP,{item:!0,xs:12,children:(0,m.jsx)(d.Z,{})}),(0,m.jsxs)("div",{style:{textAlign:"center"},children:["video"===w&&(0,m.jsx)("video",{style:{width:"auto",height:"auto",maxWidth:"calc(100vw - 100px)",maxHeight:"calc(100vh - 200px)"},autoPlay:!0,controls:!0,muted:!1,playsInline:!0,onPlay:y,children:(0,m.jsx)("source",{src:b,type:"video/mp4"})}),"audio"===w&&(0,m.jsx)("audio",{style:{width:"100%",height:"auto"},autoPlay:!0,controls:!0,muted:!1,playsInline:!0,onPlay:y,children:(0,m.jsx)("source",{src:b,type:"audio/mpeg"})}),"image"===w&&(0,m.jsx)("img",{style:{width:"auto",height:"auto",maxWidth:"100vw",maxHeight:"100vh"},src:b,alt:"preview",onLoad:y}),"video"!==w&&"audio"!==w&&"image"!==w&&(0,m.jsx)("div",{className:(0,f.Z)(c.iframeBase,(0,a.Z)({},c.iframeHidden,v)),children:(0,m.jsx)("iframe",{src:b,title:"File Preview",allowTransparency:!0,className:"".concat(c.iframeContainer," ").concat(s?"fullHeight":w),onLoad:y,children:"File couldn't be loaded. Please try Download instead"})})]})]})})),x=t(75900),v=function(e){var n=e.open,t=e.bucketName,a=e.object,r=e.onClosePreview;return(0,m.jsx)(i.Fragment,{children:(0,m.jsx)(o.Z,{modalOpen:n,title:"Preview - ".concat(null===a||void 0===a?void 0:a.name),onClose:r,wideLimit:!1,titleIcon:(0,m.jsx)(x.$30,{}),children:(0,m.jsx)(p,{bucketName:t,object:a})})})}},47922:function(e,n,t){t.d(n,{Bg:function(){return a},LR:function(){return o},P_:function(){return r},kh:function(){return s}});var i=t(45248),o=function(e,n,t,o){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,r=arguments.length>5?arguments[5]:void 0,s=arguments.length>6?arguments[6]:void 0,c=arguments.length>7?arguments[7]:void 0,l=arguments.length>8?arguments[8]:void 0,d=document.createElement("a");document.body.appendChild(d);var u=document.baseURI.replace(window.location.origin,""),h="".concat(window.location.origin).concat(u,"api/v1/buckets/").concat(e,"/objects/download?prefix=").concat(n).concat(null!==a&&""!==a.trim()?"&override_file_name=".concat((0,i.LL)(a||"")):"");t&&(h=h.concat("&version_id=".concat(t)));var f=new XMLHttpRequest;return f.open("GET",h,!0),f.addEventListener("progress",(function(e){var n=Math.round(e.loaded/o*100);r&&r(n)}),!1),f.responseType="blob",f.onreadystatechange=function(){if(4===f.readyState)if(200===f.status){var e=f.getResponseHeader("Content-Disposition"),n="download";if(e)n=decodeURIComponent(e).split('"')[1];s&&s();var t=document.createElement("a");t.href=window.URL.createObjectURL(f.response),t.download=n,document.body.appendChild(t),t.click(),document.body.removeChild(t)}else{if("application/json"===f.getResponseHeader("Content-Type")){var i=JSON.parse(f.response);if(i.detailedMessage)return void c(i.detailedMessage)}c("Unexpected response status code (".concat(f.status,")."))}},f.onerror=function(){c&&c("A network error occurred.")},f.onabort=function(){l&&l()},f},a=function(e){var n=e.split(".").pop();return n?(n=n.toLowerCase(),["jif","jfif","apng","avif","svg","webp","bmp","ico","jpg","jpe","jpeg","gif","png","heic"].includes(n)?"image":["pdf","txt","json"].includes(n)?"text":["wav","mp3","alac","aiff","dsd","pcm"].includes(n)?"audio":["mp4","avi","mpg","webm","mov","flv","mkv","wmv","avchd","mpeg-4"].includes(n)?"video":"none"):"none"},r=function(e){switch(e){case"name":return function(e,n){return e.name.localeCompare(n.name)};case"last_modified":return function(e,n){return new Date(e.last_modified).getTime()-new Date(n.last_modified).getTime()};case"size":return function(e,n){return(e.size||-1)-(n.size||-1)}}},s=function(e,n,t){if(0===t.length)return null;var i=t.filter((function(n){return n.resource.endsWith(":".concat(e))||n.resource.includes(":".concat(e,"/"))}));if(0===i.length)return null;var o=[],a=n.split("/");return i.forEach((function(e){var n=(e.resource.split(":").pop()||"").split("/");n.length>1&&n.every((function(e,n){return"*"!==e&&((!a[n]||a[n]===e)&&(a[n]||o.push({name:"".concat(e,"/"),size:0,last_modified:new Date,version_id:""}),!0))})),"StringEquals"!==e.conditionOperator&&"StringLike"!==e.conditionOperator||e.prefixes.forEach((function(e){if(""!==e){var n=e.split("/"),t=[];n.every((function(e,n){return!e.includes("*")&&""!==e&&(e!==a[n]?(o.push({name:"".concat(t.join("/")).concat(t.length>0?"/":"").concat(e,"/"),size:0,last_modified:new Date,version_id:""}),!1):(""!==e&&t.push(e),!0))}))}}))})),o}},73996:function(e,n,t){t(72791);var i=t(75900),o=t(60364),a=t(80184);n.Z=function(e){var n=e.marginRight,r=e.marginTop,s=t(47045),c=(0,o.v9)((function(e){return e.system.overrideStyles})),l=s((null===c||void 0===c?void 0:c.backgroundColor)||"#fff").getBrightness()<=128;return(0,a.jsx)(i.BHR,{style:{width:105,marginRight:n,marginTop:r,fill:l?"#fff":"#081C42"}})}},75578:function(e,n,t){var i=t(1413),o=t(72791),a=t(80184);n.Z=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;function t(t){return(0,a.jsx)(o.Suspense,{fallback:n,children:(0,a.jsx)(e,(0,i.Z)({},t))})}return t}},64163:function(e,n,t){var i=t(1413),o=t(72791),a=t(61889),r=t(11135),s=t(25787),c=t(23814),l=t(80184);n.Z=(0,s.Z)((function(e){return(0,r.Z)((0,i.Z)({},c.xx))}))((function(e){var n=e.classes,t=e.label,i=void 0===t?"":t,r=e.content,s=e.multiLine,c=void 0!==s&&s,d=e.actionButton;return(0,l.jsx)(o.Fragment,{children:(0,l.jsxs)(a.ZP,{className:n.prefinedContainer,children:[""!==i&&(0,l.jsx)(a.ZP,{item:!0,xs:12,className:n.predefinedTitle,children:i}),(0,l.jsxs)(a.ZP,{item:!0,xs:12,className:"".concat(n.predefinedList," ").concat(d?n.includesActionButton:""),children:[(0,l.jsx)(a.ZP,{item:!0,xs:12,className:c?n.innerContentMultiline:n.innerContent,children:r}),d&&(0,l.jsx)("div",{className:n.overlayShareOption,children:d})]})]})})}))},56028:function(e,n,t){var i=t(29439),o=t(1413),a=t(72791),r=t(60364),s=t(13400),c=t(55646),l=t(5574),d=t(65661),u=t(39157),h=t(11135),f=t(25787),m=t(23814),p=t(25469),x=t(29823),v=t(28057),g=t(87995),b=t(80184);n.Z=(0,f.Z)((function(e){return(0,h.Z)((0,o.Z)((0,o.Z)({},m.Qw),{},{content:{padding:25,paddingBottom:0},customDialogSize:{width:"100%",maxWidth:765}},m.sN))}))((function(e){var n=e.onClose,t=e.modalOpen,h=e.title,f=e.children,m=e.classes,j=e.wideLimit,Z=void 0===j||j,w=e.noContentPadding,y=e.titleIcon,S=void 0===y?null:y,C=(0,p.TL)(),k=(0,a.useState)(!1),N=(0,i.Z)(k,2),E=N[0],_=N[1],P=(0,r.v9)((function(e){return e.system.modalSnackBar}));(0,a.useEffect)((function(){C((0,g.MK)(""))}),[C]),(0,a.useEffect)((function(){if(P){if(""===P.message)return void _(!1);"error"!==P.type&&_(!0)}}),[P]);var I=Z?{classes:{paper:m.customDialogSize}}:{maxWidth:"lg",fullWidth:!0},L="";return P&&(L=P.detailedErrorMsg,(""===P.detailedErrorMsg||P.detailedErrorMsg.length<5)&&(L=P.message)),(0,b.jsxs)(l.Z,(0,o.Z)((0,o.Z)({open:t,classes:m},I),{},{scroll:"paper",onClose:function(e,t){"backdropClick"!==t&&n()},className:m.root,children:[(0,b.jsxs)(d.Z,{className:m.title,style:{zIndex:1},children:[(0,b.jsxs)("div",{className:m.titleText,children:[S," ",h]}),(0,b.jsx)("div",{className:m.closeContainer,children:(0,b.jsx)(s.Z,{"aria-label":"close",id:"close",className:m.closeButton,onClick:n,disableRipple:!0,size:"small",children:(0,b.jsx)(x.Z,{})})})]}),(0,b.jsx)(v.Z,{isModal:!0}),(0,b.jsx)(c.Z,{open:E,className:m.snackBarModal,onClose:function(){_(!1),C((0,g.MK)(""))},message:L,ContentProps:{className:"".concat(m.snackBar," ").concat(P&&"error"===P.type?m.errorSnackBar:"")},autoHideDuration:P&&"error"===P.type?1e4:5e3}),(0,b.jsx)(u.Z,{className:w?"":m.content,children:f})]}))}))},59114:function(e,n,t){var i=t(4942),o=t(1413),a=(t(72791),t(63466)),r=t(74900),s=t(27391),c=t(25787),l=t(11135),d=t(23814),u=t(80184);n.Z=(0,c.Z)((function(e){return(0,l.Z)({searchField:(0,o.Z)({},d.qg.searchField),adornment:{}})}))((function(e){var n=e.placeholder,t=void 0===n?"":n,o=e.classes,c=e.onChange,l=e.adornmentPosition,d=void 0===l?"end":l,h=e.overrideClass,f=e.value,m=(0,i.Z)({disableUnderline:!0},"".concat(d,"Adornment"),(0,u.jsx)(a.Z,{position:d,className:o.adornment,children:(0,u.jsx)(r.Z,{})}));return(0,u.jsx)(s.Z,{placeholder:t,className:h||o.searchField,id:"search-resource",label:"",InputProps:m,onChange:function(e){c(e.target.value)},variant:"standard",value:f})}))},76610:function(e,n,t){t.d(n,{EN:function(){return o},Gy:function(){return a},YO:function(){return r}});var i={},o=function(e,n){i[e]=n},a=function(e){return i[e]},r=function(e){for(var n="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=t.length,o=0;o<e;o++)n+=t.charAt(Math.floor(Math.random()*i));return n}}}]);
//# sourceMappingURL=8069.fddfcec6.chunk.js.map