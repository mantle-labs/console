"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[1803],{31803:function(e,n,i){i.r(n),i.d(n,{default:function(){return V}});var t=i(29439),s=i(1413),r=i(72791),o=i(60364),l=i(16871),a=i(11135),c=i(25787),u=i(61889),d=i(64554),f=i(26181),x=i.n(f),p=i(23814),h=i(81207),m=i(56087),Z=i(38442),v=i(75578),g=i(45902),j=i(80184),b=function(e){var n=e.icon,i=void 0===n?null:n,t=e.label,s=void 0===t?null:t;return(0,j.jsxs)(d.Z,{sx:{display:"flex"},children:[(0,j.jsx)("div",{style:{height:16,width:16,display:"flex",alignItems:"center",marginTop:5},children:i}),(0,j.jsx)("div",{style:{marginLeft:i?5:"none"},children:s})]})},C=i(75900),k=i(45987),y=i(36151),E=i(72401),S=["isLoading","onClick","label"],T=function(e){var n=e.isLoading,i=e.onClick,t=e.label,r=(0,k.Z)(e,S);return(0,j.jsx)(y.Z,(0,s.Z)((0,s.Z)({color:"primary",onClick:i,variant:"text",sx:{padding:0,margin:0,alignItems:"flex-start",justifyContent:"flex-start",display:"inline-flex",height:"auto",textDecoration:"underline",color:"#2781B0","&:hover":{background:"#ffffff",textDecoration:"underline"}},disableRipple:!0,disableFocusRipple:!0},r),{},{children:n?(0,j.jsx)(E.Z,{style:{width:16,height:16}}):t}))},_=i(13400),N=i(33548),P=["disabled","onClick"],I=(0,c.Z)((function(e){return(0,a.Z)({root:{"&:hover":{backgroundColor:"#E2E2E2"}}})}))((function(e){var n=e.disabled,i=e.onClick,t=(0,k.Z)(e,P);return(0,j.jsx)(_.Z,(0,s.Z)((0,s.Z)({size:"small",disabled:n,onClick:i},t),{},{children:(0,j.jsx)(N.Z,{})}))})),O=function(e){var n=e.resourceName,i=e.iamScopes,t=e.secureCmpProps,r=void 0===t?{}:t,o=e.children;return(0,j.jsx)(Z.s,(0,s.Z)((0,s.Z)({scopes:i,resource:n,errorProps:{disabled:!0}},r),{},{children:o}))},R=function(e){var n=e.isLoading,i=void 0===n||n,t=e.resourceName,s=void 0===t?"":t,r=e.iamScopes,o=e.secureCmpProps,l=void 0===o?{}:o,a=e.property,c=void 0===a?null:a,u=e.value,f=void 0===u?null:u,x=e.onEdit;return(0,j.jsxs)(d.Z,{sx:{display:"flex",alignItems:"baseline",justifyContent:"flex-start"},children:[(0,j.jsx)(g.Z,{label:c,value:(0,j.jsx)(O,{resourceName:s,iamScopes:r,secureCmpProps:l,children:(0,j.jsx)(T,{isLoading:i,onClick:x,label:f})})}),(0,j.jsx)(O,{resourceName:s,iamScopes:r,secureCmpProps:l,children:(0,j.jsx)(I,{onClick:x,sx:{background:"#f8f8f8",marginLeft:"3px",top:3,"& .min-icon":{width:"16px",height:"16px"}}})})]})},w=i(45248),L=function(e){var n=e.bucketSize;return(0,j.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center","& .min-icon":{height:37,width:37}},children:[(0,j.jsx)(C.Mhr,{}),(0,j.jsxs)(d.Z,{sx:{display:"flex",alignItems:"flex-start",justifyContent:"center",flexFlow:"column",marginLeft:"20px",fontSize:"19px"},children:[(0,j.jsx)("label",{style:{fontWeight:600},children:"Reported Usage:"}),(0,j.jsx)("label",{children:(0,w.ae)(n)})]})]})},F=i(50896),B=i(87995),U=i(9859),G=i(25469),A=(0,v.Z)(r.lazy((function(){return Promise.all([i.e(4825),i.e(1913)]).then(i.bind(i,33690))}))),z=(0,v.Z)(r.lazy((function(){return i.e(1604).then(i.bind(i,1604))}))),K=(0,v.Z)(r.lazy((function(){return i.e(402).then(i.bind(i,70402))}))),M=(0,v.Z)(r.lazy((function(){return Promise.all([i.e(1918),i.e(1705)]).then(i.bind(i,71705))}))),D={display:"grid",gridTemplateColumns:{xs:"1fr",sm:"2fr 1fr"},gridAutoFlow:{xs:"dense",sm:"row"},gap:2},V=(0,c.Z)((function(e){return(0,a.Z)((0,s.Z)((0,s.Z)({},p.bK),p.VI))}))((function(e){var n=e.classes,i=(0,G.TL)(),a=(0,l.UO)(),c=(0,o.v9)(U.HQ),f=(0,o.v9)(U.G6),p=(0,o.v9)(B.N5),v=(0,r.useState)("0"),k=(0,t.Z)(v,2),y=k[0],E=k[1],S=(0,r.useState)(!1),T=(0,t.Z)(S,2),_=T[0],N=T[1],P=(0,r.useState)(!1),I=(0,t.Z)(P,2),O=I[0],w=I[1],V=(0,r.useState)(!0),J=(0,t.Z)(V,2),W=J[0],Y=J[1],$=(0,r.useState)(!0),Q=(0,t.Z)($,2),H=Q[0],q=Q[1],X=(0,r.useState)(!0),ee=(0,t.Z)(X,2),ne=ee[0],ie=ee[1],te=(0,r.useState)(!0),se=(0,t.Z)(te,2),re=se[0],oe=se[1],le=(0,r.useState)(!0),ae=(0,t.Z)(le,2),ce=ae[0],ue=ae[1],de=(0,r.useState)(!1),fe=(0,t.Z)(de,2),xe=fe[0],pe=fe[1],he=(0,r.useState)(!1),me=(0,t.Z)(he,2),Ze=me[0],ve=me[1],ge=(0,r.useState)(null),je=(0,t.Z)(ge,2),be=je[0],Ce=je[1],ke=(0,r.useState)(!1),ye=(0,t.Z)(ke,2),Ee=ye[0],Se=ye[1],Te=(0,r.useState)(!1),_e=(0,t.Z)(Te,2),Ne=_e[0],Pe=_e[1],Ie=a.bucketName||"",Oe="n/a",Re="";null!==f&&(Oe=f.access,Re=f.definition);var we=(0,Z.F)(Ie,[m.Ft.S3_GET_BUCKET_OBJECT_LOCK_CONFIGURATION]);(0,r.useEffect)((function(){ie(!!c)}),[c,ie]),(0,r.useEffect)((function(){re&&p&&h.Z.invoke("GET","/api/v1/buckets/".concat(Ie,"/versioning")).then((function(e){pe(e.is_versioned),oe(!1)})).catch((function(e){i((0,B.Ih)(e)),oe(!1)}))}),[re,i,Ie,p]),(0,r.useEffect)((function(){re&&p&&(we?h.Z.invoke("GET","/api/v1/buckets/".concat(Ie,"/object-locking")).then((function(e){N(e.object_locking_enabled),Y(!1)})).catch((function(e){i((0,B.Ih)(e)),Y(!1)})):Y(!1))}),[W,i,Ie,re,p,we]),(0,r.useEffect)((function(){H&&h.Z.invoke("GET","/api/v1/buckets").then((function(e){var n=x()(e,"buckets",[]).find((function(e){return e.name===Ie})),i=x()(n,"size","0");q(!1),E(i)})).catch((function(e){q(!1),i((0,B.Ih)(e))}))}),[H,i,Ie]),(0,r.useEffect)((function(){ce&&_&&h.Z.invoke("GET","/api/v1/buckets/".concat(Ie,"/retention")).then((function(e){ue(!1),ve(!0),Ce(e)})).catch((function(e){ve(!1),ue(!1),Ce(null)}))}),[ce,_,Ie]);var Le=function(){i((0,U.d5)(!0)),ie(!0),q(!0),oe(!0),ue(!0)};return(0,j.jsxs)(r.Fragment,{children:[O&&(0,j.jsx)(A,{bucketName:Ie,open:O,actualPolicy:Oe,actualDefinition:Re,closeModalAndRefresh:function(){w(!1),Le()}}),Ee&&(0,j.jsx)(z,{bucketName:Ie,open:Ee,closeModalAndRefresh:function(){Se(!1),Le()}}),Ne&&(0,j.jsx)(K,{closeVersioningModalAndRefresh:function(e){Pe(!1),e&&Le()},modalOpen:Ne,selectedBucket:Ie,versioningCurrentState:xe}),(0,j.jsx)(F.Z,{children:"Summary"}),(0,j.jsxs)(u.ZP,{container:!0,spacing:1,children:[(0,j.jsx)(Z.s,{scopes:[m.Ft.S3_GET_BUCKET_POLICY],resource:Ie,children:(0,j.jsx)(u.ZP,{item:!0,xs:12,children:(0,j.jsxs)(d.Z,{sx:(0,s.Z)({},D),children:[(0,j.jsxs)(d.Z,{sx:(0,s.Z)({},D),children:[(0,j.jsx)(Z.s,{scopes:[m.Ft.S3_GET_BUCKET_POLICY],resource:Ie,children:(0,j.jsx)(R,{iamScopes:[m.Ft.S3_PUT_BUCKET_POLICY],resourceName:Ie,property:"Access Policy:",value:Oe.toLowerCase(),onEdit:function(){w(!0)},isLoading:ne})}),(0,j.jsx)(Z.s,{scopes:[m.Ft.S3_GET_BUCKET_OBJECT_LOCK_CONFIGURATION],resource:Ie,children:(0,j.jsx)(g.Z,{label:"Object Locking:",value:(0,j.jsx)(b,{icon:_?(0,j.jsx)(C.E31,{}):(0,j.jsx)(C.dRf,{}),label:(0,j.jsx)("label",{className:n.textMuted,children:_?"Enabled":"Disabled"})})})}),(0,j.jsx)(d.Z,{className:n.spacerTop,children:(0,j.jsx)(g.Z,{label:"Tags:",value:(0,j.jsx)(M,{bucketName:Ie})})})]}),(0,j.jsx)(d.Z,{sx:{display:"grid",gridTemplateColumns:"1fr",alignItems:"flex-start"},children:(0,j.jsx)(L,{bucketSize:y})})]})})}),p&&(0,j.jsx)(Z.s,{scopes:[m.Ft.S3_GET_BUCKET_VERSIONING],resource:Ie,children:(0,j.jsxs)(u.ZP,{item:!0,xs:12,children:[(0,j.jsx)(F.Z,{children:"Versioning"}),(0,j.jsx)(d.Z,{sx:(0,s.Z)({},D),children:(0,j.jsx)(d.Z,{sx:(0,s.Z)({},D),children:(0,j.jsx)(R,{iamScopes:[m.Ft.S3_PUT_BUCKET_VERSIONING],resourceName:Ie,property:"Current Status:",value:xe?"Versioned":"Unversioned (Default)",onEdit:function(){Pe(!0)},isLoading:re})})})]})}),_&&(0,j.jsx)(Z.s,{scopes:[m.Ft.S3_GET_OBJECT_RETENTION],resource:Ie,children:(0,j.jsxs)(u.ZP,{item:!0,xs:12,children:[(0,j.jsx)(F.Z,{children:"Retention"}),(0,j.jsxs)(d.Z,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"2fr 1fr"},gridAutoFlow:{xs:"dense",sm:"row"},gap:2},children:[(0,j.jsxs)(d.Z,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"2fr 1fr"},gridAutoFlow:{xs:"dense",sm:"row"},gap:2},children:[(0,j.jsx)(R,{iamScopes:[m.Ft.ADMIN_SET_BUCKET_QUOTA],resourceName:Ie,property:"Retention:",value:Ze?"Enabled":"Disabled",onEdit:function(){Se(!0)},isLoading:ce}),(0,j.jsx)(g.Z,{label:"Mode:",value:(0,j.jsx)("label",{className:n.textMuted,style:{textTransform:"capitalize"},children:be&&be.mode?be.mode:"-"})}),(0,j.jsx)(g.Z,{label:"Validity:",value:(0,j.jsxs)("label",{className:n.textMuted,style:{textTransform:"capitalize"},children:[be&&be.validity," ",be&&(1===be.validity?be.unit.slice(0,-1):be.unit)]})})]}),(0,j.jsx)(d.Z,{sx:{display:"grid",gridTemplateColumns:"1fr",alignItems:"flex-start"}})]})]})})]})]})}))},45902:function(e,n,i){var t=i(1413),s=(i(72791),i(53767)),r=i(80184);n.Z=function(e){var n=e.label,i=void 0===n?null:n,o=e.value,l=void 0===o?"-":o,a=e.orientation,c=void 0===a?"column":a,u=e.stkProps,d=void 0===u?{}:u,f=e.lblProps,x=void 0===f?{}:f,p=e.valProps,h=void 0===p?{}:p;return(0,r.jsxs)(s.Z,(0,t.Z)((0,t.Z)({direction:{xs:"column",sm:c}},d),{},{children:[(0,r.jsx)("label",(0,t.Z)((0,t.Z)({style:{marginRight:5,fontWeight:600}},x),{},{children:i})),(0,r.jsx)("label",(0,t.Z)((0,t.Z)({style:{marginRight:5,fontWeight:500}},h),{},{children:l}))]}))}},53767:function(e,n,i){var t=i(4942),s=i(63366),r=i(87462),o=i(72791),l=i(51184),a=i(45682),c=i(78519),u=i(82466),d=i(66934),f=i(31402),x=i(80184),p=["component","direction","spacing","divider","children"];function h(e,n){var i=o.Children.toArray(e).filter(Boolean);return i.reduce((function(e,t,s){return e.push(t),s<i.length-1&&e.push(o.cloneElement(n,{key:"separator-".concat(s)})),e}),[])}var m=(0,d.ZP)("div",{name:"MuiStack",slot:"Root",overridesResolver:function(e,n){return[n.root]}})((function(e){var n=e.ownerState,i=e.theme,s=(0,r.Z)({display:"flex"},(0,l.k9)({theme:i},(0,l.P$)({values:n.direction,breakpoints:i.breakpoints.values}),(function(e){return{flexDirection:e}})));if(n.spacing){var o=(0,a.hB)(i),c=Object.keys(i.breakpoints.values).reduce((function(e,i){return null==n.spacing[i]&&null==n.direction[i]||(e[i]=!0),e}),{}),d=(0,l.P$)({values:n.direction,base:c}),f=(0,l.P$)({values:n.spacing,base:c});s=(0,u.Z)(s,(0,l.k9)({theme:i},f,(function(e,i){return{"& > :not(style) + :not(style)":(0,t.Z)({margin:0},"margin".concat((s=i?d[i]:n.direction,{row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"}[s])),(0,a.NA)(o,e))};var s})))}return s})),Z=o.forwardRef((function(e,n){var i=(0,f.Z)({props:e,name:"MuiStack"}),t=(0,c.Z)(i),o=t.component,l=void 0===o?"div":o,a=t.direction,u=void 0===a?"column":a,d=t.spacing,Z=void 0===d?0:d,v=t.divider,g=t.children,j=(0,s.Z)(t,p),b={direction:u,spacing:Z};return(0,x.jsx)(m,(0,r.Z)({as:l,ownerState:b,ref:n},j,{children:v?h(g,v):g}))}));n.Z=Z}}]);
//# sourceMappingURL=1803.804b4a31.chunk.js.map